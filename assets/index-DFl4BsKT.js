(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function il(e,t){const n=new Set(e.split(","));return t?r=>n.has(r.toLowerCase()):r=>n.has(r)}const dt={},ar=[],he=()=>{},$g=()=>!1,Wi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),ol=e=>e.startsWith("onUpdate:"),jt=Object.assign,al=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Zg=Object.prototype.hasOwnProperty,Z=(e,t)=>Zg.call(e,t),L=Array.isArray,lr=e=>Cs(e)==="[object Map]",Rr=e=>Cs(e)==="[object Set]",zc=e=>Cs(e)==="[object Date]",G=e=>typeof e=="function",Pt=e=>typeof e=="string",hn=e=>typeof e=="symbol",mt=e=>e!==null&&typeof e=="object",qh=e=>(mt(e)||G(e))&&G(e.then)&&G(e.catch),Qh=Object.prototype.toString,Cs=e=>Qh.call(e),tm=e=>Cs(e).slice(8,-1),Hh=e=>Cs(e)==="[object Object]",ll=e=>Pt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Wr=il(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ji=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},em=/-(\w)/g,pr=Ji(e=>e.replace(em,(t,n)=>n?n.toUpperCase():"")),nm=/\B([A-Z])/g,Cr=Ji(e=>e.replace(nm,"-$1").toLowerCase()),Gh=Ji(e=>e.charAt(0).toUpperCase()+e.slice(1)),qo=Ji(e=>e?`on${Gh(e)}`:""),fn=(e,t)=>!Object.is(e,t),fi=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},vi=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},as=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let qc;const Kh=()=>qc||(qc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ee(e){if(L(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Pt(r)?om(r):ee(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Pt(e)||mt(e))return e}const rm=/;(?![^(]*\))/g,sm=/:([^]+)/,im=/\/\*[^]*?\*\//g;function om(e){const t={};return e.replace(im,"").split(rm).forEach(n=>{if(n){const r=n.split(sm);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Qe(e){let t="";if(Pt(e))t=e;else if(L(e))for(let n=0;n<e.length;n++){const r=Qe(e[n]);r&&(t+=r+" ")}else if(mt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const am="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",lm=il(am);function Wh(e){return!!e||e===""}function cm(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Bn(e[r],t[r]);return n}function Bn(e,t){if(e===t)return!0;let n=zc(e),r=zc(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=hn(e),r=hn(t),n||r)return e===t;if(n=L(e),r=L(t),n||r)return n&&r?cm(e,t):!1;if(n=mt(e),r=mt(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Bn(e[o],t[o]))return!1}}return String(e)===String(t)}function cl(e,t){return e.findIndex(n=>Bn(n,t))}const Dt=e=>Pt(e)?e:e==null?"":L(e)||mt(e)&&(e.toString===Qh||!G(e.toString))?JSON.stringify(e,Jh,2):String(e),Jh=(e,t)=>t&&t.__v_isRef?Jh(e,t.value):lr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Qo(r,i)+" =>"]=s,n),{})}:Rr(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Qo(n))}:hn(t)?Qo(t):mt(t)&&!L(t)&&!Hh(t)?String(t):t,Qo=(e,t="")=>{var n;return hn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let oe;class Yh{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=oe,!t&&oe&&(this.index=(oe.scopes||(oe.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=oe;try{return oe=this,t()}finally{oe=n}}}on(){oe=this}off(){oe=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Xh(e){return new Yh(e)}function um(e,t=oe){t&&t.active&&t.effects.push(e)}function $h(){return oe}function hm(e){oe&&oe.cleanups.push(e)}let Fn;class ul{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,um(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Kn();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(fm(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Wn()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=sn,n=Fn;try{return sn=!0,Fn=this,this._runnings++,Qc(this),this.fn()}finally{Hc(this),this._runnings--,Fn=n,sn=t}}stop(){var t;this.active&&(Qc(this),Hc(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function fm(e){return e.value}function Qc(e){e._trackId++,e._depsLength=0}function Hc(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Zh(e.deps[t],e);e.deps.length=e._depsLength}}function Zh(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let sn=!0,ya=0;const tf=[];function Kn(){tf.push(sn),sn=!1}function Wn(){const e=tf.pop();sn=e===void 0?!0:e}function hl(){ya++}function fl(){for(ya--;!ya&&_a.length;)_a.shift()()}function ef(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&Zh(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const _a=[];function nf(e,t,n){hl();for(const r of e.keys()){let s;r._dirtyLevel<t&&(s??(s=e.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=t),r._shouldSchedule&&(s??(s=e.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&_a.push(r.scheduler)))}fl()}const rf=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},Ii=new WeakMap,Ln=Symbol(""),Aa=Symbol("");function re(e,t,n){if(sn&&Fn){let r=Ii.get(e);r||Ii.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=rf(()=>r.delete(n))),ef(Fn,s)}}function Be(e,t,n,r,s,i){const o=Ii.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&L(e)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!hn(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":L(e)?ll(n)&&a.push(o.get("length")):(a.push(o.get(Ln)),lr(e)&&a.push(o.get(Aa)));break;case"delete":L(e)||(a.push(o.get(Ln)),lr(e)&&a.push(o.get(Aa)));break;case"set":lr(e)&&a.push(o.get(Ln));break}hl();for(const l of a)l&&nf(l,4);fl()}function dm(e,t){var n;return(n=Ii.get(e))==null?void 0:n.get(t)}const pm=il("__proto__,__v_isRef,__isVue"),sf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(hn)),Gc=gm();function gm(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=et(this);for(let i=0,o=this.length;i<o;i++)re(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(et)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Kn(),hl();const r=et(this)[t].apply(this,n);return fl(),Wn(),r}}),e}function mm(e){const t=et(this);return re(t,"has",e),t.hasOwnProperty(e)}class of{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Pm:uf:i?cf:lf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=L(t);if(!s){if(o&&Z(Gc,n))return Reflect.get(Gc,n,r);if(n==="hasOwnProperty")return mm}const a=Reflect.get(t,n,r);return(hn(n)?sf.has(n):pm(n))||(s||re(t,"get",n),i)?a:Rt(a)?o&&ll(n)?a:a.value:mt(a)?s?hf(a):Xi(a):a}}class af extends of{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const l=gr(i);if(!wi(r)&&!gr(r)&&(i=et(i),r=et(r)),!L(t)&&Rt(i)&&!Rt(r))return l?!1:(i.value=r,!0)}const o=L(t)&&ll(n)?Number(n)<t.length:Z(t,n),a=Reflect.set(t,n,r,s);return t===et(s)&&(o?fn(r,i)&&Be(t,"set",n,r):Be(t,"add",n,r)),a}deleteProperty(t,n){const r=Z(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Be(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!hn(n)||!sf.has(n))&&re(t,"has",n),r}ownKeys(t){return re(t,"iterate",L(t)?"length":Ln),Reflect.ownKeys(t)}}class ym extends of{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const _m=new af,Am=new ym,Em=new af(!0),dl=e=>e,Yi=e=>Reflect.getPrototypeOf(e);function Js(e,t,n=!1,r=!1){e=e.__v_raw;const s=et(e),i=et(t);n||(fn(t,i)&&re(s,"get",t),re(s,"get",i));const{has:o}=Yi(s),a=r?dl:n?ml:ls;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function Ys(e,t=!1){const n=this.__v_raw,r=et(n),s=et(e);return t||(fn(e,s)&&re(r,"has",e),re(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function Xs(e,t=!1){return e=e.__v_raw,!t&&re(et(e),"iterate",Ln),Reflect.get(e,"size",e)}function Kc(e){e=et(e);const t=et(this);return Yi(t).has.call(t,e)||(t.add(e),Be(t,"add",e,e)),this}function Wc(e,t){t=et(t);const n=et(this),{has:r,get:s}=Yi(n);let i=r.call(n,e);i||(e=et(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?fn(t,o)&&Be(n,"set",e,t):Be(n,"add",e,t),this}function Jc(e){const t=et(this),{has:n,get:r}=Yi(t);let s=n.call(t,e);s||(e=et(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&Be(t,"delete",e,void 0),i}function Yc(){const e=et(this),t=e.size!==0,n=e.clear();return t&&Be(e,"clear",void 0,void 0),n}function $s(e,t){return function(r,s){const i=this,o=i.__v_raw,a=et(o),l=t?dl:e?ml:ls;return!e&&re(a,"iterate",Ln),o.forEach((c,u)=>r.call(s,l(c),l(u),i))}}function Zs(e,t,n){return function(...r){const s=this.__v_raw,i=et(s),o=lr(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...r),u=n?dl:t?ml:ls;return!t&&re(i,"iterate",l?Aa:Ln),{next(){const{value:h,done:p}=c.next();return p?{value:h,done:p}:{value:a?[u(h[0]),u(h[1])]:u(h),done:p}},[Symbol.iterator](){return this}}}}function Ye(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function vm(){const e={get(i){return Js(this,i)},get size(){return Xs(this)},has:Ys,add:Kc,set:Wc,delete:Jc,clear:Yc,forEach:$s(!1,!1)},t={get(i){return Js(this,i,!1,!0)},get size(){return Xs(this)},has:Ys,add:Kc,set:Wc,delete:Jc,clear:Yc,forEach:$s(!1,!0)},n={get(i){return Js(this,i,!0)},get size(){return Xs(this,!0)},has(i){return Ys.call(this,i,!0)},add:Ye("add"),set:Ye("set"),delete:Ye("delete"),clear:Ye("clear"),forEach:$s(!0,!1)},r={get(i){return Js(this,i,!0,!0)},get size(){return Xs(this,!0)},has(i){return Ys.call(this,i,!0)},add:Ye("add"),set:Ye("set"),delete:Ye("delete"),clear:Ye("clear"),forEach:$s(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=Zs(i,!1,!1),n[i]=Zs(i,!0,!1),t[i]=Zs(i,!1,!0),r[i]=Zs(i,!0,!0)}),[e,n,t,r]}const[Im,wm,Tm,Sm]=vm();function pl(e,t){const n=t?e?Sm:Tm:e?wm:Im;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Z(n,s)&&s in r?n:r,s,i)}const bm={get:pl(!1,!1)},Rm={get:pl(!1,!0)},Cm={get:pl(!0,!1)},lf=new WeakMap,cf=new WeakMap,uf=new WeakMap,Pm=new WeakMap;function xm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Vm(e){return e.__v_skip||!Object.isExtensible(e)?0:xm(tm(e))}function Xi(e){return gr(e)?e:gl(e,!1,_m,bm,lf)}function Dm(e){return gl(e,!1,Em,Rm,cf)}function hf(e){return gl(e,!0,Am,Cm,uf)}function gl(e,t,n,r,s){if(!mt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=Vm(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function on(e){return gr(e)?on(e.__v_raw):!!(e&&e.__v_isReactive)}function gr(e){return!!(e&&e.__v_isReadonly)}function wi(e){return!!(e&&e.__v_isShallow)}function ff(e){return on(e)||gr(e)}function et(e){const t=e&&e.__v_raw;return t?et(t):e}function $i(e){return Object.isExtensible(e)&&vi(e,"__v_skip",!0),e}const ls=e=>mt(e)?Xi(e):e,ml=e=>mt(e)?hf(e):e;class df{constructor(t,n,r,s){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ul(()=>t(this._value),()=>di(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=et(this);return(!t._cacheable||t.effect.dirty)&&fn(t._value,t._value=t.effect.run())&&di(t,4),pf(t),t.effect._dirtyLevel>=2&&di(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function km(e,t,n=!1){let r,s;const i=G(e);return i?(r=e,s=he):(r=e.get,s=e.set),new df(r,s,i||!s,n)}function pf(e){var t;sn&&Fn&&(e=et(e),ef(Fn,(t=e.dep)!=null?t:e.dep=rf(()=>e.dep=void 0,e instanceof df?e:void 0)))}function di(e,t=4,n){e=et(e);const r=e.dep;r&&nf(r,t)}function Rt(e){return!!(e&&e.__v_isRef===!0)}function mr(e){return Nm(e,!1)}function Nm(e,t){return Rt(e)?e:new Om(e,t)}class Om{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:et(t),this._value=n?t:ls(t)}get value(){return pf(this),this._value}set value(t){const n=this.__v_isShallow||wi(t)||gr(t);t=n?t:et(t),fn(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:ls(t),di(this,4))}}function N(e){return Rt(e)?e.value:e}const Mm={get:(e,t,n)=>N(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Rt(s)&&!Rt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function gf(e){return on(e)?e:new Proxy(e,Mm)}function Fm(e){const t=L(e)?new Array(e.length):{};for(const n in e)t[n]=Um(e,n);return t}class Lm{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return dm(et(this._object),this._key)}}function Um(e,t,n){const r=e[t];return Rt(r)?r:new Lm(e,t,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function an(e,t,n,r){try{return r?e(...r):e()}catch(s){Zi(s,t,n)}}function ye(e,t,n,r){if(G(e)){const i=an(e,t,n,r);return i&&qh(i)&&i.catch(o=>{Zi(o,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(ye(e[i],t,n,r));return s}function Zi(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}i=i.parent}const l=t.appContext.config.errorHandler;if(l){an(l,null,10,[e,o,a]);return}}Bm(e,n,s,r)}function Bm(e,t,n,r=!0){console.error(e)}let cs=!1,Ea=!1;const Ht=[];let Re=0;const cr=[];let $e=null,Pn=0;const mf=Promise.resolve();let yl=null;function _l(e){const t=yl||mf;return e?t.then(this?e.bind(this):e):t}function jm(e){let t=Re+1,n=Ht.length;for(;t<n;){const r=t+n>>>1,s=Ht[r],i=us(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function Al(e){(!Ht.length||!Ht.includes(e,cs&&e.allowRecurse?Re+1:Re))&&(e.id==null?Ht.push(e):Ht.splice(jm(e.id),0,e),yf())}function yf(){!cs&&!Ea&&(Ea=!0,yl=mf.then(Af))}function zm(e){const t=Ht.indexOf(e);t>Re&&Ht.splice(t,1)}function qm(e){L(e)?cr.push(...e):(!$e||!$e.includes(e,e.allowRecurse?Pn+1:Pn))&&cr.push(e),yf()}function Xc(e,t,n=cs?Re+1:0){for(;n<Ht.length;n++){const r=Ht[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;Ht.splice(n,1),n--,r()}}}function _f(e){if(cr.length){const t=[...new Set(cr)].sort((n,r)=>us(n)-us(r));if(cr.length=0,$e){$e.push(...t);return}for($e=t,Pn=0;Pn<$e.length;Pn++)$e[Pn]();$e=null,Pn=0}}const us=e=>e.id==null?1/0:e.id,Qm=(e,t)=>{const n=us(e)-us(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Af(e){Ea=!1,cs=!0,Ht.sort(Qm);try{for(Re=0;Re<Ht.length;Re++){const t=Ht[Re];t&&t.active!==!1&&an(t,null,14)}}finally{Re=0,Ht.length=0,_f(),cs=!1,yl=null,(Ht.length||cr.length)&&Af()}}function Hm(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||dt;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:p}=r[u]||dt;p&&(s=n.map(g=>Pt(g)?g.trim():g)),h&&(s=n.map(as))}let a,l=r[a=qo(t)]||r[a=qo(pr(t))];!l&&i&&(l=r[a=qo(Cr(t))]),l&&ye(l,e,6,s);const c=r[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,ye(c,e,6,s)}}function Ef(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!G(e)){const l=c=>{const u=Ef(c,t,!0);u&&(a=!0,jt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(mt(e)&&r.set(e,null),null):(L(i)?i.forEach(l=>o[l]=null):jt(o,i),mt(e)&&r.set(e,o),o)}function to(e,t){return!e||!Wi(t)?!1:(t=t.slice(2).replace(/Once$/,""),Z(e,t[0].toLowerCase()+t.slice(1))||Z(e,Cr(t))||Z(e,t))}let kt=null,vf=null;function Ti(e){const t=kt;return kt=e,vf=e&&e.type.__scopeId||null,t}function Ps(e,t=kt,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&au(-1);const i=Ti(t);let o;try{o=e(...s)}finally{Ti(i),r._d&&au(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Ho(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:p,setupState:g,ctx:D,inheritAttrs:C}=e;let V,q;const st=Ti(e);try{if(n.shapeFlag&4){const it=s||r,at=it;V=be(u.call(at,it,h,i,g,p,D)),q=l}else{const it=t;V=be(it.length>1?it(i,{attrs:l,slots:a,emit:c}):it(i,null)),q=t.props?l:Gm(l)}}catch(it){$r.length=0,Zi(it,e,1),V=ut(dn)}let H=V;if(q&&C!==!1){const it=Object.keys(q),{shapeFlag:at}=H;it.length&&at&7&&(o&&it.some(ol)&&(q=Km(q,o)),H=yr(H,q))}return n.dirs&&(H=yr(H),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&(H.transition=n.transition),V=H,Ti(st),V}const Gm=e=>{let t;for(const n in e)(n==="class"||n==="style"||Wi(n))&&((t||(t={}))[n]=e[n]);return t},Km=(e,t)=>{const n={};for(const r in e)(!ol(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Wm(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:l}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?$c(r,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const p=u[h];if(o[p]!==r[p]&&!to(c,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?$c(r,o,c):!0:!!o;return!1}function $c(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!to(n,i))return!0}return!1}function Jm({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Ym=Symbol.for("v-ndc"),Xm=e=>e.__isSuspense;function $m(e,t){t&&t.pendingBranch?L(e)?t.effects.push(...e):t.effects.push(e):qm(e)}const Zm=Symbol.for("v-scx"),ty=()=>Xr(Zm),ti={};function pi(e,t,n){return If(e,t,n)}function If(e,t,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=dt){if(t&&i){const K=t;t=(...wt)=>{K(...wt),at()}}const l=Gt,c=K=>r===!0?K:Vn(K,r===!1?1:void 0);let u,h=!1,p=!1;if(Rt(e)?(u=()=>e.value,h=wi(e)):on(e)?(u=()=>c(e),h=!0):L(e)?(p=!0,h=e.some(K=>on(K)||wi(K)),u=()=>e.map(K=>{if(Rt(K))return K.value;if(on(K))return c(K);if(G(K))return an(K,l,2)})):G(e)?t?u=()=>an(e,l,2):u=()=>(g&&g(),ye(e,l,3,[D])):u=he,t&&r){const K=u;u=()=>Vn(K())}let g,D=K=>{g=H.onStop=()=>{an(K,l,4),g=H.onStop=void 0}},C;if(io)if(D=he,t?n&&ye(t,l,3,[u(),p?[]:void 0,D]):u(),s==="sync"){const K=ty();C=K.__watcherHandles||(K.__watcherHandles=[])}else return he;let V=p?new Array(e.length).fill(ti):ti;const q=()=>{if(!(!H.active||!H.dirty))if(t){const K=H.run();(r||h||(p?K.some((wt,Y)=>fn(wt,V[Y])):fn(K,V)))&&(g&&g(),ye(t,l,3,[K,V===ti?void 0:p&&V[0]===ti?[]:V,D]),V=K)}else H.run()};q.allowRecurse=!!t;let st;s==="sync"?st=q:s==="post"?st=()=>Zt(q,l&&l.suspense):(q.pre=!0,l&&(q.id=l.uid),st=()=>Al(q));const H=new ul(u,he,st),it=$h(),at=()=>{H.stop(),it&&al(it.effects,H)};return t?n?q():V=H.run():s==="post"?Zt(H.run.bind(H),l&&l.suspense):H.run(),C&&C.push(at),at}function ey(e,t,n){const r=this.proxy,s=Pt(e)?e.includes(".")?wf(r,e):()=>r[e]:e.bind(r,r);let i;G(t)?i=t:(i=t.handler,n=t);const o=xs(this),a=If(s,i.bind(r),n);return o(),a}function wf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Vn(e,t,n=0,r){if(!mt(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(r=r||new Set,r.has(e))return e;if(r.add(e),Rt(e))Vn(e.value,t,n,r);else if(L(e))for(let s=0;s<e.length;s++)Vn(e[s],t,n,r);else if(Rr(e)||lr(e))e.forEach(s=>{Vn(s,t,n,r)});else if(Hh(e))for(const s in e)Vn(e[s],t,n,r);return e}function ny(e,t){if(kt===null)return e;const n=oo(kt)||kt.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,o,a,l=dt]=t[s];i&&(G(i)&&(i={mounted:i,updated:i}),i.deep&&Vn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function bn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Kn(),ye(l,n,8,[e.el,a,e,t]),Wn())}}/*! #__NO_SIDE_EFFECTS__ */function Yt(e,t){return G(e)?jt({name:e.name},t,{setup:e}):e}const Jr=e=>!!e.type.__asyncLoader,Tf=e=>e.type.__isKeepAlive;function ry(e,t){Sf(e,"a",t)}function sy(e,t){Sf(e,"da",t)}function Sf(e,t,n=Gt){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(eo(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Tf(s.parent.vnode)&&iy(r,t,n,s),s=s.parent}}function iy(e,t,n,r){const s=eo(t,e,r,!0);El(()=>{al(r[t],s)},n)}function eo(e,t,n=Gt,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Kn();const a=xs(n),l=ye(t,n,e,o);return a(),Wn(),l});return r?s.unshift(i):s.push(i),i}}const We=e=>(t,n=Gt)=>(!io||e==="sp")&&eo(e,(...r)=>t(...r),n),oy=We("bm"),no=We("m"),ay=We("bu"),ly=We("u"),cy=We("bum"),El=We("um"),uy=We("sp"),hy=We("rtg"),fy=We("rtc");function dy(e,t=Gt){eo("ec",e,t)}function vl(e,t,n,r){let s;const i=n&&n[r];if(L(e)||Pt(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i&&i[o])}else if(mt(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,i&&i[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=t(e[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function py(e,t,n={},r,s){if(kt.isCE||kt.parent&&Jr(kt.parent)&&kt.parent.isCE)return t!=="default"&&(n.name=t),ut("slot",n,r&&r());let i=e[t];i&&i._c&&(i._d=!1),$();const o=i&&bf(i(n)),a=Pe(te,{key:n.key||o&&o.key||`_${t}`},o||(r?r():[]),o&&e._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function bf(e){return e.some(t=>Ff(t)?!(t.type===dn||t.type===te&&!bf(t.children)):!0)?e:null}const va=e=>e?Uf(e)?oo(e)||e.proxy:va(e.parent):null,Yr=jt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>va(e.parent),$root:e=>va(e.root),$emit:e=>e.emit,$options:e=>Il(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Al(e.update)}),$nextTick:e=>e.n||(e.n=_l.bind(e.proxy)),$watch:e=>ey.bind(e)}),Go=(e,t)=>e!==dt&&!e.__isScriptSetup&&Z(e,t),gy={get({_:e},t){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Go(r,t))return o[t]=1,r[t];if(s!==dt&&Z(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&Z(c,t))return o[t]=3,i[t];if(n!==dt&&Z(n,t))return o[t]=4,n[t];Ia&&(o[t]=0)}}const u=Yr[t];let h,p;if(u)return t==="$attrs"&&re(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==dt&&Z(n,t))return o[t]=4,n[t];if(p=l.config.globalProperties,Z(p,t))return p[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Go(s,t)?(s[t]=n,!0):r!==dt&&Z(r,t)?(r[t]=n,!0):Z(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==dt&&Z(e,o)||Go(t,o)||(a=i[0])&&Z(a,o)||Z(r,o)||Z(Yr,o)||Z(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Z(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Zc(e){return L(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Ia=!0;function my(e){const t=Il(e),n=e.proxy,r=e.ctx;Ia=!1,t.beforeCreate&&tu(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:p,beforeUpdate:g,updated:D,activated:C,deactivated:V,beforeDestroy:q,beforeUnmount:st,destroyed:H,unmounted:it,render:at,renderTracked:K,renderTriggered:wt,errorCaptured:Y,serverPrefetch:nt,expose:It,inheritAttrs:se,components:Ie,directives:$n,filters:Fr}=t;if(c&&yy(c,r,null),o)for(const At in o){const ht=o[At];G(ht)&&(r[At]=ht.bind(n))}if(s){const At=s.call(n,n);mt(At)&&(e.data=Xi(At))}if(Ia=!0,i)for(const At in i){const ht=i[At],Tn=G(ht)?ht.bind(n,n):G(ht.get)?ht.get.bind(n,n):he,Ks=!G(ht)&&G(ht.set)?ht.set.bind(n):he,Sn=je({get:Tn,set:Ks});Object.defineProperty(r,At,{enumerable:!0,configurable:!0,get:()=>Sn.value,set:we=>Sn.value=we})}if(a)for(const At in a)Rf(a[At],r,n,At);if(l){const At=G(l)?l.call(n):l;Reflect.ownKeys(At).forEach(ht=>{wy(ht,At[ht])})}u&&tu(u,e,"c");function lt(At,ht){L(ht)?ht.forEach(Tn=>At(Tn.bind(n))):ht&&At(ht.bind(n))}if(lt(oy,h),lt(no,p),lt(ay,g),lt(ly,D),lt(ry,C),lt(sy,V),lt(dy,Y),lt(fy,K),lt(hy,wt),lt(cy,st),lt(El,it),lt(uy,nt),L(It))if(It.length){const At=e.exposed||(e.exposed={});It.forEach(ht=>{Object.defineProperty(At,ht,{get:()=>n[ht],set:Tn=>n[ht]=Tn})})}else e.exposed||(e.exposed={});at&&e.render===he&&(e.render=at),se!=null&&(e.inheritAttrs=se),Ie&&(e.components=Ie),$n&&(e.directives=$n)}function yy(e,t,n=he){L(e)&&(e=wa(e));for(const r in e){const s=e[r];let i;mt(s)?"default"in s?i=Xr(s.from||r,s.default,!0):i=Xr(s.from||r):i=Xr(s),Rt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function tu(e,t,n){ye(L(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Rf(e,t,n,r){const s=r.includes(".")?wf(n,r):()=>n[r];if(Pt(e)){const i=t[e];G(i)&&pi(s,i)}else if(G(e))pi(s,e.bind(n));else if(mt(e))if(L(e))e.forEach(i=>Rf(i,t,n,r));else{const i=G(e.handler)?e.handler.bind(n):t[e.handler];G(i)&&pi(s,i,e)}}function Il(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!s.length&&!n&&!r?l=t:(l={},s.length&&s.forEach(c=>Si(l,c,o,!0)),Si(l,t,o)),mt(t)&&i.set(t,l),l}function Si(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Si(e,i,n,!0),s&&s.forEach(o=>Si(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=_y[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const _y={data:eu,props:nu,emits:nu,methods:qr,computed:qr,beforeCreate:Xt,created:Xt,beforeMount:Xt,mounted:Xt,beforeUpdate:Xt,updated:Xt,beforeDestroy:Xt,beforeUnmount:Xt,destroyed:Xt,unmounted:Xt,activated:Xt,deactivated:Xt,errorCaptured:Xt,serverPrefetch:Xt,components:qr,directives:qr,watch:Ey,provide:eu,inject:Ay};function eu(e,t){return t?e?function(){return jt(G(e)?e.call(this,this):e,G(t)?t.call(this,this):t)}:t:e}function Ay(e,t){return qr(wa(e),wa(t))}function wa(e){if(L(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Xt(e,t){return e?[...new Set([].concat(e,t))]:t}function qr(e,t){return e?jt(Object.create(null),e,t):t}function nu(e,t){return e?L(e)&&L(t)?[...new Set([...e,...t])]:jt(Object.create(null),Zc(e),Zc(t??{})):t}function Ey(e,t){if(!e)return t;if(!t)return e;const n=jt(Object.create(null),e);for(const r in t)n[r]=Xt(e[r],t[r]);return n}function Cf(){return{app:null,config:{isNativeTag:$g,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vy=0;function Iy(e,t){return function(r,s=null){G(r)||(r=jt({},r)),s!=null&&!mt(s)&&(s=null);const i=Cf(),o=new WeakSet;let a=!1;const l=i.app={_uid:vy++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Ky,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&G(c.install)?(o.add(c),c.install(l,...u)):G(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,h){if(!a){const p=ut(r,s);return p.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&t?t(p,c):e(p,c,h),a=!0,l._container=c,c.__vue_app__=l,oo(p.component)||p.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){const u=ur;ur=l;try{return c()}finally{ur=u}}};return l}}let ur=null;function wy(e,t){if(Gt){let n=Gt.provides;const r=Gt.parent&&Gt.parent.provides;r===n&&(n=Gt.provides=Object.create(r)),n[e]=t}}function Xr(e,t,n=!1){const r=Gt||kt;if(r||ur){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:ur._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&G(t)?t.call(r&&r.proxy):t}}function Ty(){return!!(Gt||kt||ur)}function Sy(e,t,n,r=!1){const s={},i={};vi(i,so,1),e.propsDefaults=Object.create(null),Pf(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:Dm(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function by(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=et(s),[l]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let p=u[h];if(to(e.emitsOptions,p))continue;const g=t[p];if(l)if(Z(i,p))g!==i[p]&&(i[p]=g,c=!0);else{const D=pr(p);s[D]=Ta(l,a,D,g,e,!1)}else g!==i[p]&&(i[p]=g,c=!0)}}}else{Pf(e,t,s,i)&&(c=!0);let u;for(const h in a)(!t||!Z(t,h)&&((u=Cr(h))===h||!Z(t,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=Ta(l,a,h,void 0,e,!0)):delete s[h]);if(i!==a)for(const h in i)(!t||!Z(t,h))&&(delete i[h],c=!0)}c&&Be(e,"set","$attrs")}function Pf(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Wr(l))continue;const c=t[l];let u;s&&Z(s,u=pr(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:to(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=et(n),c=a||dt;for(let u=0;u<i.length;u++){const h=i[u];n[h]=Ta(s,l,h,c[h],e,!Z(c,h))}}return o}function Ta(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=Z(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&G(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=xs(s);r=c[n]=l.call(null,t),u()}}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Cr(n))&&(r=!0))}return r}function xf(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let l=!1;if(!G(e)){const u=h=>{l=!0;const[p,g]=xf(h,t,!0);jt(o,p),g&&a.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!l)return mt(e)&&r.set(e,ar),ar;if(L(i))for(let u=0;u<i.length;u++){const h=pr(i[u]);ru(h)&&(o[h]=dt)}else if(i)for(const u in i){const h=pr(u);if(ru(h)){const p=i[u],g=o[h]=L(p)||G(p)?{type:p}:jt({},p);if(g){const D=ou(Boolean,g.type),C=ou(String,g.type);g[0]=D>-1,g[1]=C<0||D<C,(D>-1||Z(g,"default"))&&a.push(h)}}}const c=[o,a];return mt(e)&&r.set(e,c),c}function ru(e){return e[0]!=="$"&&!Wr(e)}function su(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function iu(e,t){return su(e)===su(t)}function ou(e,t){return L(t)?t.findIndex(n=>iu(n,e)):G(t)&&iu(t,e)?0:-1}const Vf=e=>e[0]==="_"||e==="$stable",wl=e=>L(e)?e.map(be):[be(e)],Ry=(e,t,n)=>{if(t._n)return t;const r=Ps((...s)=>wl(t(...s)),n);return r._c=!1,r},Df=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Vf(s))continue;const i=e[s];if(G(i))t[s]=Ry(s,i,r);else if(i!=null){const o=wl(i);t[s]=()=>o}}},kf=(e,t)=>{const n=wl(t);e.slots.default=()=>n},Cy=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=et(t),vi(t,"_",n)):Df(t,e.slots={})}else e.slots={},t&&kf(e,t);vi(e.slots,so,1)},Py=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=dt;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(jt(s,t),!n&&a===1&&delete s._):(i=!t.$stable,Df(t,s)),o=t}else t&&(kf(e,t),o={default:1});if(i)for(const a in s)!Vf(a)&&o[a]==null&&delete s[a]};function Sa(e,t,n,r,s=!1){if(L(e)){e.forEach((p,g)=>Sa(p,t&&(L(t)?t[g]:t),n,r,s));return}if(Jr(r)&&!s)return;const i=r.shapeFlag&4?oo(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=e,c=t&&t.r,u=a.refs===dt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(Pt(c)?(u[c]=null,Z(h,c)&&(h[c]=null)):Rt(c)&&(c.value=null)),G(l))an(l,a,12,[o,u]);else{const p=Pt(l),g=Rt(l);if(p||g){const D=()=>{if(e.f){const C=p?Z(h,l)?h[l]:u[l]:l.value;s?L(C)&&al(C,i):L(C)?C.includes(i)||C.push(i):p?(u[l]=[i],Z(h,l)&&(h[l]=u[l])):(l.value=[i],e.k&&(u[e.k]=l.value))}else p?(u[l]=o,Z(h,l)&&(h[l]=o)):g&&(l.value=o,e.k&&(u[e.k]=o))};o?(D.id=-1,Zt(D,n)):D()}}}const Zt=$m;function xy(e){return Vy(e)}function Vy(e,t){const n=Kh();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:p,setScopeId:g=he,insertStaticContent:D}=e,C=(f,d,m,A=null,E=null,w=null,R=void 0,I=null,T=!!d.dynamicChildren)=>{if(f===d)return;f&&!Ur(f,d)&&(A=Ws(f),we(f,E,w,!0),f=null),d.patchFlag===-2&&(T=!1,d.dynamicChildren=null);const{type:v,ref:k,shapeFlag:F}=d;switch(v){case ro:V(f,d,m,A);break;case dn:q(f,d,m,A);break;case Wo:f==null&&st(d,m,A,R);break;case te:Ie(f,d,m,A,E,w,R,I,T);break;default:F&1?at(f,d,m,A,E,w,R,I,T):F&6?$n(f,d,m,A,E,w,R,I,T):(F&64||F&128)&&v.process(f,d,m,A,E,w,R,I,T,Zn)}k!=null&&E&&Sa(k,f&&f.ref,w,d||f,!d)},V=(f,d,m,A)=>{if(f==null)r(d.el=a(d.children),m,A);else{const E=d.el=f.el;d.children!==f.children&&c(E,d.children)}},q=(f,d,m,A)=>{f==null?r(d.el=l(d.children||""),m,A):d.el=f.el},st=(f,d,m,A)=>{[f.el,f.anchor]=D(f.children,d,m,A,f.el,f.anchor)},H=({el:f,anchor:d},m,A)=>{let E;for(;f&&f!==d;)E=p(f),r(f,m,A),f=E;r(d,m,A)},it=({el:f,anchor:d})=>{let m;for(;f&&f!==d;)m=p(f),s(f),f=m;s(d)},at=(f,d,m,A,E,w,R,I,T)=>{d.type==="svg"?R="svg":d.type==="math"&&(R="mathml"),f==null?K(d,m,A,E,w,R,I,T):nt(f,d,E,w,R,I,T)},K=(f,d,m,A,E,w,R,I)=>{let T,v;const{props:k,shapeFlag:F,transition:O,dirs:j}=f;if(T=f.el=o(f.type,w,k&&k.is,k),F&8?u(T,f.children):F&16&&Y(f.children,T,null,A,E,Ko(f,w),R,I),j&&bn(f,null,A,"created"),wt(T,f,f.scopeId,R,A),k){for(const ct in k)ct!=="value"&&!Wr(ct)&&i(T,ct,null,k[ct],w,f.children,A,E,Fe);"value"in k&&i(T,"value",null,k.value,w),(v=k.onVnodeBeforeMount)&&Se(v,A,f)}j&&bn(f,null,A,"beforeMount");const W=Dy(E,O);W&&O.beforeEnter(T),r(T,d,m),((v=k&&k.onVnodeMounted)||W||j)&&Zt(()=>{v&&Se(v,A,f),W&&O.enter(T),j&&bn(f,null,A,"mounted")},E)},wt=(f,d,m,A,E)=>{if(m&&g(f,m),A)for(let w=0;w<A.length;w++)g(f,A[w]);if(E){let w=E.subTree;if(d===w){const R=E.vnode;wt(f,R,R.scopeId,R.slotScopeIds,E.parent)}}},Y=(f,d,m,A,E,w,R,I,T=0)=>{for(let v=T;v<f.length;v++){const k=f[v]=I?Ze(f[v]):be(f[v]);C(null,k,d,m,A,E,w,R,I)}},nt=(f,d,m,A,E,w,R)=>{const I=d.el=f.el;let{patchFlag:T,dynamicChildren:v,dirs:k}=d;T|=f.patchFlag&16;const F=f.props||dt,O=d.props||dt;let j;if(m&&Rn(m,!1),(j=O.onVnodeBeforeUpdate)&&Se(j,m,d,f),k&&bn(d,f,m,"beforeUpdate"),m&&Rn(m,!0),v?It(f.dynamicChildren,v,I,m,A,Ko(d,E),w):R||ht(f,d,I,null,m,A,Ko(d,E),w,!1),T>0){if(T&16)se(I,d,F,O,m,A,E);else if(T&2&&F.class!==O.class&&i(I,"class",null,O.class,E),T&4&&i(I,"style",F.style,O.style,E),T&8){const W=d.dynamicProps;for(let ct=0;ct<W.length;ct++){const yt=W[ct],xt=F[yt],pe=O[yt];(pe!==xt||yt==="value")&&i(I,yt,xt,pe,E,f.children,m,A,Fe)}}T&1&&f.children!==d.children&&u(I,d.children)}else!R&&v==null&&se(I,d,F,O,m,A,E);((j=O.onVnodeUpdated)||k)&&Zt(()=>{j&&Se(j,m,d,f),k&&bn(d,f,m,"updated")},A)},It=(f,d,m,A,E,w,R)=>{for(let I=0;I<d.length;I++){const T=f[I],v=d[I],k=T.el&&(T.type===te||!Ur(T,v)||T.shapeFlag&70)?h(T.el):m;C(T,v,k,null,A,E,w,R,!0)}},se=(f,d,m,A,E,w,R)=>{if(m!==A){if(m!==dt)for(const I in m)!Wr(I)&&!(I in A)&&i(f,I,m[I],null,R,d.children,E,w,Fe);for(const I in A){if(Wr(I))continue;const T=A[I],v=m[I];T!==v&&I!=="value"&&i(f,I,v,T,R,d.children,E,w,Fe)}"value"in A&&i(f,"value",m.value,A.value,R)}},Ie=(f,d,m,A,E,w,R,I,T)=>{const v=d.el=f?f.el:a(""),k=d.anchor=f?f.anchor:a("");let{patchFlag:F,dynamicChildren:O,slotScopeIds:j}=d;j&&(I=I?I.concat(j):j),f==null?(r(v,m,A),r(k,m,A),Y(d.children||[],m,k,E,w,R,I,T)):F>0&&F&64&&O&&f.dynamicChildren?(It(f.dynamicChildren,O,m,E,w,R,I),(d.key!=null||E&&d===E.subTree)&&Nf(f,d,!0)):ht(f,d,m,k,E,w,R,I,T)},$n=(f,d,m,A,E,w,R,I,T)=>{d.slotScopeIds=I,f==null?d.shapeFlag&512?E.ctx.activate(d,m,A,R,T):Fr(d,m,A,E,w,R,T):Je(f,d,T)},Fr=(f,d,m,A,E,w,R)=>{const I=f.component=jy(f,A,E);if(Tf(f)&&(I.ctx.renderer=Zn),zy(I),I.asyncDep){if(E&&E.registerDep(I,lt),!f.el){const T=I.subTree=ut(dn);q(null,T,d,m)}}else lt(I,f,d,m,E,w,R)},Je=(f,d,m)=>{const A=d.component=f.component;if(Wm(f,d,m))if(A.asyncDep&&!A.asyncResolved){At(A,d,m);return}else A.next=d,zm(A.update),A.effect.dirty=!0,A.update();else d.el=f.el,A.vnode=d},lt=(f,d,m,A,E,w,R)=>{const I=()=>{if(f.isMounted){let{next:k,bu:F,u:O,parent:j,vnode:W}=f;{const tr=Of(f);if(tr){k&&(k.el=W.el,At(f,k,R)),tr.asyncDep.then(()=>{f.isUnmounted||I()});return}}let ct=k,yt;Rn(f,!1),k?(k.el=W.el,At(f,k,R)):k=W,F&&fi(F),(yt=k.props&&k.props.onVnodeBeforeUpdate)&&Se(yt,j,k,W),Rn(f,!0);const xt=Ho(f),pe=f.subTree;f.subTree=xt,C(pe,xt,h(pe.el),Ws(pe),f,E,w),k.el=xt.el,ct===null&&Jm(f,xt.el),O&&Zt(O,E),(yt=k.props&&k.props.onVnodeUpdated)&&Zt(()=>Se(yt,j,k,W),E)}else{let k;const{el:F,props:O}=d,{bm:j,m:W,parent:ct}=f,yt=Jr(d);if(Rn(f,!1),j&&fi(j),!yt&&(k=O&&O.onVnodeBeforeMount)&&Se(k,ct,d),Rn(f,!0),F&&zo){const xt=()=>{f.subTree=Ho(f),zo(F,f.subTree,f,E,null)};yt?d.type.__asyncLoader().then(()=>!f.isUnmounted&&xt()):xt()}else{const xt=f.subTree=Ho(f);C(null,xt,m,A,f,E,w),d.el=xt.el}if(W&&Zt(W,E),!yt&&(k=O&&O.onVnodeMounted)){const xt=d;Zt(()=>Se(k,ct,xt),E)}(d.shapeFlag&256||ct&&Jr(ct.vnode)&&ct.vnode.shapeFlag&256)&&f.a&&Zt(f.a,E),f.isMounted=!0,d=m=A=null}},T=f.effect=new ul(I,he,()=>Al(v),f.scope),v=f.update=()=>{T.dirty&&T.run()};v.id=f.uid,Rn(f,!0),v()},At=(f,d,m)=>{d.component=f;const A=f.vnode.props;f.vnode=d,f.next=null,by(f,d.props,A,m),Py(f,d.children,m),Kn(),Xc(f),Wn()},ht=(f,d,m,A,E,w,R,I,T=!1)=>{const v=f&&f.children,k=f?f.shapeFlag:0,F=d.children,{patchFlag:O,shapeFlag:j}=d;if(O>0){if(O&128){Ks(v,F,m,A,E,w,R,I,T);return}else if(O&256){Tn(v,F,m,A,E,w,R,I,T);return}}j&8?(k&16&&Fe(v,E,w),F!==v&&u(m,F)):k&16?j&16?Ks(v,F,m,A,E,w,R,I,T):Fe(v,E,w,!0):(k&8&&u(m,""),j&16&&Y(F,m,A,E,w,R,I,T))},Tn=(f,d,m,A,E,w,R,I,T)=>{f=f||ar,d=d||ar;const v=f.length,k=d.length,F=Math.min(v,k);let O;for(O=0;O<F;O++){const j=d[O]=T?Ze(d[O]):be(d[O]);C(f[O],j,m,null,E,w,R,I,T)}v>k?Fe(f,E,w,!0,!1,F):Y(d,m,A,E,w,R,I,T,F)},Ks=(f,d,m,A,E,w,R,I,T)=>{let v=0;const k=d.length;let F=f.length-1,O=k-1;for(;v<=F&&v<=O;){const j=f[v],W=d[v]=T?Ze(d[v]):be(d[v]);if(Ur(j,W))C(j,W,m,null,E,w,R,I,T);else break;v++}for(;v<=F&&v<=O;){const j=f[F],W=d[O]=T?Ze(d[O]):be(d[O]);if(Ur(j,W))C(j,W,m,null,E,w,R,I,T);else break;F--,O--}if(v>F){if(v<=O){const j=O+1,W=j<k?d[j].el:A;for(;v<=O;)C(null,d[v]=T?Ze(d[v]):be(d[v]),m,W,E,w,R,I,T),v++}}else if(v>O)for(;v<=F;)we(f[v],E,w,!0),v++;else{const j=v,W=v,ct=new Map;for(v=W;v<=O;v++){const ie=d[v]=T?Ze(d[v]):be(d[v]);ie.key!=null&&ct.set(ie.key,v)}let yt,xt=0;const pe=O-W+1;let tr=!1,Uc=0;const Lr=new Array(pe);for(v=0;v<pe;v++)Lr[v]=0;for(v=j;v<=F;v++){const ie=f[v];if(xt>=pe){we(ie,E,w,!0);continue}let Te;if(ie.key!=null)Te=ct.get(ie.key);else for(yt=W;yt<=O;yt++)if(Lr[yt-W]===0&&Ur(ie,d[yt])){Te=yt;break}Te===void 0?we(ie,E,w,!0):(Lr[Te-W]=v+1,Te>=Uc?Uc=Te:tr=!0,C(ie,d[Te],m,null,E,w,R,I,T),xt++)}const Bc=tr?ky(Lr):ar;for(yt=Bc.length-1,v=pe-1;v>=0;v--){const ie=W+v,Te=d[ie],jc=ie+1<k?d[ie+1].el:A;Lr[v]===0?C(null,Te,m,jc,E,w,R,I,T):tr&&(yt<0||v!==Bc[yt]?Sn(Te,m,jc,2):yt--)}}},Sn=(f,d,m,A,E=null)=>{const{el:w,type:R,transition:I,children:T,shapeFlag:v}=f;if(v&6){Sn(f.component.subTree,d,m,A);return}if(v&128){f.suspense.move(d,m,A);return}if(v&64){R.move(f,d,m,Zn);return}if(R===te){r(w,d,m);for(let F=0;F<T.length;F++)Sn(T[F],d,m,A);r(f.anchor,d,m);return}if(R===Wo){H(f,d,m);return}if(A!==2&&v&1&&I)if(A===0)I.beforeEnter(w),r(w,d,m),Zt(()=>I.enter(w),E);else{const{leave:F,delayLeave:O,afterLeave:j}=I,W=()=>r(w,d,m),ct=()=>{F(w,()=>{W(),j&&j()})};O?O(w,W,ct):ct()}else r(w,d,m)},we=(f,d,m,A=!1,E=!1)=>{const{type:w,props:R,ref:I,children:T,dynamicChildren:v,shapeFlag:k,patchFlag:F,dirs:O}=f;if(I!=null&&Sa(I,null,m,f,!0),k&256){d.ctx.deactivate(f);return}const j=k&1&&O,W=!Jr(f);let ct;if(W&&(ct=R&&R.onVnodeBeforeUnmount)&&Se(ct,d,f),k&6)Xg(f.component,m,A);else{if(k&128){f.suspense.unmount(m,A);return}j&&bn(f,null,d,"beforeUnmount"),k&64?f.type.remove(f,d,m,E,Zn,A):v&&(w!==te||F>0&&F&64)?Fe(v,d,m,!1,!0):(w===te&&F&384||!E&&k&16)&&Fe(T,d,m),A&&Fc(f)}(W&&(ct=R&&R.onVnodeUnmounted)||j)&&Zt(()=>{ct&&Se(ct,d,f),j&&bn(f,null,d,"unmounted")},m)},Fc=f=>{const{type:d,el:m,anchor:A,transition:E}=f;if(d===te){Yg(m,A);return}if(d===Wo){it(f);return}const w=()=>{s(m),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(f.shapeFlag&1&&E&&!E.persisted){const{leave:R,delayLeave:I}=E,T=()=>R(m,w);I?I(f.el,w,T):T()}else w()},Yg=(f,d)=>{let m;for(;f!==d;)m=p(f),s(f),f=m;s(d)},Xg=(f,d,m)=>{const{bum:A,scope:E,update:w,subTree:R,um:I}=f;A&&fi(A),E.stop(),w&&(w.active=!1,we(R,f,d,m)),I&&Zt(I,d),Zt(()=>{f.isUnmounted=!0},d),d&&d.pendingBranch&&!d.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===d.pendingId&&(d.deps--,d.deps===0&&d.resolve())},Fe=(f,d,m,A=!1,E=!1,w=0)=>{for(let R=w;R<f.length;R++)we(f[R],d,m,A,E)},Ws=f=>f.shapeFlag&6?Ws(f.component.subTree):f.shapeFlag&128?f.suspense.next():p(f.anchor||f.el);let Bo=!1;const Lc=(f,d,m)=>{f==null?d._vnode&&we(d._vnode,null,null,!0):C(d._vnode||null,f,d,null,null,null,m),Bo||(Bo=!0,Xc(),_f(),Bo=!1),d._vnode=f},Zn={p:C,um:we,m:Sn,r:Fc,mt:Fr,mc:Y,pc:ht,pbc:It,n:Ws,o:e};let jo,zo;return t&&([jo,zo]=t(Zn)),{render:Lc,hydrate:jo,createApp:Iy(Lc,jo)}}function Ko({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Rn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Dy(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Nf(e,t,n=!1){const r=e.children,s=t.children;if(L(r)&&L(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Ze(s[i]),a.el=o.el),n||Nf(o,a)),a.type===ro&&(a.el=o.el)}}function ky(e){const t=e.slice(),n=[0];let r,s,i,o,a;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(s=n[n.length-1],e[s]<c){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<c?i=a+1:o=a;c<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function Of(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Of(t)}const Ny=e=>e.__isTeleport,te=Symbol.for("v-fgt"),ro=Symbol.for("v-txt"),dn=Symbol.for("v-cmt"),Wo=Symbol.for("v-stc"),$r=[];let ge=null;function $(e=!1){$r.push(ge=e?null:[])}function Oy(){$r.pop(),ge=$r[$r.length-1]||null}let hs=1;function au(e){hs+=e}function Mf(e){return e.dynamicChildren=hs>0?ge||ar:null,Oy(),hs>0&&ge&&ge.push(e),e}function _t(e,t,n,r,s,i){return Mf(P(e,t,n,r,s,i,!0))}function Pe(e,t,n,r,s){return Mf(ut(e,t,n,r,s,!0))}function Ff(e){return e?e.__v_isVNode===!0:!1}function Ur(e,t){return e.type===t.type&&e.key===t.key}const so="__vInternal",Lf=({key:e})=>e??null,gi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Pt(e)||Rt(e)||G(e)?{i:kt,r:e,k:t,f:!!n}:e:null);function P(e,t=null,n=null,r=0,s=null,i=e===te?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Lf(t),ref:t&&gi(t),scopeId:vf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:kt};return a?(Tl(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=Pt(n)?8:16),hs>0&&!o&&ge&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&ge.push(l),l}const ut=My;function My(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Ym)&&(e=dn),Ff(e)){const a=yr(e,t,!0);return n&&Tl(a,n),hs>0&&!i&&ge&&(a.shapeFlag&6?ge[ge.indexOf(e)]=a:ge.push(a)),a.patchFlag|=-2,a}if(Gy(e)&&(e=e.__vccOpts),t){t=Fy(t);let{class:a,style:l}=t;a&&!Pt(a)&&(t.class=Qe(a)),mt(l)&&(ff(l)&&!L(l)&&(l=jt({},l)),t.style=ee(l))}const o=Pt(e)?1:Xm(e)?128:Ny(e)?64:mt(e)?4:G(e)?2:0;return P(e,t,n,r,s,o,i,!0)}function Fy(e){return e?ff(e)||so in e?jt({},e):e:null}function yr(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=e,a=t?Ly(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Lf(a),ref:t&&t.ref?n&&s?L(s)?s.concat(gi(t)):[s,gi(t)]:gi(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==te?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&yr(e.ssContent),ssFallback:e.ssFallback&&yr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function _e(e=" ",t=0){return ut(ro,null,e,t)}function en(e="",t=!1){return t?($(),Pe(dn,null,e)):ut(dn,null,e)}function be(e){return e==null||typeof e=="boolean"?ut(dn):L(e)?ut(te,null,e.slice()):typeof e=="object"?Ze(e):ut(ro,null,String(e))}function Ze(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:yr(e)}function Tl(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(L(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Tl(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(so in t)?t._ctx=kt:s===3&&kt&&(kt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else G(t)?(t={default:t,_ctx:kt},n=32):(t=String(t),r&64?(n=16,t=[_e(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ly(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Qe([t.class,r.class]));else if(s==="style")t.style=ee([t.style,r.style]);else if(Wi(s)){const i=t[s],o=r[s];o&&i!==o&&!(L(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function Se(e,t,n,r=null){ye(e,t,7,[n,r])}const Uy=Cf();let By=0;function jy(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Uy,i={uid:By++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Yh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xf(r,s),emitsOptions:Ef(r,s),emit:null,emitted:null,propsDefaults:dt,inheritAttrs:r.inheritAttrs,ctx:dt,data:dt,props:dt,attrs:dt,slots:dt,refs:dt,setupState:dt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Hm.bind(null,i),e.ce&&e.ce(i),i}let Gt=null,bi,ba;{const e=Kh(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};bi=t("__VUE_INSTANCE_SETTERS__",n=>Gt=n),ba=t("__VUE_SSR_SETTERS__",n=>io=n)}const xs=e=>{const t=Gt;return bi(e),e.scope.on(),()=>{e.scope.off(),bi(t)}},lu=()=>{Gt&&Gt.scope.off(),bi(null)};function Uf(e){return e.vnode.shapeFlag&4}let io=!1;function zy(e,t=!1){t&&ba(t);const{props:n,children:r}=e.vnode,s=Uf(e);Sy(e,n,s,t),Cy(e,r);const i=s?qy(e,t):void 0;return t&&ba(!1),i}function qy(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=$i(new Proxy(e.ctx,gy));const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?Hy(e):null,i=xs(e);Kn();const o=an(r,e,0,[e.props,s]);if(Wn(),i(),qh(o)){if(o.then(lu,lu),t)return o.then(a=>{cu(e,a,t)}).catch(a=>{Zi(a,e,0)});e.asyncDep=o}else cu(e,o,t)}else Bf(e,t)}function cu(e,t,n){G(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:mt(t)&&(e.setupState=gf(t)),Bf(e,n)}let uu;function Bf(e,t,n){const r=e.type;if(!e.render){if(!t&&uu&&!r.render){const s=r.template||Il(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=r,c=jt(jt({isCustomElement:i,delimiters:a},o),l);r.render=uu(s,c)}}e.render=r.render||he}{const s=xs(e);Kn();try{my(e)}finally{Wn(),s()}}}function Qy(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return re(e,"get","$attrs"),t[n]}}))}function Hy(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Qy(e)},slots:e.slots,emit:e.emit,expose:t}}function oo(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(gf($i(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Yr)return Yr[n](e)},has(t,n){return n in t||n in Yr}}))}function Gy(e){return G(e)&&"__vccOpts"in e}const je=(e,t)=>km(e,t,io),Ky="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Wy="http://www.w3.org/2000/svg",Jy="http://www.w3.org/1998/Math/MathML",tn=typeof document<"u"?document:null,hu=tn&&tn.createElement("template"),Yy={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?tn.createElementNS(Wy,e):t==="mathml"?tn.createElementNS(Jy,e):tn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>tn.createTextNode(e),createComment:e=>tn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>tn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{hu.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const a=hu.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Xy=Symbol("_vtc");function $y(e,t,n){const r=e[Xy];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const fu=Symbol("_vod"),Zy=Symbol("_vsh"),t_=Symbol(""),e_=/(^|;)\s*display\s*:/;function n_(e,t,n){const r=e.style,s=Pt(n);let i=!1;if(n&&!s){if(t)if(Pt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&mi(r,a,"")}else for(const o in t)n[o]==null&&mi(r,o,"");for(const o in n)o==="display"&&(i=!0),mi(r,o,n[o])}else if(s){if(t!==n){const o=r[t_];o&&(n+=";"+o),r.cssText=n,i=e_.test(n)}}else t&&e.removeAttribute("style");fu in e&&(e[fu]=i?r.display:"",e[Zy]&&(r.display="none"))}const du=/\s*!important$/;function mi(e,t,n){if(L(n))n.forEach(r=>mi(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=r_(e,t);du.test(n)?e.setProperty(Cr(r),n.replace(du,""),"important"):e[r]=n}}const pu=["Webkit","Moz","ms"],Jo={};function r_(e,t){const n=Jo[t];if(n)return n;let r=pr(t);if(r!=="filter"&&r in e)return Jo[t]=r;r=Gh(r);for(let s=0;s<pu.length;s++){const i=pu[s]+r;if(i in e)return Jo[t]=i}return t}const gu="http://www.w3.org/1999/xlink";function s_(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(gu,t.slice(6,t.length)):e.setAttributeNS(gu,t,n);else{const i=lm(t);n==null||i&&!Wh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function i_(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?e.getAttribute("value")||"":e.value,u=n??"";(c!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=Wh(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function Le(e,t,n,r){e.addEventListener(t,n,r)}function o_(e,t,n,r){e.removeEventListener(t,n,r)}const mu=Symbol("_vei");function a_(e,t,n,r,s=null){const i=e[mu]||(e[mu]={}),o=i[t];if(r&&o)o.value=r;else{const[a,l]=l_(t);if(r){const c=i[t]=h_(r,s);Le(e,a,c,l)}else o&&(o_(e,a,o,l),i[t]=void 0)}}const yu=/(?:Once|Passive|Capture)$/;function l_(e){let t;if(yu.test(e)){t={};let r;for(;r=e.match(yu);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Cr(e.slice(2)),t]}let Yo=0;const c_=Promise.resolve(),u_=()=>Yo||(c_.then(()=>Yo=0),Yo=Date.now());function h_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ye(f_(r,n.value),t,5,[r])};return n.value=e,n.attached=u_(),n}function f_(e,t){if(L(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const _u=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,d_=(e,t,n,r,s,i,o,a,l)=>{const c=s==="svg";t==="class"?$y(e,r,c):t==="style"?n_(e,n,r):Wi(t)?ol(t)||a_(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):p_(e,t,r,c))?i_(e,t,r,i,o,a,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),s_(e,t,r,c))};function p_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&_u(t)&&G(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return _u(t)&&Pt(n)?!1:t in e}const pn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return L(t)?n=>fi(t,n):t};function g_(e){e.target.composing=!0}function Au(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const fe=Symbol("_assign"),Eu={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[fe]=pn(s);const i=r||s.props&&s.props.type==="number";Le(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=as(a)),e[fe](a)}),n&&Le(e,"change",()=>{e.value=e.value.trim()}),t||(Le(e,"compositionstart",g_),Le(e,"compositionend",Au),Le(e,"change",Au))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e[fe]=pn(i),e.composing)return;const o=s||e.type==="number"?as(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===a)||(e.value=a))}},m_={deep:!0,created(e,t,n){e[fe]=pn(n),Le(e,"change",()=>{const r=e._modelValue,s=_r(e),i=e.checked,o=e[fe];if(L(r)){const a=cl(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Rr(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(jf(e,i))})},mounted:vu,beforeUpdate(e,t,n){e[fe]=pn(n),vu(e,t,n)}};function vu(e,{value:t,oldValue:n},r){e._modelValue=t,L(t)?e.checked=cl(t,r.props.value)>-1:Rr(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=Bn(t,jf(e,!0)))}const y_={created(e,{value:t},n){e.checked=Bn(t,n.props.value),e[fe]=pn(n),Le(e,"change",()=>{e[fe](_r(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[fe]=pn(r),t!==n&&(e.checked=Bn(t,r.props.value))}},__={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=Rr(t);Le(e,"change",()=>{const i=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?as(_r(o)):_r(o));e[fe](e.multiple?s?new Set(i):i:i[0]),e._assigning=!0,_l(()=>{e._assigning=!1})}),e[fe]=pn(r)},mounted(e,{value:t,modifiers:{number:n}}){Iu(e,t,n)},beforeUpdate(e,t,n){e[fe]=pn(n)},updated(e,{value:t,modifiers:{number:n}}){e._assigning||Iu(e,t,n)}};function Iu(e,t,n){const r=e.multiple,s=L(t);if(!(r&&!s&&!Rr(t))){for(let i=0,o=e.options.length;i<o;i++){const a=e.options[i],l=_r(a);if(r)if(s){const c=typeof l;c==="string"||c==="number"?a.selected=t.includes(n?as(l):l):a.selected=cl(t,l)>-1}else a.selected=t.has(l);else if(Bn(_r(a),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function _r(e){return"_value"in e?e._value:e.value}function jf(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const A_={created(e,t,n){ei(e,t,n,null,"created")},mounted(e,t,n){ei(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){ei(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){ei(e,t,n,r,"updated")}};function E_(e,t){switch(e){case"SELECT":return __;case"TEXTAREA":return Eu;default:switch(t){case"checkbox":return m_;case"radio":return y_;default:return Eu}}}function ei(e,t,n,r,s){const o=E_(e.tagName,n.props&&n.props.type)[s];o&&o(e,t,n,r)}const v_=jt({patchProp:d_},Yy);let wu;function I_(){return wu||(wu=xy(v_))}const w_=(...e)=>{const t=I_().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=S_(r);if(!s)return;const i=t._component;!G(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,T_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function T_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function S_(e){return Pt(e)?document.querySelector(e):e}const b_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAApCAYAAADar2JAAAAAAXNSR0IArs4c6QAAAPBJREFUSEvtl8ENwjAMRR3EJByZpRIwKSB1Fo5MggC50g8hcRqX2pySS6XGffl1U/snkGLsrsMLYffDGFqPNANSoBZchUqwXGFNtQjVAOdUF9AlwBr4C/oLUAL7QteozNVGpeZQC2CqNlgCAe7QTwVqVR/tfM9pz6l2ryjjfLYUEU3tdzgf6bZ5KLWUYfvnlsbTZZrgehp7OuB81SzAIB6AxSqVQzHByjHSBQCSYE2oBMe9XFmejOL1XZTitU1yavr1XXoU59ASzKbNr+9bqYW19PVSa9WmBtjfn+JvWrIbJIv+P8+fFgjT00kNrDlHvQHFTpvH8XRPbQAAAABJRU5ErkJggg==",R_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAVCAYAAABR915hAAAAAXNSR0IArs4c6QAAAOhJREFUSEvNlVsSgyAMRc1WdDu2rtXW7dSt0AkzUAh56ZRWPiGXQ57A4FjjOgeHWTbZlw0se9PgKDQBLbgKptB92eK94zpXDin74v3igeQpQjgw3bM8Z8FnwyvllQt7A/42VPK8AveCcvAMLqGv+7OJ2vS4WR0Szy1tCnsES1AAGEL4tLAFL6GaFuFgQb1wDqppM1h6LYpxaZ5TbWkvwUUwTehRcKnntGqok9iTZ85rLVIVmFalN7/pgd7iQvumqj0tofWV1U6ojVWdLuk9POgQ+f/k6u05/Siu8zvREeoa0IaR61v8FfgNvvq2rKrcLcMAAAAASUVORK5CYII=";var C_=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let zf;const ao=e=>zf=e,qf=Symbol();function Ra(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Zr;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Zr||(Zr={}));function P_(){const e=Xh(!0),t=e.run(()=>mr({}));let n=[],r=[];const s=$i({install(i){ao(s),s._a=i,i.provide(qf,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!C_?r.push(i):n.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const Qf=()=>{};function Tu(e,t,n,r=Qf){e.push(t);const s=()=>{const i=e.indexOf(t);i>-1&&(e.splice(i,1),r())};return!n&&$h()&&hm(s),s}function er(e,...t){e.slice().forEach(n=>{n(...t)})}const x_=e=>e();function Ca(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,r)=>e.set(r,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];Ra(s)&&Ra(r)&&e.hasOwnProperty(n)&&!Rt(r)&&!on(r)?e[n]=Ca(s,r):e[n]=r}return e}const V_=Symbol();function D_(e){return!Ra(e)||!e.hasOwnProperty(V_)}const{assign:Xe}=Object;function k_(e){return!!(Rt(e)&&e.effect)}function N_(e,t,n,r){const{state:s,actions:i,getters:o}=t,a=n.state.value[e];let l;function c(){a||(n.state.value[e]=s?s():{});const u=Fm(n.state.value[e]);return Xe(u,i,Object.keys(o||{}).reduce((h,p)=>(h[p]=$i(je(()=>{ao(n);const g=n._s.get(e);return o[p].call(g,g)})),h),{}))}return l=Hf(e,c,t,n,r,!0),l}function Hf(e,t,n={},r,s,i){let o;const a=Xe({actions:{}},n),l={deep:!0};let c,u,h=[],p=[],g;const D=r.state.value[e];!i&&!D&&(r.state.value[e]={}),mr({});let C;function V(Y){let nt;c=u=!1,typeof Y=="function"?(Y(r.state.value[e]),nt={type:Zr.patchFunction,storeId:e,events:g}):(Ca(r.state.value[e],Y),nt={type:Zr.patchObject,payload:Y,storeId:e,events:g});const It=C=Symbol();_l().then(()=>{C===It&&(c=!0)}),u=!0,er(h,nt,r.state.value[e])}const q=i?function(){const{state:nt}=n,It=nt?nt():{};this.$patch(se=>{Xe(se,It)})}:Qf;function st(){o.stop(),h=[],p=[],r._s.delete(e)}function H(Y,nt){return function(){ao(r);const It=Array.from(arguments),se=[],Ie=[];function $n(lt){se.push(lt)}function Fr(lt){Ie.push(lt)}er(p,{args:It,name:Y,store:at,after:$n,onError:Fr});let Je;try{Je=nt.apply(this&&this.$id===e?this:at,It)}catch(lt){throw er(Ie,lt),lt}return Je instanceof Promise?Je.then(lt=>(er(se,lt),lt)).catch(lt=>(er(Ie,lt),Promise.reject(lt))):(er(se,Je),Je)}}const it={_p:r,$id:e,$onAction:Tu.bind(null,p),$patch:V,$reset:q,$subscribe(Y,nt={}){const It=Tu(h,Y,nt.detached,()=>se()),se=o.run(()=>pi(()=>r.state.value[e],Ie=>{(nt.flush==="sync"?u:c)&&Y({storeId:e,type:Zr.direct,events:g},Ie)},Xe({},l,nt)));return It},$dispose:st},at=Xi(it);r._s.set(e,at);const wt=(r._a&&r._a.runWithContext||x_)(()=>r._e.run(()=>(o=Xh()).run(t)));for(const Y in wt){const nt=wt[Y];if(Rt(nt)&&!k_(nt)||on(nt))i||(D&&D_(nt)&&(Rt(nt)?nt.value=D[Y]:Ca(nt,D[Y])),r.state.value[e][Y]=nt);else if(typeof nt=="function"){const It=H(Y,nt);wt[Y]=It,a.actions[Y]=nt}}return Xe(at,wt),Xe(et(at),wt),Object.defineProperty(at,"$state",{get:()=>r.state.value[e],set:Y=>{V(nt=>{Xe(nt,Y)})}}),r._p.forEach(Y=>{Xe(at,o.run(()=>Y({store:at,app:r._a,pinia:r,options:a})))}),D&&i&&n.hydrate&&n.hydrate(at.$state,D),c=!0,u=!0,at}function Gf(e,t,n){let r,s;const i=typeof t=="function";typeof e=="string"?(r=e,s=i?n:t):(s=e,r=e.id);function o(a,l){const c=Ty();return a=a||(c?Xr(qf,null):null),a&&ao(a),a=zf,a._s.has(r)||(i?Hf(r,t,s,a):N_(r,s,a)),a._s.get(r)}return o.$id=r,o}function Xo(e,t=0){return Math.floor(Math.random()*(e-t+1))+t}function O_(e){return e?e*-1:0}var Su={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},M_=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],o=e[n++],a=e[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},Wf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],o=s+1<e.length,a=o?e[s+1]:0,l=s+2<e.length,c=l?e[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[u],n[h],n[p],n[g])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Kf(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):M_(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const c=s<e.length?n[e.charAt(s)]:64;++s;const h=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new F_;const p=i<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const D=c<<6&192|h;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class F_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L_=function(e){const t=Kf(e);return Wf.encodeByteArray(t,!0)},Ri=function(e){return L_(e).replace(/\./g,"")},U_=function(e){try{return Wf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=()=>B_().__FIREBASE_DEFAULTS__,z_=()=>{if(typeof process>"u"||typeof Su>"u")return;const e=Su.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},q_=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&U_(e[1]);return t&&JSON.parse(t)},Sl=()=>{try{return j_()||z_()||q_()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Q_=e=>{var t,n;return(n=(t=Sl())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},H_=e=>{const t=Q_(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Jf=()=>{var e;return(e=Sl())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ri(JSON.stringify(n)),Ri(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W_(){var e;const t=(e=Sl())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function J_(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Y_(){return!W_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bl(){try{return typeof indexedDB=="object"}catch{return!1}}function Yf(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}function X_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="FirebaseError";class En extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=$_,Object.setPrototypeOf(this,En.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lo.prototype.create)}}class lo{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?Z_(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new En(s,a,r)}}function Z_(e,t){return e.replace(tA,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const tA=/\{\$([^}]+)}/g;function Pi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],o=t[s];if(bu(i)&&bu(o)){if(!Pi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function bu(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=1e3,nA=2,rA=4*60*60*1e3,sA=.5;function Ru(e,t=eA,n=nA){const r=t*Math.pow(n,e),s=Math.round(sA*r*(Math.random()-.5)*2);return Math.min(rA,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(e){return e&&e._delegate?e._delegate:e}class He{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new G_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(aA(t))try{this.getOrInitializeService({instanceIdentifier:Cn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=Cn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Cn){return this.instances.has(t)}getOptions(t=Cn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&t(o,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oA(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Cn){return this.component?this.component.multipleInstances?t:Cn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oA(e){return e===Cn?void 0:e}function aA(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new iA(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(tt||(tt={}));const cA={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},uA=tt.INFO,hA={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},fA=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=hA[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Rl{constructor(t){this.name=t,this._logLevel=uA,this._logHandler=fA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in tt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?cA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...t),this._logHandler(this,tt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...t),this._logHandler(this,tt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...t),this._logHandler(this,tt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...t),this._logHandler(this,tt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...t),this._logHandler(this,tt.ERROR,...t)}}const dA=(e,t)=>t.some(n=>e instanceof n);let Cu,Pu;function pA(){return Cu||(Cu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gA(){return Pu||(Pu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xf=new WeakMap,Pa=new WeakMap,$f=new WeakMap,$o=new WeakMap,Cl=new WeakMap;function mA(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(ln(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Xf.set(n,e)}).catch(()=>{}),Cl.set(t,e),t}function yA(e){if(Pa.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Pa.set(e,t)}let xa={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Pa.get(e);if(t==="objectStoreNames")return e.objectStoreNames||$f.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ln(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function _A(e){xa=e(xa)}function AA(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Zo(this),t,...n);return $f.set(r,t.sort?t.sort():[t]),ln(r)}:gA().includes(e)?function(...t){return e.apply(Zo(this),t),ln(Xf.get(this))}:function(...t){return ln(e.apply(Zo(this),t))}}function EA(e){return typeof e=="function"?AA(e):(e instanceof IDBTransaction&&yA(e),dA(e,pA())?new Proxy(e,xa):e)}function ln(e){if(e instanceof IDBRequest)return mA(e);if($o.has(e))return $o.get(e);const t=EA(e);return t!==e&&($o.set(e,t),Cl.set(t,e)),t}const Zo=e=>Cl.get(e);function Zf(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=ln(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ln(o.result),l.oldVersion,l.newVersion,ln(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const vA=["get","getKey","getAll","getAllKeys","count"],IA=["put","add","delete","clear"],ta=new Map;function xu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ta.get(t))return ta.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=IA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vA.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return ta.set(t,i),i}_A(e=>({...e,get:(t,n,r)=>xu(t,n)||e.get(t,n,r),has:(t,n)=>!!xu(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function TA(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Va="@firebase/app",Vu="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new Rl("@firebase/app"),SA="@firebase/app-compat",bA="@firebase/analytics-compat",RA="@firebase/analytics",CA="@firebase/app-check-compat",PA="@firebase/app-check",xA="@firebase/auth",VA="@firebase/auth-compat",DA="@firebase/database",kA="@firebase/database-compat",NA="@firebase/functions",OA="@firebase/functions-compat",MA="@firebase/installations",FA="@firebase/installations-compat",LA="@firebase/messaging",UA="@firebase/messaging-compat",BA="@firebase/performance",jA="@firebase/performance-compat",zA="@firebase/remote-config",qA="@firebase/remote-config-compat",QA="@firebase/storage",HA="@firebase/storage-compat",GA="@firebase/firestore",KA="@firebase/firestore-compat",WA="firebase",JA="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="[DEFAULT]",YA={[Va]:"fire-core",[SA]:"fire-core-compat",[RA]:"fire-analytics",[bA]:"fire-analytics-compat",[PA]:"fire-app-check",[CA]:"fire-app-check-compat",[xA]:"fire-auth",[VA]:"fire-auth-compat",[DA]:"fire-rtdb",[kA]:"fire-rtdb-compat",[NA]:"fire-fn",[OA]:"fire-fn-compat",[MA]:"fire-iid",[FA]:"fire-iid-compat",[LA]:"fire-fcm",[UA]:"fire-fcm-compat",[BA]:"fire-perf",[jA]:"fire-perf-compat",[zA]:"fire-rc",[qA]:"fire-rc-compat",[QA]:"fire-gcs",[HA]:"fire-gcs-compat",[GA]:"fire-fst",[KA]:"fire-fst-compat","fire-js":"fire-js",[WA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new Map,XA=new Map,ka=new Map;function Du(e,t){try{e.container.addComponent(t)}catch(n){jn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function mn(e){const t=e.name;if(ka.has(t))return jn.debug(`There were multiple attempts to register component ${t}.`),!1;ka.set(t,e);for(const n of xi.values())Du(n,e);for(const n of XA.values())Du(n,e);return!0}function Vs(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cn=new lo("app","Firebase",$A);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new He("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=JA;function td(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Da,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw cn.create("bad-app-name",{appName:String(s)});if(n||(n=Jf()),!n)throw cn.create("no-options");const i=xi.get(s);if(i){if(Pi(n,i.options)&&Pi(r,i.config))return i;throw cn.create("duplicate-app",{appName:s})}const o=new lA(s);for(const l of ka.values())o.addComponent(l);const a=new ZA(n,r,o);return xi.set(s,a),a}function ed(e=Da){const t=xi.get(e);if(!t&&e===Da&&Jf())return td();if(!t)throw cn.create("no-app",{appName:e});return t}function De(e,t,n){var r;let s=(r=YA[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${t}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),jn.warn(a.join(" "));return}mn(new He(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="firebase-heartbeat-database",nE=1,fs="firebase-heartbeat-store";let ea=null;function nd(){return ea||(ea=Zf(eE,nE,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(fs)}catch(n){console.warn(n)}}}}).catch(e=>{throw cn.create("idb-open",{originalErrorMessage:e.message})})),ea}async function rE(e){try{const n=(await nd()).transaction(fs),r=await n.objectStore(fs).get(rd(e));return await n.done,r}catch(t){if(t instanceof En)jn.warn(t.message);else{const n=cn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});jn.warn(n.message)}}}async function ku(e,t){try{const r=(await nd()).transaction(fs,"readwrite");await r.objectStore(fs).put(t,rd(e)),await r.done}catch(n){if(n instanceof En)jn.warn(n.message);else{const r=cn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});jn.warn(r.message)}}}function rd(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=1024,iE=30*24*60*60*1e3;class oE{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Nu();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=iE}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Nu(),{heartbeatsToSend:r,unsentEntries:s}=aE(this._heartbeatsCache.heartbeats),i=Ri(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Nu(){return new Date().toISOString().substring(0,10)}function aE(e,t=sE){const n=[];let r=e.slice();for(const s of e){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ou(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ou(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class lE{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bl()?Yf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ku(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ku(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Ou(e){return Ri(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(e){mn(new He("platform-logger",t=>new wA(t),"PRIVATE")),mn(new He("heartbeat",t=>new oE(t),"PRIVATE")),De(Va,Vu,e),De(Va,Vu,"esm2017"),De("fire-js","")}cE("");var uE="firebase",hE="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */De(uE,hE,"app");const sd="@firebase/installations",Pl="0.6.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=1e4,od=`w:${Pl}`,ad="FIS_v2",fE="https://firebaseinstallations.googleapis.com/v1",dE=60*60*1e3,pE="installations",gE="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},zn=new lo(pE,gE,mE);function ld(e){return e instanceof En&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd({projectId:e}){return`${fE}/projects/${e}/installations`}function ud(e){return{token:e.token,requestStatus:2,expiresIn:_E(e.expiresIn),creationTime:Date.now()}}async function hd(e,t){const r=(await t.json()).error;return zn.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function fd({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function yE(e,{refreshToken:t}){const n=fd(e);return n.append("Authorization",AE(t)),n}async function dd(e){const t=await e();return t.status>=500&&t.status<600?e():t}function _E(e){return Number(e.replace("s","000"))}function AE(e){return`${ad} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EE({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=cd(e),s=fd(e),i=t.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:ad,appId:e.appId,sdkVersion:od},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await dd(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:ud(c.authToken)}}else throw await hd("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=/^[cdef][\w-]{21}$/,Na="";function wE(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=TE(e);return IE.test(n)?n:Na}catch{return Na}}function TE(e){return vE(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Map;function md(e,t){const n=co(e);yd(n,t),SE(n,t)}function yd(e,t){const n=gd.get(e);if(n)for(const r of n)r(t)}function SE(e,t){const n=bE();n&&n.postMessage({key:e,fid:t}),RE()}let Dn=null;function bE(){return!Dn&&"BroadcastChannel"in self&&(Dn=new BroadcastChannel("[Firebase] FID Change"),Dn.onmessage=e=>{yd(e.data.key,e.data.fid)}),Dn}function RE(){gd.size===0&&Dn&&(Dn.close(),Dn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="firebase-installations-database",PE=1,qn="firebase-installations-store";let na=null;function xl(){return na||(na=Zf(CE,PE,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(qn)}}})),na}async function Vi(e,t){const n=co(e),s=(await xl()).transaction(qn,"readwrite"),i=s.objectStore(qn),o=await i.get(n);return await i.put(t,n),await s.done,(!o||o.fid!==t.fid)&&md(e,t.fid),t}async function _d(e){const t=co(e),r=(await xl()).transaction(qn,"readwrite");await r.objectStore(qn).delete(t),await r.done}async function uo(e,t){const n=co(e),s=(await xl()).transaction(qn,"readwrite"),i=s.objectStore(qn),o=await i.get(n),a=t(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&md(e,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(e){let t;const n=await uo(e.appConfig,r=>{const s=xE(r),i=VE(e,s);return t=i.registrationPromise,i.installationEntry});return n.fid===Na?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function xE(e){const t=e||{fid:wE(),registrationStatus:0};return Ad(t)}function VE(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(zn.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=DE(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:kE(e)}:{installationEntry:t}}async function DE(e,t){try{const n=await EE(e,t);return Vi(e.appConfig,n)}catch(n){throw ld(n)&&n.customData.serverCode===409?await _d(e.appConfig):await Vi(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function kE(e){let t=await Mu(e.appConfig);for(;t.registrationStatus===1;)await pd(100),t=await Mu(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Vl(e);return r||n}return t}function Mu(e){return uo(e,t=>{if(!t)throw zn.create("installation-not-found");return Ad(t)})}function Ad(e){return NE(e)?{fid:e.fid,registrationStatus:0}:e}function NE(e){return e.registrationStatus===1&&e.registrationTime+id<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OE({appConfig:e,heartbeatServiceProvider:t},n){const r=ME(e,n),s=yE(e,n),i=t.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:od,appId:e.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await dd(()=>fetch(r,a));if(l.ok){const c=await l.json();return ud(c)}else throw await hd("Generate Auth Token",l)}function ME(e,{fid:t}){return`${cd(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(e,t=!1){let n;const r=await uo(e.appConfig,i=>{if(!Ed(i))throw zn.create("not-registered");const o=i.authToken;if(!t&&UE(o))return i;if(o.requestStatus===1)return n=FE(e,t),i;{if(!navigator.onLine)throw zn.create("app-offline");const a=jE(i);return n=LE(e,a),a}});return n?await n:r.authToken}async function FE(e,t){let n=await Fu(e.appConfig);for(;n.authToken.requestStatus===1;)await pd(100),n=await Fu(e.appConfig);const r=n.authToken;return r.requestStatus===0?Dl(e,t):r}function Fu(e){return uo(e,t=>{if(!Ed(t))throw zn.create("not-registered");const n=t.authToken;return zE(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function LE(e,t){try{const n=await OE(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Vi(e.appConfig,r),n}catch(n){if(ld(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await _d(e.appConfig);else{const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Vi(e.appConfig,r)}throw n}}function Ed(e){return e!==void 0&&e.registrationStatus===2}function UE(e){return e.requestStatus===2&&!BE(e)}function BE(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+dE}function jE(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function zE(e){return e.requestStatus===1&&e.requestTime+id<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qE(e){const t=e,{installationEntry:n,registrationPromise:r}=await Vl(t);return r?r.catch(console.error):Dl(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QE(e,t=!1){const n=e;return await HE(n),(await Dl(n,t)).token}async function HE(e){const{registrationPromise:t}=await Vl(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(e){if(!e||!e.options)throw ra("App Configuration");if(!e.name)throw ra("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ra(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function ra(e){return zn.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="installations",KE="installations-internal",WE=e=>{const t=e.getProvider("app").getImmediate(),n=GE(t),r=Vs(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},JE=e=>{const t=e.getProvider("app").getImmediate(),n=Vs(t,vd).getImmediate();return{getId:()=>qE(n),getToken:s=>QE(n,s)}};function YE(){mn(new He(vd,WE,"PUBLIC")),mn(new He(KE,JE,"PRIVATE"))}YE();De(sd,Pl);De(sd,Pl,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="analytics",XE="firebase_id",$E="origin",ZE=60*1e3,tv="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",kl="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne=new Rl("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ae=new lo("analytics","Analytics",ev);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(e){if(!e.startsWith(kl)){const t=ae.create("invalid-gtag-resource",{gtagURL:e});return ne.warn(t.message),""}return e}function Id(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function rv(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function sv(e,t){const n=rv("firebase-js-sdk-policy",{createScriptURL:nv}),r=document.createElement("script"),s=`${kl}?l=${e}&id=${t}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function iv(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function ov(e,t,n,r,s,i){const o=r[s];try{if(o)await t[o];else{const l=(await Id(n)).find(c=>c.measurementId===s);l&&await t[l.appId]}}catch(a){ne.error(a)}e("config",s,i)}async function av(e,t,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await Id(n);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&t[c.appId];if(u)i.push(u);else{i=[];break}}}i.length===0&&(i=Object.values(t)),await Promise.all(i),e("event",r,s||{})}catch(i){ne.error(i)}}function lv(e,t,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await av(e,t,n,a,l)}else if(i==="config"){const[a,l]=o;await ov(e,t,n,r,a,l)}else if(i==="consent"){const[a]=o;e("consent","update",a)}else if(i==="get"){const[a,l,c]=o;e("get",a,l,c)}else if(i==="set"){const[a]=o;e("set",a)}else e(i,...o)}catch(a){ne.error(a)}}return s}function cv(e,t,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=lv(i,e,t,n),{gtagCore:i,wrappedGtag:window[s]}}function uv(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(kl)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=30,fv=1e3;class dv{constructor(t={},n=fv){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const wd=new dv;function pv(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function gv(e){var t;const{appId:n,apiKey:r}=e,s={method:"GET",headers:pv(r)},i=tv.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((t=l.error)===null||t===void 0)&&t.message&&(a=l.error.message)}catch{}throw ae.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function mv(e,t=wd,n){const{appId:r,apiKey:s,measurementId:i}=e.options;if(!r)throw ae.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw ae.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Av;return setTimeout(async()=>{a.abort()},n!==void 0?n:ZE),Td({appId:r,apiKey:s,measurementId:i},o,a,t)}async function Td(e,{throttleEndTimeMillis:t,backoffCount:n},r,s=wd){var i;const{appId:o,measurementId:a}=e;try{await yv(r,t)}catch(l){if(a)return ne.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await gv(e);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!_v(c)){if(s.deleteThrottleMetadata(o),a)return ne.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?Ru(n,s.intervalMillis,hv):Ru(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(o,h),ne.debug(`Calling attemptFetch again in ${u} millis`),Td(e,h,r,s)}}function yv(e,t){return new Promise((n,r)=>{const s=Math.max(t-Date.now(),0),i=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(i),r(ae.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function _v(e){if(!(e instanceof En)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class Av{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function Ev(e,t,n,r,s){if(s&&s.global){e("event",n,r);return}else{const i=await t,o=Object.assign(Object.assign({},r),{send_to:i});e("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vv(){if(bl())try{await Yf()}catch(e){return ne.warn(ae.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return ne.warn(ae.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Iv(e,t,n,r,s,i,o){var a;const l=mv(e);l.then(g=>{n[g.measurementId]=g.appId,e.options.measurementId&&g.measurementId!==e.options.measurementId&&ne.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>ne.error(g)),t.push(l);const c=vv().then(g=>{if(g)return r.getId()}),[u,h]=await Promise.all([l,c]);uv(i)||sv(i,u.measurementId),s("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[$E]="firebase",p.update=!0,h!=null&&(p[XE]=h),s("config",u.measurementId,p),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(t){this.app=t}_delete(){return delete ts[this.app.options.appId],Promise.resolve()}}let ts={},Lu=[];const Uu={};let sa="dataLayer",Tv="gtag",Bu,Sd,ju=!1;function Sv(){const e=[];if(J_()&&e.push("This is a browser extension environment."),X_()||e.push("Cookies are not available."),e.length>0){const t=e.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=ae.create("invalid-analytics-context",{errorInfo:t});ne.warn(n.message)}}function bv(e,t,n){Sv();const r=e.options.appId;if(!r)throw ae.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)ne.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ae.create("no-api-key");if(ts[r]!=null)throw ae.create("already-exists",{id:r});if(!ju){iv(sa);const{wrappedGtag:i,gtagCore:o}=cv(ts,Lu,Uu,sa,Tv);Sd=i,Bu=o,ju=!0}return ts[r]=Iv(e,Lu,Uu,t,Bu,sa,n),new wv(e)}function Rv(e=ed()){e=gn(e);const t=Vs(e,Di);return t.isInitialized()?t.getImmediate():Cv(e)}function Cv(e,t={}){const n=Vs(e,Di);if(n.isInitialized()){const s=n.getImmediate();if(Pi(t,n.getOptions()))return s;throw ae.create("already-initialized")}return n.initialize({options:t})}function Pv(e,t,n,r){e=gn(e),Ev(Sd,ts[e.app.options.appId],t,n,r).catch(s=>ne.error(s))}const zu="@firebase/analytics",qu="0.10.2";function xv(){mn(new He(Di,(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return bv(r,s,n)},"PUBLIC")),mn(new He("analytics-internal",e,"PRIVATE")),De(zu,qu),De(zu,qu,"esm2017");function e(t){try{const n=t.getProvider(Di).getImmediate();return{logEvent:(r,s,i)=>Pv(n,r,s,i)}}catch(n){throw ae.create("interop-component-reg-failed",{reason:n})}}}xv();var Vv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},b,Nl=Nl||{},B=Vv||self;function ho(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Ds(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function Dv(e){return Object.prototype.hasOwnProperty.call(e,ia)&&e[ia]||(e[ia]=++kv)}var ia="closure_uid_"+(1e9*Math.random()>>>0),kv=0;function Nv(e,t,n){return e.call.apply(e.bind,arguments)}function Ov(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),e.apply(t,s)}}return function(){return e.apply(t,arguments)}}function Kt(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Kt=Nv:Kt=Ov,Kt.apply(null,arguments)}function ni(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Ot(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[s].apply(r,o)}}function vn(){this.s=this.s,this.o=this.o}var Mv=0;vn.prototype.s=!1;vn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Mv!=0)&&Dv(this)};vn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bd=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ol(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Qu(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ho(r)){const s=e.length||0,i=r.length||0;e.length=s+i;for(let o=0;o<i;o++)e[s+o]=r[o]}else e.push(r)}}function Wt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Wt.prototype.h=function(){this.defaultPrevented=!0};var Fv=function(){if(!B.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};B.addEventListener("test",n,t),B.removeEventListener("test",n,t)}catch{}return e}();function ds(e){return/^[\s\xa0]*$/.test(e)}function fo(){var e=B.navigator;return e&&(e=e.userAgent)?e:""}function Ce(e){return fo().indexOf(e)!=-1}function Ml(e){return Ml[" "](e),e}Ml[" "]=function(){};function Lv(e,t){var n=xI;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var Uv=Ce("Opera"),Ar=Ce("Trident")||Ce("MSIE"),Rd=Ce("Edge"),Oa=Rd||Ar,Cd=Ce("Gecko")&&!(fo().toLowerCase().indexOf("webkit")!=-1&&!Ce("Edge"))&&!(Ce("Trident")||Ce("MSIE"))&&!Ce("Edge"),Bv=fo().toLowerCase().indexOf("webkit")!=-1&&!Ce("Edge");function Pd(){var e=B.document;return e?e.documentMode:void 0}var Ma;t:{var oa="",aa=function(){var e=fo();if(Cd)return/rv:([^\);]+)(\)|;)/.exec(e);if(Rd)return/Edge\/([\d\.]+)/.exec(e);if(Ar)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(Bv)return/WebKit\/(\S+)/.exec(e);if(Uv)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(aa&&(oa=aa?aa[1]:""),Ar){var la=Pd();if(la!=null&&la>parseFloat(oa)){Ma=String(la);break t}}Ma=oa}var Fa;if(B.document&&Ar){var Hu=Pd();Fa=Hu||parseInt(Ma,10)||void 0}else Fa=void 0;var jv=Fa;function ps(e,t){if(Wt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Cd){t:{try{Ml(t.nodeName);var s=!0;break t}catch{}s=!1}s||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:zv[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ps.$.h.call(this)}}Ot(ps,Wt);var zv={2:"touch",3:"pen",4:"mouse"};ps.prototype.h=function(){ps.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ks="closure_listenable_"+(1e6*Math.random()|0),qv=0;function Qv(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++qv,this.fa=this.ia=!1}function po(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Fl(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Hv(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function xd(e){const t={};for(const n in e)t[n]=e[n];return t}const Gu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vd(e,t){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)e[n]=r[n];for(let i=0;i<Gu.length;i++)n=Gu[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function go(e){this.src=e,this.g={},this.h=0}go.prototype.add=function(e,t,n,r,s){var i=e.toString();e=this.g[i],e||(e=this.g[i]=[],this.h++);var o=Ua(e,t,r,s);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new Qv(t,this.src,i,!!r,s),t.ia=n,e.push(t)),t};function La(e,t){var n=t.type;if(n in e.g){var r=e.g[n],s=bd(r,t),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(po(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Ua(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}var Ll="closure_lm_"+(1e6*Math.random()|0),ca={};function Dd(e,t,n,r,s){if(r&&r.once)return Nd(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Dd(e,t[i],n,r,s);return null}return n=jl(n),e&&e[ks]?e.O(t,n,Ds(r)?!!r.capture:!!r,s):kd(e,t,n,!1,r,s)}function kd(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=Ds(s)?!!s.capture:!!s,a=Bl(e);if(a||(e[Ll]=a=new go(e)),n=a.add(t,n,r,o,i),n.proxy)return n;if(r=Gv(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Fv||(s=o),s===void 0&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Md(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Gv(){function e(n){return t.call(e.src,e.listener,n)}const t=Kv;return e}function Nd(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Nd(e,t[i],n,r,s);return null}return n=jl(n),e&&e[ks]?e.P(t,n,Ds(r)?!!r.capture:!!r,s):kd(e,t,n,!0,r,s)}function Od(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Od(e,t[i],n,r,s);else r=Ds(r)?!!r.capture:!!r,n=jl(n),e&&e[ks]?(e=e.i,t=String(t).toString(),t in e.g&&(i=e.g[t],n=Ua(i,n,r,s),-1<n&&(po(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete e.g[t],e.h--)))):e&&(e=Bl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ua(t,n,r,s)),(n=-1<e?t[e]:null)&&Ul(n))}function Ul(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[ks])La(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Md(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Bl(t))?(La(n,e),n.h==0&&(n.src=null,t[Ll]=null)):po(e)}}}function Md(e){return e in ca?ca[e]:ca[e]="on"+e}function Kv(e,t){if(e.fa)e=!0;else{t=new ps(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Ul(e),e=n.call(r,t)}return e}function Bl(e){return e=e[Ll],e instanceof go?e:null}var ua="__closure_events_fn_"+(1e9*Math.random()>>>0);function jl(e){return typeof e=="function"?e:(e[ua]||(e[ua]=function(t){return e.handleEvent(t)}),e[ua])}function Nt(){vn.call(this),this.i=new go(this),this.S=this,this.J=null}Ot(Nt,vn);Nt.prototype[ks]=!0;Nt.prototype.removeEventListener=function(e,t,n,r){Od(this,e,t,n,r)};function Ut(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Wt(t,e);else if(t instanceof Wt)t.target=t.target||e;else{var s=t;t=new Wt(r,e),Vd(t,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=ri(o,r,!0,t)&&s}if(o=t.g=e,s=ri(o,r,!0,t)&&s,s=ri(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)o=t.g=n[i],s=ri(o,r,!1,t)&&s}Nt.prototype.N=function(){if(Nt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)po(n[r]);delete e.g[t],e.h--}}this.J=null};Nt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Nt.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function ri(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&La(e.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var zl=B.JSON.stringify;class Wv{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function Jv(){var e=ql;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class Yv{constructor(){this.h=this.g=null}add(t,n){const r=Fd.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Fd=new Wv(()=>new Xv,e=>e.reset());class Xv{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function $v(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Zv(e){B.setTimeout(()=>{throw e},0)}let gs,ms=!1,ql=new Yv,Ld=()=>{const e=B.Promise.resolve(void 0);gs=()=>{e.then(tI)}};var tI=()=>{for(var e;e=Jv();){try{e.h.call(e.g)}catch(n){Zv(n)}var t=Fd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ms=!1};function mo(e,t){Nt.call(this),this.h=e||1,this.g=t||B,this.j=Kt(this.qb,this),this.l=Date.now()}Ot(mo,Nt);b=mo.prototype;b.ga=!1;b.T=null;b.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ut(this,"tick"),this.ga&&(Ql(this),this.start()))}};b.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ql(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}b.N=function(){mo.$.N.call(this),Ql(this),delete this.g};function Hl(e,t,n){if(typeof e=="function")n&&(e=Kt(e,n));else if(e&&typeof e.handleEvent=="function")e=Kt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:B.setTimeout(e,t||0)}function Ud(e){e.g=Hl(()=>{e.g=null,e.i&&(e.i=!1,Ud(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class eI extends vn{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Ud(this)}N(){super.N(),this.g&&(B.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ys(e){vn.call(this),this.h=e,this.g={}}Ot(ys,vn);var Ku=[];function Bd(e,t,n,r){Array.isArray(n)||(n&&(Ku[0]=n.toString()),n=Ku);for(var s=0;s<n.length;s++){var i=Dd(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function jd(e){Fl(e.g,function(t,n){this.g.hasOwnProperty(n)&&Ul(t)},e),e.g={}}ys.prototype.N=function(){ys.$.N.call(this),jd(this)};ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function yo(){this.g=!0}yo.prototype.Ea=function(){this.g=!1};function nI(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+`
`+n+`
`+o})}function rI(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+`
`+n+`
`+i+" "+o})}function or(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+iI(e,n)+(r?" "+r:"")})}function sI(e,t){e.info(function(){return"TIMEOUT: "+t})}yo.prototype.info=function(){};function iI(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return zl(n)}catch{return t}}var Jn={},Wu=null;function _o(){return Wu=Wu||new Nt}Jn.Ta="serverreachability";function zd(e){Wt.call(this,Jn.Ta,e)}Ot(zd,Wt);function _s(e){const t=_o();Ut(t,new zd(t))}Jn.STAT_EVENT="statevent";function qd(e,t){Wt.call(this,Jn.STAT_EVENT,e),this.stat=t}Ot(qd,Wt);function $t(e){const t=_o();Ut(t,new qd(t,e))}Jn.Ua="timingevent";function Qd(e,t){Wt.call(this,Jn.Ua,e),this.size=t}Ot(Qd,Wt);function Ns(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return B.setTimeout(function(){e()},t)}var Ao={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Hd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Gl(){}Gl.prototype.h=null;function Ju(e){return e.h||(e.h=e.i())}function Gd(){}var Os={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Kl(){Wt.call(this,"d")}Ot(Kl,Wt);function Wl(){Wt.call(this,"c")}Ot(Wl,Wt);var Ba;function Eo(){}Ot(Eo,Gl);Eo.prototype.g=function(){return new XMLHttpRequest};Eo.prototype.i=function(){return{}};Ba=new Eo;function Ms(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ys(this),this.P=oI,e=Oa?125:void 0,this.V=new mo(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Kd}function Kd(){this.i=null,this.g="",this.h=!1}var oI=45e3,Wd={},ja={};b=Ms.prototype;b.setTimeout=function(e){this.P=e};function za(e,t,n){e.L=1,e.A=Io(Ge(t)),e.u=n,e.S=!0,Jd(e,null)}function Jd(e,t){e.G=Date.now(),Fs(e),e.B=Ge(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),rp(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Kd,e.g=Tp(e.l,n?t:null,!e.u),0<e.O&&(e.M=new eI(Kt(e.Pa,e,e.g),e.O)),Bd(e.U,e.g,"readystatechange",e.nb),t=e.I?xd(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),_s(),nI(e.j,e.v,e.B,e.m,e.W,e.u)}b.nb=function(e){e=e.target;const t=this.M;t&&xe(e)==3?t.l():this.Pa(e)};b.Pa=function(e){try{if(e==this.g)t:{const u=xe(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||Oa||this.g&&(this.h.h||this.g.ja()||Zu(this.g)))){this.J||u!=4||t==7||(t==8||0>=h?_s(3):_s(2)),vo(this);var n=this.g.da();this.ca=n;e:if(Yd(this)){var r=Zu(this.g);e="";var s=r.length,i=xe(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),es(this);var o="";break e}this.h.i=new B.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,rI(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ds(a)){var c=a;break e}}c=null}if(n=c)or(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qa(this,n);else{this.i=!1,this.s=3,$t(12),kn(this),es(this);break t}}this.S?(Xd(this,u,o),Oa&&this.i&&u==3&&(Bd(this.U,this.V,"tick",this.mb),this.V.start())):(or(this.j,this.m,o,null),qa(this,o)),u==4&&kn(this),this.i&&!this.J&&(u==4?Ep(this.l,this):(this.i=!1,Fs(this)))}else RI(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),kn(this),es(this)}}}catch{}finally{}};function Yd(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function Xd(e,t,n){let r=!0,s;for(;!e.J&&e.o<n.length;)if(s=aI(e,n),s==ja){t==4&&(e.s=4,$t(14),r=!1),or(e.j,e.m,null,"[Incomplete Response]");break}else if(s==Wd){e.s=4,$t(15),or(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else or(e.j,e.m,s,null),qa(e,s);Yd(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,$t(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),tc(t),t.M=!0,$t(11))):(or(e.j,e.m,n,"[Invalid Chunked Response]"),kn(e),es(e))}b.mb=function(){if(this.g){var e=xe(this.g),t=this.g.ja();this.o<t.length&&(vo(this),Xd(this,e,t),this.i&&e!=4&&Fs(this))}};function aI(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?ja:(n=Number(t.substring(n,r)),isNaN(n)?Wd:(r+=1,r+n>t.length?ja:(t=t.slice(r,r+n),e.o=r+n,t)))}b.cancel=function(){this.J=!0,kn(this)};function Fs(e){e.Y=Date.now()+e.P,$d(e,e.P)}function $d(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=Ns(Kt(e.lb,e),t)}function vo(e){e.C&&(B.clearTimeout(e.C),e.C=null)}b.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(sI(this.j,this.B),this.L!=2&&(_s(),$t(17)),kn(this),this.s=2,es(this)):$d(this,this.Y-e)};function es(e){e.l.H==0||e.J||Ep(e.l,e)}function kn(e){vo(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Ql(e.V),jd(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function qa(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||Qa(n.i,e))){if(!e.K&&Qa(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Oi(n),bo(n);else break t;Zl(n),$t(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ns(Kt(n.ib,n),6e3));if(1>=op(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Nn(n,11)}else if((e.K||n.g==e)&&Oi(n),!ds(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const g=e.g;if(g){const D=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(D){var i=r.i;i.g||D.indexOf("spdy")==-1&&D.indexOf("quic")==-1&&D.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Jl(i,i.h),i.h=null))}if(r.F){const C=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;C&&(r.Da=C,pt(r.I,r.F,C))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=wp(r,r.J?r.pa:null,r.Y),o.K){ap(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(vo(a),Fs(a)),r.g=o}else _p(r);0<n.j.length&&Ro(n)}else c[0]!="stop"&&c[0]!="close"||Nn(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Nn(n,7):$l(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}_s(4)}catch{}}function lI(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(ho(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function cI(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(ho(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function Zd(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(ho(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=cI(e),r=lI(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}var tp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uI(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Un(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Un){this.h=e.h,ki(this,e.j),this.s=e.s,this.g=e.g,Ni(this,e.m),this.l=e.l;var t=e.i,n=new As;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Yu(this,n),this.o=e.o}else e&&(t=String(e).match(tp))?(this.h=!1,ki(this,t[1]||"",!0),this.s=Qr(t[2]||""),this.g=Qr(t[3]||"",!0),Ni(this,t[4]),this.l=Qr(t[5]||"",!0),Yu(this,t[6]||"",!0),this.o=Qr(t[7]||"")):(this.h=!1,this.i=new As(null,this.h))}Un.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Hr(t,Xu,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Hr(t,Xu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(Hr(n,n.charAt(0)=="/"?dI:fI,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Hr(n,gI)),e.join("")};function Ge(e){return new Un(e)}function ki(e,t,n){e.j=n?Qr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ni(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Yu(e,t,n){t instanceof As?(e.i=t,mI(e.i,e.h)):(n||(t=Hr(t,pI)),e.i=new As(t,e.h))}function pt(e,t,n){e.i.set(t,n)}function Io(e){return pt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Qr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Hr(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,hI),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function hI(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Xu=/[#\/\?@]/g,fI=/[#\?:]/g,dI=/[#\?]/g,pI=/[#\?@]/g,gI=/#/g;function As(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function In(e){e.g||(e.g=new Map,e.h=0,e.i&&uI(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}b=As.prototype;b.add=function(e,t){In(this),this.i=null,e=Pr(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function ep(e,t){In(e),t=Pr(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function np(e,t){return In(e),t=Pr(e,t),e.g.has(t)}b.forEach=function(e,t){In(this),this.g.forEach(function(n,r){n.forEach(function(s){e.call(t,s,r,this)},this)},this)};b.ta=function(){In(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let i=0;i<s.length;i++)n.push(t[r])}return n};b.Z=function(e){In(this);let t=[];if(typeof e=="string")np(this,e)&&(t=t.concat(this.g.get(Pr(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};b.set=function(e,t){return In(this),this.i=null,e=Pr(this,e),np(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};b.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function rp(e,t,n){ep(e,t),0<n.length&&(e.i=null,e.g.set(Pr(e,t),Ol(n)),e.h+=n.length)}b.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")};function Pr(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function mI(e,t){t&&!e.j&&(In(e),e.i=null,e.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(ep(this,r),rp(this,s,n))},e)),e.j=t}var yI=class{constructor(e,t){this.g=e,this.map=t}};function sp(e){this.l=e||_I,B.PerformanceNavigationTiming?(e=B.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(B.g&&B.g.Ka&&B.g.Ka()&&B.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _I=10;function ip(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function op(e){return e.h?1:e.g?e.g.size:0}function Qa(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Jl(e,t){e.g?e.g.add(t):e.h=t}function ap(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}sp.prototype.cancel=function(){if(this.i=lp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function lp(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ol(e.i)}var AI=class{stringify(e){return B.JSON.stringify(e,void 0)}parse(e){return B.JSON.parse(e,void 0)}};function EI(){this.g=new AI}function vI(e,t,n){const r=n||"";try{Zd(e,function(s,i){let o=s;Ds(s)&&(o=zl(s)),t.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function II(e,t){const n=new yo;if(B.Image){const r=new Image;r.onload=ni(si,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ni(si,n,r,"TestLoadImage: error",!1,t),r.onabort=ni(si,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ni(si,n,r,"TestLoadImage: timeout",!1,t),B.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function si(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch{}}function wo(e){this.l=e.ec||null,this.j=e.ob||!1}Ot(wo,Gl);wo.prototype.g=function(){return new To(this.l,this.j)};wo.prototype.i=function(e){return function(){return e}}({});function To(e,t){Nt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Yl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ot(To,Nt);var Yl=0;b=To.prototype;b.open=function(e,t){if(this.readyState!=Yl)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Es(this)};b.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||B).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};b.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ls(this)),this.readyState=Yl};b.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Es(this)),this.g&&(this.readyState=3,Es(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof B.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cp(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function cp(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}b.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ls(this):Es(this),this.readyState==3&&cp(this)}};b.Za=function(e){this.g&&(this.response=this.responseText=e,Ls(this))};b.Ya=function(e){this.g&&(this.response=e,Ls(this))};b.ka=function(){this.g&&Ls(this)};function Ls(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Es(e)}b.setRequestHeader=function(e,t){this.v.append(e,t)};b.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};b.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Es(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(To.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var wI=B.JSON.parse;function vt(e){Nt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=up,this.L=this.M=!1}Ot(vt,Nt);var up="",TI=/^https?$/i,SI=["POST","PUT"];b=vt.prototype;b.Oa=function(e){this.M=e};b.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ba.g(),this.C=this.u?Ju(this.u):Ju(Ba),this.g.onreadystatechange=Kt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){$u(this,i);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=B.FormData&&e instanceof B.FormData,!(0<=bd(SI,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{dp(this),0<this.B&&((this.L=bI(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kt(this.ua,this)):this.A=Hl(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){$u(this,i)}};function bI(e){return Ar&&typeof e.timeout=="number"&&e.ontimeout!==void 0}b.ua=function(){typeof Nl<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ut(this,"timeout"),this.abort(8))};function $u(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,hp(e),So(e)}function hp(e){e.F||(e.F=!0,Ut(e,"complete"),Ut(e,"error"))}b.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ut(this,"complete"),Ut(this,"abort"),So(this))};b.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),So(this,!0)),vt.$.N.call(this)};b.La=function(){this.s||(this.G||this.v||this.l?fp(this):this.kb())};b.kb=function(){fp(this)};function fp(e){if(e.h&&typeof Nl<"u"&&(!e.C[1]||xe(e)!=4||e.da()!=2)){if(e.v&&xe(e)==4)Hl(e.La,0,e);else if(Ut(e,"readystatechange"),xe(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var s=String(e.I).match(tp)[1]||null;!s&&B.self&&B.self.location&&(s=B.self.location.protocol.slice(0,-1)),r=!TI.test(s?s.toLowerCase():"")}n=r}if(n)Ut(e,"complete"),Ut(e,"success");else{e.m=6;try{var i=2<xe(e)?e.g.statusText:""}catch{i=""}e.j=i+" ["+e.da()+"]",hp(e)}}finally{So(e)}}}}function So(e,t){if(e.g){dp(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ut(e,"ready");try{n.onreadystatechange=r}catch{}}}function dp(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(B.clearTimeout(e.A),e.A=null)}b.isActive=function(){return!!this.g};function xe(e){return e.g?e.g.readyState:0}b.da=function(){try{return 2<xe(this)?this.g.status:-1}catch{return-1}};b.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};b.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),wI(t)}};function Zu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case up:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function RI(e){const t={};e=(e.g&&2<=xe(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(ds(e[r]))continue;var n=$v(e[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}Hv(t,function(r){return r.join(", ")})}b.Ia=function(){return this.m};b.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function pp(e){let t="";return Fl(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function Xl(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=pp(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):pt(e,t,n))}function Br(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function gp(e){this.Ga=0,this.j=[],this.l=new yo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Br("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Br("baseRetryDelayMs",5e3,e),this.hb=Br("retryDelaySeedMs",1e4,e),this.eb=Br("forwardChannelMaxRetries",2,e),this.xa=Br("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new sp(e&&e.concurrentRequestLimit),this.Ja=new EI,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}b=gp.prototype;b.ra=8;b.H=1;function $l(e){if(mp(e),e.H==3){var t=e.W++,n=Ge(e.I);if(pt(n,"SID",e.K),pt(n,"RID",t),pt(n,"TYPE","terminate"),Us(e,n),t=new Ms(e,e.l,t),t.L=2,t.A=Io(Ge(n)),n=!1,B.navigator&&B.navigator.sendBeacon)try{n=B.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&B.Image&&(new Image().src=t.A,n=!0),n||(t.g=Tp(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Fs(t)}Ip(e)}function bo(e){e.g&&(tc(e),e.g.cancel(),e.g=null)}function mp(e){bo(e),e.u&&(B.clearTimeout(e.u),e.u=null),Oi(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&B.clearTimeout(e.m),e.m=null)}function Ro(e){if(!ip(e.i)&&!e.m){e.m=!0;var t=e.Na;gs||Ld(),ms||(gs(),ms=!0),ql.add(t,e),e.C=0}}function CI(e,t){return op(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Ns(Kt(e.Na,e,t),vp(e,e.C)),e.C++,!0)}b.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new Ms(this,this.l,e);let i=this.s;if(this.U&&(i?(i=xd(i),Vd(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=yp(this,s,t),n=Ge(this.I),pt(n,"RID",e),pt(n,"CVER",22),this.F&&pt(n,"X-HTTP-Session-Id",this.F),Us(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(pp(i)))+"&"+t:this.o&&Xl(n,this.o,i)),Jl(this.i,s),this.bb&&pt(n,"TYPE","init"),this.P?(pt(n,"$req",t),pt(n,"SID","null"),s.aa=!0,za(s,n,null)):za(s,n,t),this.H=2}}else this.H==3&&(e?th(this,e):this.j.length==0||ip(this.i)||th(this))};function th(e,t){var n;t?n=t.m:n=e.W++;const r=Ge(e.I);pt(r,"SID",e.K),pt(r,"RID",n),pt(r,"AID",e.V),Us(e,r),e.o&&e.s&&Xl(r,e.o,e.s),n=new Ms(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=yp(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Jl(e.i,n),za(n,r,t)}function Us(e,t){e.na&&Fl(e.na,function(n,r){pt(t,r,n)}),e.h&&Zd({},function(n,r){pt(t,r,n)})}function yp(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Kt(e.h.Va,e.h,e):null;t:{var s=e.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{vI(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function _p(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;gs||Ld(),ms||(gs(),ms=!0),ql.add(t,e),e.A=0}}function Zl(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Ns(Kt(e.Ma,e),vp(e,e.A)),e.A++,!0)}b.Ma=function(){if(this.u=null,Ap(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ns(Kt(this.jb,this),e)}};b.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,$t(10),bo(this),Ap(this))};function tc(e){e.B!=null&&(B.clearTimeout(e.B),e.B=null)}function Ap(e){e.g=new Ms(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Ge(e.wa);pt(t,"RID","rpc"),pt(t,"SID",e.K),pt(t,"AID",e.V),pt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&pt(t,"TO",e.qa),pt(t,"TYPE","xmlhttp"),Us(e,t),e.o&&e.s&&Xl(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Io(Ge(t)),n.u=null,n.S=!0,Jd(n,e)}b.ib=function(){this.v!=null&&(this.v=null,bo(this),Zl(this),$t(19))};function Oi(e){e.v!=null&&(B.clearTimeout(e.v),e.v=null)}function Ep(e,t){var n=null;if(e.g==t){Oi(e),tc(e),e.g=null;var r=2}else if(Qa(e.i,t))n=t.F,ap(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var s=e.C;r=_o(),Ut(r,new Qd(r,n)),Ro(e)}else _p(e);else if(s=t.s,s==3||s==0&&0<t.ca||!(r==1&&CI(e,t)||r==2&&Zl(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:Nn(e,5);break;case 4:Nn(e,10);break;case 3:Nn(e,6);break;default:Nn(e,2)}}}function vp(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Nn(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Kt(e.pb,e);n||(n=new Un("//www.google.com/images/cleardot.gif"),B.location&&B.location.protocol=="http"||ki(n,"https"),Io(n)),II(n.toString(),r)}else $t(2);e.H=0,e.h&&e.h.za(t),Ip(e),mp(e)}b.pb=function(e){e?(this.l.info("Successfully pinged google.com"),$t(2)):(this.l.info("Failed to ping google.com"),$t(1))};function Ip(e){if(e.H=0,e.ma=[],e.h){const t=lp(e.i);(t.length!=0||e.j.length!=0)&&(Qu(e.ma,t),Qu(e.ma,e.j),e.i.i.length=0,Ol(e.j),e.j.length=0),e.h.ya()}}function wp(e,t,n){var r=n instanceof Un?Ge(n):new Un(n);if(r.g!="")t&&(r.g=t+"."+r.g),Ni(r,r.m);else{var s=B.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new Un(null);r&&ki(i,r),t&&(i.g=t),s&&Ni(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&pt(r,n,t),pt(r,"VER",e.ra),Us(e,r),r}function Tp(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new vt(new wo({ob:n})):new vt(e.va),t.Oa(e.J),t}b.isActive=function(){return!!this.h&&this.h.isActive(this)};function Sp(){}b=Sp.prototype;b.Ba=function(){};b.Aa=function(){};b.za=function(){};b.ya=function(){};b.isActive=function(){return!0};b.Va=function(){};function Mi(){if(Ar&&!(10<=Number(jv)))throw Error("Environmental error: no available transport.")}Mi.prototype.g=function(e,t){return new le(e,t)};function le(e,t){Nt.call(this),this.g=new gp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ds(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ds(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new xr(this)}Ot(le,Nt);le.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;$t(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=wp(e,null,e.Y),Ro(e)};le.prototype.close=function(){$l(this.g)};le.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=zl(e),e=n);t.j.push(new yI(t.fb++,e)),t.H==3&&Ro(t)};le.prototype.N=function(){this.g.h=null,delete this.j,$l(this.g),delete this.g,le.$.N.call(this)};function bp(e){Kl.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Ot(bp,Kl);function Rp(){Wl.call(this),this.status=1}Ot(Rp,Wl);function xr(e){this.g=e}Ot(xr,Sp);xr.prototype.Ba=function(){Ut(this.g,"a")};xr.prototype.Aa=function(e){Ut(this.g,new bp(e))};xr.prototype.za=function(e){Ut(this.g,new Rp)};xr.prototype.ya=function(){Ut(this.g,"b")};function PI(){this.blockSize=-1}function Ae(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ot(Ae,PI);Ae.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ha(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[1]+3905402710&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[5]+1200080426&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[9]+2336552879&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[13]+4254626195&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(s^i&(n^s))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[6]+3225465664&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[10]+38016083&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[14]+3275163606&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[2]+4243563512&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(n^s^i)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[8]+2272392833&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[4]+1272893353&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[0]+3936430074&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[12]+3873151461&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(s^(n|~i))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[7]+1126891415&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[3]+2399980690&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[15]+4264355552&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[11]+3174756917&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}Ae.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(s==0)for(;i<=n;)ha(this,e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){ha(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){ha(this,r),s=0;break}}this.h=s,this.i+=t};Ae.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function ot(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=e[s]|0;r&&i==t||(n[s]=i,r=!1)}this.g=n}var xI={};function ec(e){return-128<=e&&128>e?Lv(e,function(t){return new ot([t|0],0>t?-1:0)}):new ot([e|0],0>e?-1:0)}function Ve(e){if(isNaN(e)||!isFinite(e))return hr;if(0>e)return Ft(Ve(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Ha;return new ot(t,0)}function Cp(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Ft(Cp(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ve(Math.pow(t,8)),r=hr,s=0;s<e.length;s+=8){var i=Math.min(8,e.length-s),o=parseInt(e.substring(s,s+i),t);8>i?(i=Ve(Math.pow(t,i)),r=r.R(i).add(Ve(o))):(r=r.R(n),r=r.add(Ve(o)))}return r}var Ha=4294967296,hr=ec(0),Ga=ec(1),eh=ec(16777216);b=ot.prototype;b.ea=function(){if(ce(this))return-Ft(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Ha+r)*t,t*=Ha}return e};b.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Ue(this))return"0";if(ce(this))return"-"+Ft(this).toString(e);for(var t=Ve(Math.pow(e,6)),n=this,r="";;){var s=Li(n,t).g;n=Fi(n,s.R(t));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=s,Ue(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};b.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Ue(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function ce(e){return e.h==-1}b.X=function(e){return e=Fi(this,e),ce(e)?-1:Ue(e)?0:1};function Ft(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new ot(n,~e.h).add(Ga)}b.abs=function(){return ce(this)?Ft(this):this};b.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(this.D(s)&65535)+(e.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new ot(n,n[n.length-1]&-2147483648?-1:0)};function Fi(e,t){return e.add(Ft(t))}b.R=function(e){if(Ue(this)||Ue(e))return hr;if(ce(this))return ce(e)?Ft(this).R(Ft(e)):Ft(Ft(this).R(e));if(ce(e))return Ft(this.R(Ft(e)));if(0>this.X(eh)&&0>e.X(eh))return Ve(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(s)>>>16,l=e.D(s)&65535;n[2*r+2*s]+=o*l,ii(n,2*r+2*s),n[2*r+2*s+1]+=i*l,ii(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,ii(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,ii(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new ot(n,0)};function ii(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function jr(e,t){this.g=e,this.h=t}function Li(e,t){if(Ue(t))throw Error("division by zero");if(Ue(e))return new jr(hr,hr);if(ce(e))return t=Li(Ft(e),t),new jr(Ft(t.g),Ft(t.h));if(ce(t))return t=Li(e,Ft(t)),new jr(Ft(t.g),t.h);if(30<e.g.length){if(ce(e)||ce(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Ga,r=t;0>=r.X(e);)n=nh(n),r=nh(r);var s=nr(n,1),i=nr(r,1);for(r=nr(r,2),n=nr(n,2);!Ue(r);){var o=i.add(r);0>=o.X(e)&&(s=s.add(n),i=o),r=nr(r,1),n=nr(n,1)}return t=Fi(e,s.R(t)),new jr(s,t)}for(s=hr;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Ve(n),o=i.R(t);ce(o)||0<o.X(e);)n-=r,i=Ve(n),o=i.R(t);Ue(i)&&(i=Ga),s=s.add(i),e=Fi(e,o)}return new jr(s,e)}b.gb=function(e){return Li(this,e).h};b.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new ot(n,this.h&e.h)};b.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new ot(n,this.h|e.h)};b.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new ot(n,this.h^e.h)};function nh(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new ot(n,e.h)}function nr(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new ot(s,e.h)}Mi.prototype.createWebChannel=Mi.prototype.g;le.prototype.send=le.prototype.u;le.prototype.open=le.prototype.m;le.prototype.close=le.prototype.close;Ao.NO_ERROR=0;Ao.TIMEOUT=8;Ao.HTTP_ERROR=6;Hd.COMPLETE="complete";Gd.EventType=Os;Os.OPEN="a";Os.CLOSE="b";Os.ERROR="c";Os.MESSAGE="d";Nt.prototype.listen=Nt.prototype.O;vt.prototype.listenOnce=vt.prototype.P;vt.prototype.getLastError=vt.prototype.Sa;vt.prototype.getLastErrorCode=vt.prototype.Ia;vt.prototype.getStatus=vt.prototype.da;vt.prototype.getResponseJson=vt.prototype.Wa;vt.prototype.getResponseText=vt.prototype.ja;vt.prototype.send=vt.prototype.ha;vt.prototype.setWithCredentials=vt.prototype.Oa;Ae.prototype.digest=Ae.prototype.l;Ae.prototype.reset=Ae.prototype.reset;Ae.prototype.update=Ae.prototype.j;ot.prototype.add=ot.prototype.add;ot.prototype.multiply=ot.prototype.R;ot.prototype.modulo=ot.prototype.gb;ot.prototype.compare=ot.prototype.X;ot.prototype.toNumber=ot.prototype.ea;ot.prototype.toString=ot.prototype.toString;ot.prototype.getBits=ot.prototype.D;ot.fromNumber=Ve;ot.fromString=Cp;var VI=function(){return new Mi},DI=function(){return _o()},fa=Ao,kI=Hd,NI=Jn,rh={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},oi=Gd,OI=vt,MI=Ae,fr=ot;const sh="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vr="10.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new Rl("@firebase/firestore");function zr(){return Qn.logLevel}function S(e,...t){if(Qn.logLevel<=tt.DEBUG){const n=t.map(nc);Qn.debug(`Firestore (${Vr}): ${e}`,...n)}}function Oe(e,...t){if(Qn.logLevel<=tt.ERROR){const n=t.map(nc);Qn.error(`Firestore (${Vr}): ${e}`,...n)}}function Er(e,...t){if(Qn.logLevel<=tt.WARN){const n=t.map(nc);Qn.warn(`Firestore (${Vr}): ${e}`,...n)}}function nc(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(e="Unexpected state"){const t=`FIRESTORE (${Vr}) INTERNAL ASSERTION FAILED: `+e;throw Oe(t),new Error(t)}function ft(e,t){e||U()}function Q(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class x extends En{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class FI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(qt.UNAUTHENTICATED))}shutdown(){}}class LI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class UI{constructor(t){this.t=t,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ze;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ze,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{S("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(S("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ze)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(S("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string"),new Pp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ft(t===null||typeof t=="string"),new qt(t)}}class BI{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jI{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new BI(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zI{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qI{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=i=>{i.error!=null&&S("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,S("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{S("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):S("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ft(typeof n.token=="string"),this.R=n.token,new zI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=QI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%t.length))}return r}}function rt(e,t){return e<t?-1:e>t?1:0}function vr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new x(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new x(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new x(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new x(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ct.fromMillis(Date.now())}static fromDate(t){return Ct.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Ct(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?rt(this.nanoseconds,t.nanoseconds):rt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(t){this.timestamp=t}static fromTimestamp(t){return new z(t)}static min(){return new z(new Ct(0,0))}static max(){return new z(new Ct(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(t,n,r){n===void 0?n=0:n>t.length&&U(),r===void 0?r=t.length-n:r>t.length-n&&U(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return vs.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof vs?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=t.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class gt extends vs{construct(t,n,r){return new gt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new x(y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new gt(n)}static emptyPath(){return new gt([])}}const HI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends vs{construct(t,n,r){return new Lt(t,n,r)}static isValidIdentifier(t){return HI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Lt(["__name__"])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new x(y.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new x(y.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new x(y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new x(y.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Lt(n)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(t){this.path=t}static fromPath(t){return new M(gt.fromString(t))}static fromName(t){return new M(gt.fromString(t).popFirst(5))}static empty(){return new M(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&gt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return gt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new M(new gt(t.slice()))}}function GI(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=z.fromTimestamp(r===1e9?new Ct(n+1,0):new Ct(n,r));return new yn(s,M.empty(),t)}function KI(e){return new yn(e.readTime,e.key,-1)}class yn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new yn(z.min(),M.empty(),-1)}static max(){return new yn(z.max(),M.empty(),-1)}}function WI(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=M.comparator(e.documentKey,t.documentKey),n!==0?n:rt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bs(e){if(e.code!==y.FAILED_PRECONDITION||e.message!==JI)throw e;S("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&U(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new _((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof _?n:_.resolve(n)}catch(n){return _.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):_.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):_.reject(n)}static resolve(t){return new _((n,r)=>{n(t)})}static reject(t){return new _((n,r)=>{r(t)})}static waitFor(t){return new _((n,r)=>{let s=0,i=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(t){let n=_.resolve(!1);for(const r of t)n=n.next(s=>s?_.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new _((r,s)=>{const i=t.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(t,n){return new _((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new ze,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ns(t,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=sc(r.target.error);this.V.reject(new ns(t,s))}}static open(t,n,r,s){try{return new rc(n,t.transaction(s,r))}catch(i){throw new ns(n,i)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(S("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new $I(n)}}class On{constructor(t,n,r){this.name=t,this.version=n,this.p=r,On.S(Ci())===12.2&&Oe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return S("SimpleDb","Removing database:",t),xn(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!bl())return!1;if(On.C())return!0;const t=Ci(),n=On.S(t),r=0<n&&n<10,s=On.v(t),i=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||i)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static S(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(t){const n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(t){return this.db||(S("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new ns(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new x(y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new x(y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ns(t,o))},s.onupgradeneeded=i=>{S("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{S("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(t){this.L=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(t);const a=rc.open(this.db,t,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),_.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(S("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class XI{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return xn(this.k.delete())}}class ns extends x{constructor(t,n){super(y.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function js(e){return e.name==="IndexedDbTransactionError"}class $I{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(S("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(S("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),xn(r)}add(t){return S("SimpleDb","ADD",this.store.name,t,t),xn(this.store.add(t))}get(t){return xn(this.store.get(t)).next(n=>(n===void 0&&(n=null),S("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return S("SimpleDb","DELETE",this.store.name,t),xn(this.store.delete(t))}count(){return S("SimpleDb","COUNT",this.store.name),xn(this.store.count())}W(t,n){const r=this.options(t,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new _((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,l)=>{o.push(l)}).next(()=>o)}}j(t,n){const r=this.store.getAll(t,n===null?void 0:n);return new _((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(t,n){S("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(t,n){let r;n?r=t:(r={},n=t);const s=this.cursor(r);return this.G(s,n)}Z(t){const n=this.cursor({});return new _((r,s)=>{n.onerror=i=>{const o=sc(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(t,n){const r=[];return new _((s,i)=>{t.onerror=o=>{i(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new XI(a),c=n(a.primaryKey,a.value,l);if(c instanceof _){const u=c.catch(h=>(l.done(),_.reject(h)));r.push(u)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>_.waitFor(r))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const r=this.store.index(t.index);return t.J?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function xn(e){return new _((t,n)=>{e.onsuccess=r=>{const s=r.target.result;t(s)},e.onerror=r=>{const s=sc(r.target.error);n(s)}})}let ih=!1;function sc(e){const t=On.S(Ci());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){const r=new x("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ih||(ih=!0,setTimeout(()=>{throw r},0)),r}}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}ic._e=-1;function Co(e){return e==null}function Ui(e){return e===0&&1/e==-1/0}function ZI(e){return typeof e=="number"&&Number.isInteger(e)&&!Ui(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Dr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vp(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t,n){this.comparator=t,this.root=n||Mt.EMPTY}insert(t,n){return new Et(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Mt.BLACK,null,null))}remove(t){return new Et(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Mt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ai(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ai(this.root,t,this.comparator,!1)}getReverseIterator(){return new ai(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ai(this.root,t,this.comparator,!0)}}class ai{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Mt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Mt.RED,this.left=s??Mt.EMPTY,this.right=i??Mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Mt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Mt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Mt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw U();const t=this.left.check();if(t!==this.right.check())throw U();return t+(this.isRed()?0:1)}}Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1;Mt.EMPTY=new class{constructor(){this.size=0}get key(){throw U()}get value(){throw U()}get color(){throw U()}get left(){throw U()}get right(){throw U()}copy(t,n,r,s,i){return this}insert(t,n,r){return new Mt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.comparator=t,this.data=new Et(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new ah(this.data.getIterator())}getIteratorFrom(t){return new ah(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Bt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Bt(this.comparator);return n.data=t,n}}class ah{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t){this.fields=t,t.sort(Lt.comparator)}static empty(){return new me([])}unionWith(t){let n=new Bt(Lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new me(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return vr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Dp("Invalid base64 string: "+i):i}}(t);return new Jt(n)}static fromUint8Array(t){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(t);return new Jt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return rt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const tw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _n(e){if(ft(!!e),typeof e=="string"){let t=0;const n=tw.exec(e);if(ft(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:St(e.seconds),nanos:St(e.nanos)}}function St(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Hn(e){return typeof e=="string"?Jt.fromBase64String(e):Jt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ac(e){const t=e.mapValue.fields.__previous_value__;return oc(t)?ac(t):t}function Is(e){const t=_n(e.mapValue.fields.__local_write_time__.timestampValue);return new Ct(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(t,n,r,s,i,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ws{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new ws("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof ws&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Gn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?oc(e)?4:nw(e)?9007199254740991:10:U()}function Me(e,t){if(e===t)return!0;const n=Gn(e);if(n!==Gn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Is(e).isEqual(Is(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=_n(s.timestampValue),a=_n(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return Hn(s.bytesValue).isEqual(Hn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return St(s.geoPointValue.latitude)===St(i.geoPointValue.latitude)&&St(s.geoPointValue.longitude)===St(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return St(s.integerValue)===St(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=St(s.doubleValue),a=St(i.doubleValue);return o===a?Ui(o)===Ui(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return vr(e.arrayValue.values||[],t.arrayValue.values||[],Me);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(oh(o)!==oh(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Me(o[l],a[l])))return!1;return!0}(e,t);default:return U()}}function Ts(e,t){return(e.values||[]).find(n=>Me(n,t))!==void 0}function Ir(e,t){if(e===t)return 0;const n=Gn(e),r=Gn(t);if(n!==r)return rt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(e.booleanValue,t.booleanValue);case 2:return function(i,o){const a=St(i.integerValue||i.doubleValue),l=St(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return lh(e.timestampValue,t.timestampValue);case 4:return lh(Is(e),Is(t));case 5:return rt(e.stringValue,t.stringValue);case 6:return function(i,o){const a=Hn(i),l=Hn(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=rt(a[c],l[c]);if(u!==0)return u}return rt(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const a=rt(St(i.latitude),St(o.latitude));return a!==0?a:rt(St(i.longitude),St(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Ir(a[c],l[c]);if(u)return u}return rt(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===li.mapValue&&o===li.mapValue)return 0;if(i===li.mapValue)return 1;if(o===li.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const p=rt(l[h],u[h]);if(p!==0)return p;const g=Ir(a[l[h]],c[u[h]]);if(g!==0)return g}return rt(l.length,u.length)}(e.mapValue,t.mapValue);default:throw U()}}function lh(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return rt(e,t);const n=_n(e),r=_n(t),s=rt(n.seconds,r.seconds);return s!==0?s:rt(n.nanos,r.nanos)}function wr(e){return Ka(e)}function Ka(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=_n(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Hn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return M.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ka(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ka(n.fields[o])}`;return s+"}"}(e.mapValue):U()}function ch(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Wa(e){return!!e&&"integerValue"in e}function lc(e){return!!e&&"arrayValue"in e}function uh(e){return!!e&&"nullValue"in e}function hh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function yi(e){return!!e&&"mapValue"in e}function rs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Dr(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=rs(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=rs(e.arrayValue.values[n]);return t}return Object.assign({},e)}function nw(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t){this.value=t}static empty(){return new ue({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!yi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=rs(n)}setAll(t){let n=Lt.emptyPath(),r={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=rs(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());yi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Me(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];yi(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Dr(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new ue(rs(this.value))}}function kp(e){const t=[];return Dr(e.fields,(n,r)=>{const s=new Lt([n]);if(yi(r)){const i=kp(r.mapValue).fields;if(i.length===0)t.push(s);else for(const o of i)t.push(s.child(o))}else t.push(s)}),new me(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(t,n,r,s,i,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Qt(t,0,z.min(),z.min(),z.min(),ue.empty(),0)}static newFoundDocument(t,n,r,s){return new Qt(t,1,n,z.min(),r,s,0)}static newNoDocument(t,n){return new Qt(t,2,n,z.min(),z.min(),ue.empty(),0)}static newUnknownDocument(t,n){return new Qt(t,3,n,z.min(),z.min(),ue.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ue.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Qt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t,n){this.position=t,this.inclusive=n}}function fh(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(i.field.isKeyField()?r=M.comparator(M.fromName(o.referenceValue),n.key):r=Ir(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function dh(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Me(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(t,n="asc"){this.field=t,this.dir=n}}function rw(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{}class bt extends Np{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new iw(t,n,r):n==="array-contains"?new lw(t,r):n==="in"?new cw(t,r):n==="not-in"?new uw(t,r):n==="array-contains-any"?new hw(t,r):new bt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new ow(t,r):new aw(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ir(n,this.value)):n!==null&&Gn(this.value)===Gn(n)&&this.matchesComparison(Ir(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return U()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ee extends Np{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new Ee(t,n)}matches(t){return Op(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Op(e){return e.op==="and"}function Mp(e){return sw(e)&&Op(e)}function sw(e){for(const t of e.filters)if(t instanceof Ee)return!1;return!0}function Ja(e){if(e instanceof bt)return e.field.canonicalString()+e.op.toString()+wr(e.value);if(Mp(e))return e.filters.map(t=>Ja(t)).join(",");{const t=e.filters.map(n=>Ja(n)).join(",");return`${e.op}(${t})`}}function Fp(e,t){return e instanceof bt?function(r,s){return s instanceof bt&&r.op===s.op&&r.field.isEqual(s.field)&&Me(r.value,s.value)}(e,t):e instanceof Ee?function(r,s){return s instanceof Ee&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Fp(o,s.filters[a]),!0):!1}(e,t):void U()}function Lp(e){return e instanceof bt?function(n){return`${n.field.canonicalString()} ${n.op} ${wr(n.value)}`}(e):e instanceof Ee?function(n){return n.op.toString()+" {"+n.getFilters().map(Lp).join(" ,")+"}"}(e):"Filter"}class iw extends bt{constructor(t,n,r){super(t,n,r),this.key=M.fromName(r.referenceValue)}matches(t){const n=M.comparator(t.key,this.key);return this.matchesComparison(n)}}class ow extends bt{constructor(t,n){super(t,"in",n),this.keys=Up("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class aw extends bt{constructor(t,n){super(t,"not-in",n),this.keys=Up("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Up(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>M.fromName(r.referenceValue))}class lw extends bt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return lc(n)&&Ts(n.arrayValue,this.value)}}class cw extends bt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ts(this.value.arrayValue,n)}}class uw extends bt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ts(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Ts(this.value.arrayValue,n)}}class hw extends bt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!lc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ts(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(t,n=null,r=[],s=[],i=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function ph(e,t=null,n=[],r=[],s=null,i=null,o=null){return new fw(e,t,n,r,s,i,o)}function cc(e){const t=Q(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Ja(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Co(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>wr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>wr(r)).join(",")),t.ce=n}return t.ce}function uc(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!rw(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Fp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!dh(e.startAt,t.startAt)&&dh(e.endAt,t.endAt)}function Ya(e){return M.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function dw(e,t,n,r,s,i,o,a){return new kr(e,t,n,r,s,i,o,a)}function Bp(e){return new kr(e)}function gh(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function jp(e){return e.collectionGroup!==null}function ss(e){const t=Q(e);if(t.le===null){t.le=[];const n=new Set;for(const i of t.explicitOrderBy)t.le.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Bt(Lt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.le.push(new Ss(i,r))}),n.has(Lt.keyField().canonicalString())||t.le.push(new Ss(Lt.keyField(),r))}return t.le}function ke(e){const t=Q(e);return t.he||(t.he=pw(t,ss(e))),t.he}function pw(e,t){if(e.limitType==="F")return ph(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ss(s.field,i)});const n=e.endAt?new Bi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Bi(e.startAt.position,e.startAt.inclusive):null;return ph(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Xa(e,t){const n=e.filters.concat([t]);return new kr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ji(e,t,n){return new kr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Po(e,t){return uc(ke(e),ke(t))&&e.limitType===t.limitType}function zp(e){return`${cc(ke(e))}|lt:${e.limitType}`}function rr(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Lp(s)).join(", ")}]`),Co(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>wr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>wr(s)).join(",")),`Target(${r})`}(ke(e))}; limitType=${e.limitType})`}function xo(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):M.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of ss(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=fh(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ss(r),s)||r.endAt&&!function(o,a,l){const c=fh(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ss(r),s))}(e,t)}function gw(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function qp(e){return(t,n)=>{let r=!1;for(const s of ss(e)){const i=mw(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function mw(e,t,n){const r=e.field.isKeyField()?M.comparator(t.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ir(l,c):U()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return U()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Dr(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Vp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=new Et(M.comparator);function Ke(){return yw}const Qp=new Et(M.comparator);function Gr(...e){let t=Qp;for(const n of e)t=t.insert(n.key,n);return t}function Hp(e){let t=Qp;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Mn(){return is()}function Gp(){return is()}function is(){return new Nr(e=>e.toString(),(e,t)=>e.isEqual(t))}const _w=new Et(M.comparator),Aw=new Bt(M.comparator);function J(...e){let t=Aw;for(const n of e)t=t.add(n);return t}const Ew=new Bt(rt);function vw(){return Ew}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ui(t)?"-0":t}}function Wp(e){return{integerValue:""+e}}function Iw(e,t){return ZI(t)?Wp(t):Kp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this._=void 0}}function ww(e,t,n){return e instanceof zi?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&oc(i)&&(i=ac(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,t):e instanceof bs?Yp(e,t):e instanceof Rs?Xp(e,t):function(s,i){const o=Jp(s,i),a=mh(o)+mh(s.Ie);return Wa(o)&&Wa(s.Ie)?Wp(a):Kp(s.serializer,a)}(e,t)}function Tw(e,t,n){return e instanceof bs?Yp(e,t):e instanceof Rs?Xp(e,t):n}function Jp(e,t){return e instanceof qi?function(r){return Wa(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class zi extends Vo{}class bs extends Vo{constructor(t){super(),this.elements=t}}function Yp(e,t){const n=$p(t);for(const r of e.elements)n.some(s=>Me(s,r))||n.push(r);return{arrayValue:{values:n}}}class Rs extends Vo{constructor(t){super(),this.elements=t}}function Xp(e,t){let n=$p(t);for(const r of e.elements)n=n.filter(s=>!Me(s,r));return{arrayValue:{values:n}}}class qi extends Vo{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function mh(e){return St(e.integerValue||e.doubleValue)}function $p(e){return lc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function Sw(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof bs&&s instanceof bs||r instanceof Rs&&s instanceof Rs?vr(r.elements,s.elements,Me):r instanceof qi&&s instanceof qi?Me(r.Ie,s.Ie):r instanceof zi&&s instanceof zi}(e.transform,t.transform)}class bw{constructor(t,n){this.version=t,this.transformResults=n}}class qe{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new qe}static exists(t){return new qe(void 0,t)}static updateTime(t){return new qe(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function _i(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Do{}function Zp(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new eg(e.key,qe.none()):new zs(e.key,e.data,qe.none());{const n=e.data,r=ue.empty();let s=new Bt(Lt.comparator);for(let i of t.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Yn(e.key,r,new me(s.toArray()),qe.none())}}function Rw(e,t,n){e instanceof zs?function(s,i,o){const a=s.value.clone(),l=_h(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Yn?function(s,i,o){if(!_i(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=_h(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(tg(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function os(e,t,n,r){return e instanceof zs?function(i,o,a,l){if(!_i(i.precondition,o))return a;const c=i.value.clone(),u=Ah(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,r):e instanceof Yn?function(i,o,a,l){if(!_i(i.precondition,o))return a;const c=Ah(i.fieldTransforms,l,o),u=o.data;return u.setAll(tg(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(e,t,n,r):function(i,o,a){return _i(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function Cw(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=Jp(r.transform,s||null);i!=null&&(n===null&&(n=ue.empty()),n.set(r.field,i))}return n||null}function yh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&vr(r,s,(i,o)=>Sw(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class zs extends Do{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yn extends Do{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function tg(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function _h(e,t,n){const r=new Map;ft(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,Tw(o,a,n[s]))}return r}function Ah(e,t,n){const r=new Map;for(const s of e){const i=s.transform,o=n.data.field(s.field);r.set(s.field,ww(i,o,t))}return r}class eg extends Do{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pw extends Do{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&Rw(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=os(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=os(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Gp();return this.mutations.forEach(s=>{const i=t.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=Zp(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(z.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),J())}isEqual(t){return this.batchId===t.batchId&&vr(this.mutations,t.mutations,(n,r)=>yh(n,r))&&vr(this.baseMutations,t.baseMutations,(n,r)=>yh(n,r))}}class hc{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){ft(t.mutations.length===r.length);let s=function(){return _w}();const i=t.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new hc(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,X;function kw(e){switch(e){default:return U();case y.CANCELLED:case y.UNKNOWN:case y.DEADLINE_EXCEEDED:case y.RESOURCE_EXHAUSTED:case y.INTERNAL:case y.UNAVAILABLE:case y.UNAUTHENTICATED:return!1;case y.INVALID_ARGUMENT:case y.NOT_FOUND:case y.ALREADY_EXISTS:case y.PERMISSION_DENIED:case y.FAILED_PRECONDITION:case y.ABORTED:case y.OUT_OF_RANGE:case y.UNIMPLEMENTED:case y.DATA_LOSS:return!0}}function ng(e){if(e===void 0)return Oe("GRPC error has no .code"),y.UNKNOWN;switch(e){case Tt.OK:return y.OK;case Tt.CANCELLED:return y.CANCELLED;case Tt.UNKNOWN:return y.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return y.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return y.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return y.INTERNAL;case Tt.UNAVAILABLE:return y.UNAVAILABLE;case Tt.UNAUTHENTICATED:return y.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return y.INVALID_ARGUMENT;case Tt.NOT_FOUND:return y.NOT_FOUND;case Tt.ALREADY_EXISTS:return y.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return y.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return y.FAILED_PRECONDITION;case Tt.ABORTED:return y.ABORTED;case Tt.OUT_OF_RANGE:return y.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return y.UNIMPLEMENTED;case Tt.DATA_LOSS:return y.DATA_LOSS;default:return U()}}(X=Tt||(Tt={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=new fr([4294967295,4294967295],0);function Eh(e){const t=Nw().encode(e),n=new MI;return n.update(t),new Uint8Array(n.digest())}function vh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new fr([n,r],0),new fr([s,i],0)]}class fc{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Kr(`Invalid padding: ${n}`);if(r<0)throw new Kr(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Kr(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Kr(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=fr.fromNumber(this.Te)}de(t,n,r){let s=t.add(n.multiply(fr.fromNumber(r)));return s.compare(Ow)===1&&(s=new fr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Eh(t),[r,s]=vh(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new fc(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=Eh(t),[r,s]=vh(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Kr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,qs.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new ko(z.min(),s,new Et(rt),Ke(),J())}}class qs{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new qs(r,n,J(),J(),J())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t,n,r,s){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=s}}class rg{constructor(t,n){this.targetId=t,this.fe=n}}class sg{constructor(t,n,r=Jt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ih{constructor(){this.ge=0,this.pe=Th(),this.ye=Jt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=J(),n=J(),r=J();return this.pe.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:U()}}),new qs(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=Th()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,ft(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class Mw{constructor(t){this.Be=t,this.ke=new Map,this.qe=Ke(),this.Qe=wh(),this.Ke=new Et(rt)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:U()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(t){const n=t.targetId,r=t.fe.count,s=this.Ye(n);if(s){const i=s.target;if(Ya(i))if(r===0){const o=new M(i.path);this.We(n,o,Qt.newNoDocument(o,z.min()))}else ft(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),l=a?this.et(a,t,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Hn(r).toUint8Array()}catch(l){if(l instanceof Dp)return Er("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new fc(o,s,i)}catch(l){return Er(l instanceof Kr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(a)||(this.We(n,i,null),s++)}),s}it(t){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&Ya(a.target)){const l=new M(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Qt.newNoDocument(l,t))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=J();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(t));const s=new ko(t,n,this.Ke,this.qe,r);return this.qe=Ke(),this.Qe=wh(),this.Ke=new Et(rt),s}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const s=this.ze(t);this.st(t,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new Ih,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new Bt(rt),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||S("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Be._t(t)}He(t){this.ke.set(t,new Ih),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function wh(){return new Et(M.comparator)}function Th(){return new Et(M.comparator)}const Fw={asc:"ASCENDING",desc:"DESCENDING"},Lw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uw={and:"AND",or:"OR"};class Bw{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function $a(e,t){return e.useProto3Json||Co(t)?t:{value:t}}function Qi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ig(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function jw(e,t){return Qi(e,t.toTimestamp())}function Ne(e){return ft(!!e),z.fromTimestamp(function(n){const r=_n(n);return new Ct(r.seconds,r.nanos)}(e))}function dc(e,t){return Za(e,t).canonicalString()}function Za(e,t){const n=function(s){return new gt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function og(e){const t=gt.fromString(e);return ft(hg(t)),t}function tl(e,t){return dc(e.databaseId,t.path)}function da(e,t){const n=og(t);if(n.get(1)!==e.databaseId.projectId)throw new x(y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new x(y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new M(lg(n))}function ag(e,t){return dc(e.databaseId,t)}function zw(e){const t=og(e);return t.length===4?gt.emptyPath():lg(t)}function el(e){return new gt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function lg(e){return ft(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Sh(e,t,n){return{name:tl(e,t),fields:n.value.mapValue.fields}}function qw(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:U()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(ft(u===void 0||typeof u=="string"),Jt.fromBase64String(u||"")):(ft(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Jt.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?y.UNKNOWN:ng(c.code);return new x(u,c.message||"")}(o);n=new sg(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=da(e,r.document.name),i=Ne(r.document.updateTime),o=r.document.createTime?Ne(r.document.createTime):z.min(),a=new ue({mapValue:{fields:r.document.fields}}),l=Qt.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ai(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=da(e,r.document),i=r.readTime?Ne(r.readTime):z.min(),o=Qt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ai([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=da(e,r.document),i=r.removedTargetIds||[];n=new Ai([],i,s,null)}else{if(!("filter"in t))return U();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Dw(s,i),a=r.targetId;n=new rg(a,o)}}return n}function Qw(e,t){let n;if(t instanceof zs)n={update:Sh(e,t.key,t.value)};else if(t instanceof eg)n={delete:tl(e,t.key)};else if(t instanceof Yn)n={update:Sh(e,t.key,t.data),updateMask:Zw(t.fieldMask)};else{if(!(t instanceof Pw))return U();n={verify:tl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof zi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Rs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qi)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw U()}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:jw(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:U()}(e,t.precondition)),n}function Hw(e,t){return e&&e.length>0?(ft(t!==void 0),e.map(n=>function(s,i){let o=s.updateTime?Ne(s.updateTime):Ne(i);return o.isEqual(z.min())&&(o=Ne(i)),new bw(o,s.transformResults||[])}(n,t))):[]}function Gw(e,t){return{documents:[ag(e,t.path)]}}function Kw(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ag(e,s);const i=function(c){if(c.length!==0)return ug(Ee.create(c,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:sr(p.field),direction:Yw(p.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=$a(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{ut:n,parent:s}}function Ww(e){let t=zw(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ft(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let i=[];n.where&&(i=function(h){const p=cg(h);return p instanceof Ee&&Mp(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(D){return new Ss(ir(D.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Co(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,g=h.values||[];return new Bi(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,g=h.values||[];return new Bi(g,p)}(n.endAt)),dw(t,s,o,i,a,"F",l,c)}function Jw(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return U()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function cg(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ir(n.unaryFilter.field);return bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ir(n.unaryFilter.field);return bt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ir(n.unaryFilter.field);return bt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ir(n.unaryFilter.field);return bt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return U()}}(e):e.fieldFilter!==void 0?function(n){return bt.create(ir(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return U()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Ee.create(n.compositeFilter.filters.map(r=>cg(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return U()}}(n.compositeFilter.op))}(e):U()}function Yw(e){return Fw[e]}function Xw(e){return Lw[e]}function $w(e){return Uw[e]}function sr(e){return{fieldPath:e.canonicalString()}}function ir(e){return Lt.fromServerFormat(e.fieldPath)}function ug(e){return e instanceof bt?function(n){if(n.op==="=="){if(hh(n.value))return{unaryFilter:{field:sr(n.field),op:"IS_NAN"}};if(uh(n.value))return{unaryFilter:{field:sr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hh(n.value))return{unaryFilter:{field:sr(n.field),op:"IS_NOT_NAN"}};if(uh(n.value))return{unaryFilter:{field:sr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sr(n.field),op:Xw(n.op),value:n.value}}}(e):e instanceof Ee?function(n){const r=n.getFilters().map(s=>ug(s));return r.length===1?r[0]:{compositeFilter:{op:$w(n.op),filters:r}}}(e):U()}function Zw(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function hg(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t,n,r,s,i=z.min(),o=z.min(),a=Jt.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new nn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new nn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new nn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new nn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(t){this.ct=t}}function eT(e){const t=Ww({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ji(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this._n=new rT}addToCollectionParentIndex(t,n){return this._n.add(n),_.resolve()}getCollectionParents(t,n){return _.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return _.resolve()}deleteFieldIndex(t,n){return _.resolve()}deleteAllFieldIndexes(t){return _.resolve()}createTargetIndexes(t,n){return _.resolve()}getDocumentsMatchingTarget(t,n){return _.resolve(null)}getIndexType(t,n){return _.resolve(0)}getFieldIndexes(t,n){return _.resolve([])}getNextCollectionGroupToUpdate(t){return _.resolve(null)}getMinOffset(t,n){return _.resolve(yn.min())}getMinOffsetFromCollectionGroup(t,n){return _.resolve(yn.min())}updateCollectionGroup(t,n,r){return _.resolve()}updateIndexEntries(t,n){return _.resolve()}}class rT{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Bt(gt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Bt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Tr(0)}static Ln(){return new Tr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.changes=new Nr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Qt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?_.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&os(r.mutation,s,me.empty(),Ct.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,J()).next(()=>r))}getLocalViewOfDocuments(t,n,r=J()){const s=Mn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let o=Gr();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Mn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,J()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,s){let i=Ke();const o=is(),a=function(){return is()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Yn)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),os(u.mutation,c,u.mutation.getFieldMask(),Ct.now())):o.set(c.key,me.empty())}),this.recalculateAndSaveOverlays(t,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new iT(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const r=is();let s=new Et((o,a)=>o-a),i=J();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||me.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||J()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=Gp();u.forEach(p=>{if(!i.has(p)){const g=Zp(n.get(p),r.get(p));g!==null&&h.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,h))}return _.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(o){return M.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):jp(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):_.resolve(Mn());let a=-1,l=i;return o.next(c=>_.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?_.resolve():this.remoteDocumentCache.getEntry(t,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(t,c,i)).next(()=>this.computeViews(t,l,c,J())).next(u=>({batchId:a,changes:Hp(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new M(n)).next(r=>{let s=Gr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let o=Gr();return this.indexManager.getCollectionParents(t,i).next(a=>_.forEach(a,l=>{const c=function(h,p){return new kr(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(t,c,r,s).next(u=>{u.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Qt.newInvalidDocument(u)))});let a=Gr();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&os(u.mutation,c,me.empty(),Ct.now()),xo(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return _.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ne(s.createTime)}}(n)),_.resolve()}getNamedQuery(t,n){return _.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(s){return{name:s.name,query:eT(s.bundledQuery),readTime:Ne(s.readTime)}}(n)),_.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.overlays=new Et(M.comparator),this.hr=new Map}getOverlay(t,n){return _.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Mn();return _.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.ht(t,n,i)}),_.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),_.resolve()}getOverlaysForCollection(t,n,r){const s=Mn(),i=n.length+1,o=new M(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return _.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Et((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Mn(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Mn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return _.resolve(a)}ht(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Vw(n,r));let i=this.hr.get(n);i===void 0&&(i=J(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(){this.Pr=new Bt(Vt.Ir),this.Tr=new Bt(Vt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Vt(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Vt(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new M(new gt([])),r=new Vt(n,t),s=new Vt(n,t+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new M(new gt([])),r=new Vt(n,t),s=new Vt(n,t+1);let i=J();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new Vt(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Vt{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return M.comparator(t.key,n.key)||rt(t.pr,n.pr)}static Er(t,n){return rt(t.pr,n.pr)||M.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Bt(Vt.Ir)}checkEmpty(t){return _.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new xw(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new Vt(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return _.resolve(o)}lookupMutationBatch(t,n){return _.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.br(r),i=s<0?0:s;return _.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return _.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return _.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Vt(n,0),s=new Vt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),_.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Bt(rt);return n.forEach(s=>{const i=new Vt(s,0),o=new Vt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),_.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;M.isDocumentKey(i)||(i=i.child(""));const o=new Vt(new M(i),0);let a=new Bt(rt);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),_.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){ft(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return _.forEach(n.mutations,s=>{const i=new Vt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Vt(n,0),s=this.wr.firstAfterOrEqual(r);return _.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,_.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(t){this.vr=t,this.docs=function(){return new Et(M.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return _.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(t,n){let r=Ke();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Qt.newInvalidDocument(s))}),_.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=Ke();const o=n.path,a=new M(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||WI(KI(u),r)<=0||(s.has(u.key)||xo(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return _.resolve(i)}getAllFromCollectionGroup(t,n,r,s){U()}Fr(t,n){return _.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new hT(this)}getSize(t){return _.resolve(this.size)}}class hT extends sT{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(t,s)):this.ar.removeEntry(r)}),_.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t){this.persistence=t,this.Mr=new Nr(n=>cc(n),uc),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.Or=0,this.Nr=new pc,this.targetCount=0,this.Lr=Tr.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,s)=>n(s)),_.resolve()}getLastRemoteSnapshotVersion(t){return _.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return _.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),_.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),_.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new Tr(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,_.resolve()}updateTargetData(t,n){return this.qn(n),_.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,_.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),_.waitFor(i).next(()=>s)}getTargetCount(t){return _.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return _.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),_.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(t,o))}),_.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),_.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return _.resolve(r)}containsKey(t,n){return _.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(t,n){this.Br={},this.overlays={},this.kr=new ic(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new fT(this),this.indexManager=new nT,this.remoteDocumentCache=function(s){return new uT(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new tT(n),this.$r=new aT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new lT,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new cT(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){S("MemoryPersistence","Starting transaction:",t);const s=new pT(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(t,n){return _.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class pT extends YI{constructor(t){super(),this.currentSequenceNumber=t}}class gc{constructor(t){this.persistence=t,this.zr=new pc,this.jr=null}static Hr(t){return new gc(t)}get Jr(){if(this.jr)return this.jr;throw U()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),_.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),_.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),_.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _.forEach(this.Jr,r=>{const s=M.fromPath(r);return this.Yr(t,s).next(i=>{i||n.removeEntry(s,z.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return _.or([()=>_.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(t,n){let r=J(),s=J();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new mc(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Y_()?8:On.v(Ci())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ji(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(t,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new gT;return this.Ji(t,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>i.result)}Yi(t,n,r,s){return r.documentReadCount<this.Wi?(zr()<=tt.DEBUG&&S("QueryEngine","SDK will not create cache indexes for query:",rr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),_.resolve()):(zr()<=tt.DEBUG&&S("QueryEngine","Query:",rr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(zr()<=tt.DEBUG&&S("QueryEngine","The SDK decides to create cache indexes for query:",rr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ke(n))):_.resolve())}ji(t,n){if(gh(n))return _.resolve(null);let r=ke(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ji(n,null,"F"),r=ke(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const o=J(...i);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(t,ji(n,null,"F")):this.es(t,c,n,l)}))})))}Hi(t,n,r,s){return gh(n)||s.isEqual(z.min())?_.resolve(null):this.zi.getDocuments(t,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?_.resolve(null):(zr()<=tt.DEBUG&&S("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rr(n)),this.es(t,o,n,GI(s,-1)).next(a=>a))})}Zi(t,n){let r=new Bt(qp(t));return n.forEach((s,i)=>{xo(t,i)&&(r=r.add(i))}),r}Xi(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(t,n,r){return zr()<=tt.DEBUG&&S("QueryEngine","Using full collection scan to execute query:",rr(n)),this.zi.getDocumentsMatchingQuery(t,n,yn.min(),r)}es(t,n,r,s){return this.zi.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t,n,r,s){this.persistence=t,this.ts=n,this.serializer=s,this.ns=new Et(rt),this.rs=new Nr(i=>cc(i),uc),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new oT(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function _T(e,t,n,r){return new yT(e,t,n,r)}async function fg(e,t){const n=Q(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=J();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function AT(e,t){const n=Q(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,p=h.keys();let g=_.resolve();return p.forEach(D=>{g=g.next(()=>u.getEntry(l,D)).next(C=>{const V=c.docVersions.get(D);ft(V!==null),C.version.compareTo(V)<0&&(h.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),u.addEntry(C)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=J();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function dg(e){const t=Q(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function ET(e,t){const n=Q(e),r=t.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];t.targetChanges.forEach((u,h)=>{const p=s.get(h);if(!p)return;a.push(n.Qr.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,u.addedDocuments,h)));let g=p.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(h)!==null?g=g.withResumeToken(Jt.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),s=s.insert(h,g),function(C,V,q){return C.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(p,g,u)&&a.push(n.Qr.updateTargetData(i,g))});let l=Ke(),c=J();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(vT(i,o,t.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(z.min())){const u=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return _.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ns=s,i))}function vT(e,t,n){let r=J(),s=J();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let o=Ke();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(z.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):S("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:s}})}function IT(e,t){const n=Q(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function wT(e,t){const n=Q(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,t).next(i=>i?(s=i,_.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new nn(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function nl(e,t,n){const r=Q(e),s=r.ns.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!js(o))throw o;S("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(s.target)}function bh(e,t,n){const r=Q(e);let s=z.min(),i=J();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Q(l),p=h.rs.get(u);return p!==void 0?_.resolve(h.ns.get(p)):h.Qr.getTargetData(c,u)}(r,o,ke(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?s:z.min(),n?i:J())).next(a=>(TT(r,gw(t),a),{documents:a,hs:i})))}function TT(e,t,n){let r=e.ss.get(t)||z.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.ss.set(t,r)}class Rh{constructor(){this.activeTargetIds=vw()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class ST{constructor(){this.no=new Rh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Rh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){S("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){S("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ci=null;function pa(){return ci===null?ci=function(){return 268435456+Math.round(2147483648*Math.random())}():ci++,"0x"+ci.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class PT extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const a=pa(),l=this.bo(n,r.toUriEncodedString());S("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,i,o),this.Co(n,l,c,s).then(u=>(S("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Er("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=RT[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,n,r,s){const i=pa();return new Promise((o,a)=>{const l=new OI;l.setWithCredentials(!0),l.listenOnce(kI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case fa.NO_ERROR:const u=l.getResponseJson();S(zt,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(u)),o(u);break;case fa.TIMEOUT:S(zt,`RPC '${t}' ${i} timed out`),a(new x(y.DEADLINE_EXCEEDED,"Request time out"));break;case fa.HTTP_ERROR:const h=l.getStatus();if(S(zt,`RPC '${t}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const D=function(V){const q=V.toLowerCase().replace(/_/g,"-");return Object.values(y).indexOf(q)>=0?q:y.UNKNOWN}(g.status);a(new x(D,g.message))}else a(new x(y.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new x(y.UNAVAILABLE,"Connection failed."));break;default:U()}}finally{S(zt,`RPC '${t}' ${i} completed.`)}});const c=JSON.stringify(s);S(zt,`RPC '${t}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Fo(t,n,r){const s=pa(),i=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=VI(),a=DI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");S(zt,`Creating RPC '${t}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let p=!1,g=!1;const D=new CT({lo:V=>{g?S(zt,`Not sending because RPC '${t}' stream ${s} is closed:`,V):(p||(S(zt,`Opening RPC '${t}' stream ${s} transport.`),h.open(),p=!0),S(zt,`RPC '${t}' stream ${s} sending:`,V),h.send(V))},ho:()=>h.close()}),C=(V,q,st)=>{V.listen(q,H=>{try{st(H)}catch(it){setTimeout(()=>{throw it},0)}})};return C(h,oi.EventType.OPEN,()=>{g||S(zt,`RPC '${t}' stream ${s} transport opened.`)}),C(h,oi.EventType.CLOSE,()=>{g||(g=!0,S(zt,`RPC '${t}' stream ${s} transport closed`),D.Vo())}),C(h,oi.EventType.ERROR,V=>{g||(g=!0,Er(zt,`RPC '${t}' stream ${s} transport errored:`,V),D.Vo(new x(y.UNAVAILABLE,"The operation could not be completed")))}),C(h,oi.EventType.MESSAGE,V=>{var q;if(!g){const st=V.data[0];ft(!!st);const H=st,it=H.error||((q=H[0])===null||q===void 0?void 0:q.error);if(it){S(zt,`RPC '${t}' stream ${s} received error:`,it);const at=it.status;let K=function(nt){const It=Tt[nt];if(It!==void 0)return ng(It)}(at),wt=it.message;K===void 0&&(K=y.INTERNAL,wt="Unknown error status: "+at+" with message "+it.message),g=!0,D.Vo(new x(K,wt)),h.close()}else S(zt,`RPC '${t}' stream ${s} received:`,st),D.mo(st)}}),C(a,NI.STAT_EVENT,V=>{V.stat===rh.PROXY?S(zt,`RPC '${t}' stream ${s} detected buffering proxy`):V.stat===rh.NOPROXY&&S(zt,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{D.Ro()},0),D}}function ga(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(e){return new Bw(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(t,n,r=1e3,s=1.5,i=6e4){this.oi=t,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-r);s>0&&S("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(t,n,r,s,i,o,a,l){this.oi=t,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new pg(t,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():n&&n.code===y.RESOURCE_EXHAUSTED?(Oe(n.toString()),Oe("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(n)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{t(()=>{const s=new x(y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(t,n){const r=this.s_(this.Wo);this.stream=this.a_(t,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(t){return S("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return n=>{this.oi.enqueueAndForget(()=>this.Wo===t?n():(S("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xT extends gg{constructor(t,n,r,s,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(t,n){return this.connection.Fo("Listen",t,n)}onMessage(t){this.jo.reset();const n=qw(this.serializer,t),r=function(i){if(!("targetChange"in i))return z.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?z.min():o.readTime?Ne(o.readTime):z.min()}(t);return this.listener.u_(n,r)}c_(t){const n={};n.database=el(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Ya(l)?{documents:Gw(i,l)}:{query:Kw(i,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ig(i,o.resumeToken);const c=$a(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(z.min())>0){a.readTime=Qi(i,o.snapshotVersion.toTimestamp());const c=$a(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const r=Jw(this.serializer,t);r&&(n.labels=r),this.t_(n)}l_(t){const n={};n.database=el(this.serializer),n.removeTarget=t,this.t_(n)}}class VT extends gg{constructor(t,n,r,s,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,n){return this.connection.Fo("Write",t,n)}onMessage(t){if(ft(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const n=Hw(t.writeResults,t.commitTime),r=Ne(t.commitTime);return this.listener.T_(r,n)}return ft(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=el(this.serializer),this.t_(t)}I_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Qw(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT extends class{}{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new x(y.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(t,Za(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new x(y.UNKNOWN,i.toString())})}vo(t,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(t,Za(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new x(y.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class kT{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Oe(n),this.g_=!1):S("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{Xn(this)&&(S("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Q(l);c.v_.add(4),await Qs(c),c.x_.set("Unknown"),c.v_.delete(4),await Oo(c)}(this))})}),this.x_=new kT(r,s)}}async function Oo(e){if(Xn(e))for(const t of e.F_)await t(!0)}async function Qs(e){for(const t of e.F_)await t(!1)}function mg(e,t){const n=Q(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Ec(n)?Ac(n):Or(n).Jo()&&_c(n,t))}function yc(e,t){const n=Q(e),r=Or(n);n.C_.delete(t),r.Jo()&&yg(n,t),n.C_.size===0&&(r.Jo()?r.Xo():Xn(n)&&n.x_.set("Unknown"))}function _c(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(z.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Or(e).c_(t)}function yg(e,t){e.O_.Oe(t),Or(e).l_(t)}function Ac(e){e.O_=new Mw({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Or(e).start(),e.x_.p_()}function Ec(e){return Xn(e)&&!Or(e).Ho()&&e.C_.size>0}function Xn(e){return Q(e).v_.size===0}function _g(e){e.O_=void 0}async function OT(e){e.C_.forEach((t,n)=>{_c(e,t)})}async function MT(e,t){_g(e),Ec(e)?(e.x_.S_(t),Ac(e)):e.x_.set("Unknown")}async function FT(e,t,n){if(e.x_.set("Online"),t instanceof sg&&t.state===2&&t.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(e,t)}catch(r){S("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Hi(e,r)}else if(t instanceof Ai?e.O_.$e(t):t instanceof rg?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(z.min()))try{const r=await dg(e.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.C_.get(c);u&&i.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.C_.get(l);if(!u)return;i.C_.set(l,u.withResumeToken(Jt.EMPTY_BYTE_STRING,u.snapshotVersion)),yg(i,l);const h=new nn(u.target,l,c,u.sequenceNumber);_c(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){S("RemoteStore","Failed to raise snapshot:",r),await Hi(e,r)}}async function Hi(e,t,n){if(!js(t))throw t;e.v_.add(1),await Qs(e),e.x_.set("Offline"),n||(n=()=>dg(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{S("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Oo(e)})}function Ag(e,t){return t().catch(n=>Hi(e,n,t))}async function Mo(e){const t=Q(e),n=An(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;LT(t);)try{const s=await IT(t.localStore,r);if(s===null){t.D_.length===0&&n.Xo();break}r=s.batchId,UT(t,s)}catch(s){await Hi(t,s)}Eg(t)&&vg(t)}function LT(e){return Xn(e)&&e.D_.length<10}function UT(e,t){e.D_.push(t);const n=An(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Eg(e){return Xn(e)&&!An(e).Ho()&&e.D_.length>0}function vg(e){An(e).start()}async function BT(e){An(e).d_()}async function jT(e){const t=An(e);for(const n of e.D_)t.I_(n.mutations)}async function zT(e,t,n){const r=e.D_.shift(),s=hc.from(r,t,n);await Ag(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Mo(e)}async function qT(e,t){t&&An(e).P_&&await async function(r,s){if(function(o){return kw(o)&&o!==y.ABORTED}(s.code)){const i=r.D_.shift();An(r).Zo(),await Ag(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Mo(r)}}(e,t),Eg(e)&&vg(e)}async function Ph(e,t){const n=Q(e);n.asyncQueue.verifyOperationInProgress(),S("RemoteStore","RemoteStore received new credentials");const r=Xn(n);n.v_.add(3),await Qs(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Oo(n)}async function QT(e,t){const n=Q(e);t?(n.v_.delete(2),await Oo(n)):t||(n.v_.add(2),await Qs(n),n.x_.set("Unknown"))}function Or(e){return e.N_||(e.N_=function(n,r,s){const i=Q(n);return i.R_(),new xT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{Po:OT.bind(null,e),To:MT.bind(null,e),u_:FT.bind(null,e)}),e.F_.push(async t=>{t?(e.N_.Zo(),Ec(e)?Ac(e):e.x_.set("Unknown")):(await e.N_.stop(),_g(e))})),e.N_}function An(e){return e.L_||(e.L_=function(n,r,s){const i=Q(n);return i.R_(),new VT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{Po:BT.bind(null,e),To:qT.bind(null,e),E_:jT.bind(null,e),T_:zT.bind(null,e)}),e.F_.push(async t=>{t?(e.L_.Zo(),await Mo(e)):(await e.L_.stop(),e.D_.length>0&&(S("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))})),e.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ze,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const o=Date.now()+r,a=new vc(t,n,o,s,i);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(y.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ic(e,t){if(Oe("AsyncQueue",`${t}: ${e}`),js(e))return new x(y.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(t){this.comparator=t?(n,r)=>t(n,r)||M.comparator(n.key,r.key):(n,r)=>M.comparator(n.key,r.key),this.keyedMap=Gr(),this.sortedSet=new Et(this.comparator)}static emptySet(t){return new dr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof dr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new dr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(){this.B_=new Et(M.comparator)}track(t){const n=t.doc.key,r=this.B_.get(n);r?t.type!==0&&r.type===3?this.B_=this.B_.insert(n,t):t.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.B_=this.B_.remove(n):t.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):U():this.B_=this.B_.insert(n,t)}k_(){const t=[];return this.B_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Sr{constructor(t,n,r,s,i,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Sr(t,n,dr.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Po(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(t=>t.U_())}}class GT{constructor(){this.queries=new Nr(t=>zp(t),Po),this.onlineState="Unknown",this.W_=new Set}}async function KT(e,t){const n=Q(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.K_()&&t.U_()&&(r=2):(i=new HT,r=t.U_()?0:1);try{switch(r){case 0:i.q_=await n.onListen(s,!0);break;case 1:i.q_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Ic(o,`Initialization of query '${rr(t.query)}' failed`);return void t.onError(a)}n.queries.set(s,i),i.Q_.push(t),t.G_(n.onlineState),i.q_&&t.z_(i.q_)&&wc(n)}async function WT(e,t){const n=Q(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(t);o>=0&&(i.Q_.splice(o,1),i.Q_.length===0?s=t.U_()?0:1:!i.K_()&&t.U_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function JT(e,t){const n=Q(e);let r=!1;for(const s of t){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.z_(s)&&(r=!0);o.q_=s}}r&&wc(n)}function YT(e,t,n){const r=Q(e),s=r.queries.get(t);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(t)}function wc(e){e.W_.forEach(t=>{t.next()})}var rl,Vh;(Vh=rl||(rl={})).j_="default",Vh.Cache="cache";class XT{constructor(t,n,r){this.query=t,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Sr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.J_?this.Z_(t)&&(this.H_.next(t),n=!0):this.X_(t,this.onlineState)&&(this.ea(t),n=!0),this.Y_=t,n}onError(t){this.H_.error(t)}G_(t){this.onlineState=t;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,t)&&(this.ea(this.Y_),n=!0),n}X_(t,n){if(!t.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Z_(t){if(t.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(t){t=Sr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.J_=!0,this.H_.next(t)}U_(){return this.options.source!==rl.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(t){this.key=t}}class wg{constructor(t){this.key=t}}class $T{constructor(t,n){this.query=t,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=J(),this.mutatedKeys=J(),this.ha=qp(t),this.Pa=new dr(this.ha)}get Ia(){return this.ua}Ta(t,n){const r=n?n.Ea:new xh,s=n?n.Pa:this.Pa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,h)=>{const p=s.get(u),g=xo(this.query,h)?h:null,D=!!p&&this.mutatedKeys.has(p.key),C=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let V=!1;p&&g?p.data.isEqual(g.data)?D!==C&&(r.track({type:3,doc:g}),V=!0):this.da(p,g)||(r.track({type:2,doc:g}),V=!0,(l&&this.ha(g,l)>0||c&&this.ha(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),V=!0):p&&!g&&(r.track({type:1,doc:p}),V=!0,(l||c)&&(a=!0)),V&&(g?(o=o.add(g),i=C?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:i}}da(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.Pa;this.Pa=t.Pa,this.mutatedKeys=t.mutatedKeys;const o=t.Ea.k_();o.sort((u,h)=>function(g,D){const C=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return U()}};return C(g)-C(D)}(u.type,h.type)||this.ha(u.doc,h.doc)),this.Aa(r),s=s!=null&&s;const a=n&&!s?this.Ra():[],l=this.la.size===0&&this.current&&!s?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new Sr(this.query,t.Pa,i,o,t.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new xh,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(t){return!this.ua.has(t)&&!!this.Pa.has(t)&&!this.Pa.get(t).hasLocalMutations}Aa(t){t&&(t.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=t.current)}Ra(){if(!this.current)return[];const t=this.la;this.la=J(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return t.forEach(r=>{this.la.has(r)||n.push(new wg(r))}),this.la.forEach(r=>{t.has(r)||n.push(new Ig(r))}),n}fa(t){this.ua=t.hs,this.la=J();const n=this.Ta(t.documents);return this.applyChanges(n,!0)}ga(){return Sr.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class ZT{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class t0{constructor(t){this.key=t,this.pa=!1}}class e0{constructor(t,n,r,s,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Nr(a=>zp(a),Po),this.Sa=new Map,this.ba=new Set,this.Da=new Et(M.comparator),this.Ca=new Map,this.va=new pc,this.Fa={},this.Ma=new Map,this.xa=Tr.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function n0(e,t,n=!0){const r=Pg(e);let s;const i=r.wa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ga()):s=await Tg(r,t,n,!0),s}async function r0(e,t){const n=Pg(e);await Tg(n,t,!0,!1)}async function Tg(e,t,n,r){const s=await wT(e.localStore,ke(t)),i=s.targetId,o=n?e.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await s0(e,t,i,o==="current",s.resumeToken)),e.isPrimaryClient&&n&&mg(e.remoteStore,s),a}async function s0(e,t,n,r,s){e.Na=(h,p,g)=>async function(C,V,q,st){let H=V.view.Ta(q);H.Xi&&(H=await bh(C.localStore,V.query,!1).then(({documents:wt})=>V.view.Ta(wt,H)));const it=st&&st.targetChanges.get(V.targetId),at=st&&st.targetMismatches.get(V.targetId)!=null,K=V.view.applyChanges(H,C.isPrimaryClient,it,at);return kh(C,V.targetId,K.Va),K.snapshot}(e,h,p,g);const i=await bh(e.localStore,t,!0),o=new $T(t,i.hs),a=o.Ta(i.documents),l=qs.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),c=o.applyChanges(a,e.isPrimaryClient,l);kh(e,n,c.Va);const u=new ZT(t,n,o);return e.wa.set(t,u),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),c.snapshot}async function i0(e,t,n){const r=Q(e),s=r.wa.get(t),i=r.Sa.get(s.targetId);if(i.length>1)return r.Sa.set(s.targetId,i.filter(o=>!Po(o,t))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await nl(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&yc(r.remoteStore,s.targetId),sl(r,s.targetId)}).catch(Bs)):(sl(r,s.targetId),await nl(r.localStore,s.targetId,!0))}async function o0(e,t){const n=Q(e),r=n.wa.get(t),s=n.Sa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yc(n.remoteStore,r.targetId))}async function a0(e,t,n){const r=p0(e);try{const s=await function(o,a){const l=Q(o),c=Ct.now(),u=a.reduce((g,D)=>g.add(D.key),J());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let D=Ke(),C=J();return l.os.getEntries(g,u).next(V=>{D=V,D.forEach((q,st)=>{st.isValidDocument()||(C=C.add(q))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,D)).next(V=>{h=V;const q=[];for(const st of a){const H=Cw(st,h.get(st.key).overlayedDocument);H!=null&&q.push(new Yn(st.key,H,kp(H.value.mapValue),qe.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,q,a)}).next(V=>{p=V;const q=V.applyToLocalDocumentSet(h,C);return l.documentOverlayCache.saveOverlays(g,V.batchId,q)})}).then(()=>({batchId:p.batchId,changes:Hp(h)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new Et(rt)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,s.batchId,n),await Hs(r,s.changes),await Mo(r.remoteStore)}catch(s){const i=Ic(s,"Failed to persist write");n.reject(i)}}async function Sg(e,t){const n=Q(e);try{const r=await ET(n.localStore,t);t.targetChanges.forEach((s,i)=>{const o=n.Ca.get(i);o&&(ft(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.pa=!0:s.modifiedDocuments.size>0?ft(o.pa):s.removedDocuments.size>0&&(ft(o.pa),o.pa=!1))}),await Hs(n,r,t)}catch(r){await Bs(r)}}function Dh(e,t,n){const r=Q(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wa.forEach((i,o)=>{const a=o.view.G_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Q(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const p of h.Q_)p.G_(a)&&(c=!0)}),c&&wc(l)}(r.eventManager,t),s.length&&r.ya.u_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function l0(e,t,n){const r=Q(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Ca.get(t),i=s&&s.key;if(i){let o=new Et(M.comparator);o=o.insert(i,Qt.newNoDocument(i,z.min()));const a=J().add(i),l=new ko(z.min(),new Map,new Et(rt),o,a);await Sg(r,l),r.Da=r.Da.remove(i),r.Ca.delete(t),Tc(r)}else await nl(r.localStore,t,!1).then(()=>sl(r,t,n)).catch(Bs)}async function c0(e,t){const n=Q(e),r=t.batch.batchId;try{const s=await AT(n.localStore,t);Rg(n,r,null),bg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hs(n,s)}catch(s){await Bs(s)}}async function u0(e,t,n){const r=Q(e);try{const s=await function(o,a){const l=Q(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(ft(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,t);Rg(r,t,n),bg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Hs(r,s)}catch(s){await Bs(s)}}function bg(e,t){(e.Ma.get(t)||[]).forEach(n=>{n.resolve()}),e.Ma.delete(t)}function Rg(e,t,n){const r=Q(e);let s=r.Fa[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Fa[r.currentUser.toKey()]=s}}function sl(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach(r=>{e.va.containsKey(r)||Cg(e,r)})}function Cg(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);n!==null&&(yc(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),Tc(e))}function kh(e,t,n){for(const r of n)r instanceof Ig?(e.va.addReference(r.key,t),h0(e,r)):r instanceof wg?(S("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||Cg(e,r.key)):U()}function h0(e,t){const n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(S("SyncEngine","New document in limbo: "+n),e.ba.add(r),Tc(e))}function Tc(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new M(gt.fromString(t)),r=e.xa.next();e.Ca.set(r,new t0(n)),e.Da=e.Da.insert(n,r),mg(e.remoteStore,new nn(ke(Bp(n.path)),r,"TargetPurposeLimboResolution",ic._e))}}async function Hs(e,t,n){const r=Q(e),s=[],i=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,t,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=mc.Ki(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.ya.u_(s),await async function(l,c){const u=Q(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>_.forEach(c,p=>_.forEach(p.qi,g=>u.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>_.forEach(p.Qi,g=>u.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!js(h))throw h;S("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const g=u.ns.get(p),D=g.snapshotVersion,C=g.withLastLimboFreeSnapshotVersion(D);u.ns=u.ns.insert(p,C)}}}(r.localStore,i))}async function f0(e,t){const n=Q(e);if(!n.currentUser.isEqual(t)){S("SyncEngine","User change. New user:",t.toKey());const r=await fg(n.localStore,t);n.currentUser=t,function(i,o){i.Ma.forEach(a=>{a.forEach(l=>{l.reject(new x(y.CANCELLED,o))})}),i.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Hs(n,r.us)}}function d0(e,t){const n=Q(e),r=n.Ca.get(t);if(r&&r.pa)return J().add(r.key);{let s=J();const i=n.Sa.get(t);if(!i)return s;for(const o of i){const a=n.wa.get(o);s=s.unionWith(a.view.Ia)}return s}}function Pg(e){const t=Q(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Sg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=d0.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=l0.bind(null,t),t.ya.u_=JT.bind(null,t.eventManager),t.ya.La=YT.bind(null,t.eventManager),t}function p0(e){const t=Q(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=c0.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=u0.bind(null,t),t}class Nh{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=No(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return _T(this.persistence,new mT,t.initialUser,this.serializer)}createPersistence(t){return new dT(gc.Hr,this.serializer)}createSharedClientState(t){return new ST}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class g0{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=f0.bind(null,this.syncEngine),await QT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new GT}()}createDatastore(t){const n=No(t.databaseInfo.databaseId),r=function(i){return new PT(i)}(t.databaseInfo);return function(i,o,a,l){return new DT(i,o,a,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,o,a){return new NT(r,s,i,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Dh(this.syncEngine,n,0),function(){return Ch.D()?new Ch:new bT}())}createSyncEngine(t,n){return function(s,i,o,a,l,c,u){const h=new e0(s,i,o,a,l,c);return u&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const s=Q(r);S("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await Qs(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.qa(this.observer.next,t)}error(t){this.observer.error?this.qa(this.observer.error,t):Oe("Uncaught Error in snapshot listener:",t.toString())}Qa(){this.muted=!0}qa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(t,n,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=qt.UNAUTHENTICATED,this.clientId=xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{S("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(S("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new x(y.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ze;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Ic(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function ma(e,t){e.asyncQueue.verifyOperationInProgress(),S("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await fg(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Oh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await A0(e);S("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Ph(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>Ph(t.remoteStore,s)),e._onlineComponents=t}function _0(e){return e.name==="FirebaseError"?e.code===y.FAILED_PRECONDITION||e.code===y.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function A0(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){S("FirestoreClient","Using user provided OfflineComponentProvider");try{await ma(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!_0(n))throw n;Er("Error using user provided cache. Falling back to memory cache: "+n),await ma(e,new Nh)}}else S("FirestoreClient","Using default OfflineComponentProvider"),await ma(e,new Nh);return e._offlineComponents}async function xg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(S("FirestoreClient","Using user provided OnlineComponentProvider"),await Oh(e,e._uninitializedComponentsProvider._online)):(S("FirestoreClient","Using default OnlineComponentProvider"),await Oh(e,new g0))),e._onlineComponents}function E0(e){return xg(e).then(t=>t.syncEngine)}async function v0(e){const t=await xg(e),n=t.eventManager;return n.onListen=n0.bind(null,t.syncEngine),n.onUnlisten=i0.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=r0.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=o0.bind(null,t.syncEngine),n}function I0(e,t,n={}){const r=new ze;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new m0({next:p=>{o.enqueueAndForget(()=>WT(i,h)),p.fromCache&&l.source==="server"?c.reject(new x(y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new XT(a,u,{includeMetadataChanges:!0,ta:!0});return KT(i,h)}(await v0(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(e,t,n){if(!n)throw new x(y.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function w0(e,t,n,r){if(t===!0&&r===!0)throw new x(y.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Fh(e){if(!M.isDocumentKey(e))throw new x(y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Lh(e){if(M.isDocumentKey(e))throw new x(y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Fo(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":U()}function Gi(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new x(y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fo(e);throw new x(y.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function T0(e,t){if(t<=0)throw new x(y.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new x(y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new x(y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}w0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vg((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new x(y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new x(y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new x(y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Lo{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new x(y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new x(y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uh(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FI;switch(r.type){case"firstParty":return new jI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Mh.get(n);r&&(S("ComponentProvider","Removing Datastore"),Mh.delete(n),r.terminate())}(this),Promise.resolve()}}function S0(e,t,n,r={}){var s;const i=(e=Gi(e,Lo))._getSettings(),o=`${t}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=qt.MOCK_USER;else{a=K_(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new x(y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new qt(c)}e._authCredentials=new LI(new Pp(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new wn(this.firestore,t,this._query)}}class de{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new un(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new de(this.firestore,t,this._key)}}class un extends wn{constructor(t,n,r){super(t,n,Bp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new de(this.firestore,null,new M(t))}withConverter(t){return new un(this.firestore,t,this._path)}}function kg(e,t,...n){if(e=gn(e),Dg("collection","path",t),e instanceof Lo){const r=gt.fromString(t,...n);return Lh(r),new un(e,null,r)}{if(!(e instanceof de||e instanceof un))throw new x(y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(gt.fromString(t,...n));return Lh(r),new un(e.firestore,null,r)}}function b0(e,t,...n){if(e=gn(e),arguments.length===1&&(t=xp.newId()),Dg("doc","path",t),e instanceof Lo){const r=gt.fromString(t,...n);return Fh(r),new de(e,null,new M(r))}{if(!(e instanceof de||e instanceof un))throw new x(y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(gt.fromString(t,...n));return Fh(r),new de(e.firestore,e instanceof un?e.converter:null,new M(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new pg(this,"async_queue_retry"),this.cu=()=>{const n=ga();n&&S("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const t=ga();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.lu(),this.hu(t)}enterRestrictedMode(t){if(!this.iu){this.iu=!0,this.au=t||!1;const n=ga();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(t){if(this.lu(),this.iu)return new Promise(()=>{});const n=new ze;return this.hu(()=>this.iu&&this.au?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.ru.push(t),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(t){if(!js(t))throw t;S("AsyncQueue","Operation failed with retryable error: "+t)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(t){const n=this.nu.then(()=>(this._u=!0,t().catch(r=>{this.ou=r,this._u=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Oe("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(t,n,r){this.lu(),this.uu.indexOf(t)>-1&&(n=0);const s=vc.createAndSchedule(this,t,n,r,i=>this.Iu(i));return this.su.push(s),s}lu(){this.ou&&U()}verifyOperationInProgress(){}async Tu(){let t;do t=this.nu,await t;while(t!==this.nu)}Eu(t){for(const n of this.su)if(n.timerId===t)return!0;return!1}du(t){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tu()})}Au(t){this.uu.push(t)}Iu(t){const n=this.su.indexOf(t);this.su.splice(n,1)}}class Sc extends Lo{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=function(){return new R0}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Og(this),this._firestoreClient.terminate()}}function C0(e,t){const n=typeof e=="object"?e:ed(),r=typeof e=="string"?e:t||"(default)",s=Vs(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=H_("firestore");i&&S0(s,...i)}return s}function Ng(e){return e._firestoreClient||Og(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Og(e){var t,n,r;const s=e._freezeSettings(),i=function(a,l,c,u){return new ew(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Vg(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new y0(e._authCredentials,e._appCheckCredentials,e._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t){this._byteString=t}static fromBase64String(t){try{return new br(Jt.fromBase64String(t))}catch(n){throw new x(y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new br(Jt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new x(y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new x(y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new x(y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return rt(this._lat,t._lat)||rt(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=/^__.*__$/;class x0{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Yn(t,this.data,this.fieldMask,n,this.fieldTransforms):new zs(t,this.data,n,this.fieldTransforms)}}function Fg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw U()}}class Cc{constructor(t,n,r,s,i,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(t){return new Cc(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.mu({path:r,gu:!1});return s.pu(t),s}yu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.mu({path:r,gu:!1});return s.Ru(),s}wu(t){return this.mu({path:void 0,gu:!0})}Su(t){return Ki(t,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let t=0;t<this.path.length;t++)this.pu(this.path.get(t))}pu(t){if(t.length===0)throw this.Su("Document fields must not be empty");if(Fg(this.Vu)&&P0.test(t))throw this.Su('Document fields cannot begin and end with "__"')}}class V0{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||No(t)}Cu(t,n,r,s=!1){return new Cc({Vu:t,methodName:n,Du:r,path:Lt.emptyPath(),gu:!1,bu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lg(e){const t=e._freezeSettings(),n=No(e._databaseId);return new V0(e._databaseId,!!t.ignoreUndefinedProperties,n)}function D0(e,t,n,r,s,i={}){const o=e.Cu(i.merge||i.mergeFields?2:0,t,n,s);jg("Data must be an object, but it was:",o,r);const a=Ug(r,o);let l,c;if(i.merge)l=new me(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const p=N0(t,h,n);if(!o.contains(p))throw new x(y.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);M0(u,p)||u.push(p)}l=new me(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new x0(new ue(a),l,c)}function k0(e,t,n,r=!1){return Pc(n,e.Cu(r?4:3,t))}function Pc(e,t){if(Bg(e=gn(e)))return jg("Unsupported field value:",t,e),Ug(e,t);if(e instanceof Mg)return function(r,s){if(!Fg(s.Vu))throw s.Su(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Su(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&t.Vu!==4)throw t.Su("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Pc(a,s.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=gn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Iw(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ct.fromDate(r);return{timestampValue:Qi(s.serializer,i)}}if(r instanceof Ct){const i=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qi(s.serializer,i)}}if(r instanceof Rc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof br)return{bytesValue:ig(s.serializer,r._byteString)};if(r instanceof de){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:dc(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Su(`Unsupported field value: ${Fo(r)}`)}(e,t)}function Ug(e,t){const n={};return Vp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Dr(e,(r,s)=>{const i=Pc(s,t.fu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Bg(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ct||e instanceof Rc||e instanceof br||e instanceof de||e instanceof Mg)}function jg(e,t,n){if(!Bg(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Fo(n);throw r==="an object"?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function N0(e,t,n){if((t=gn(t))instanceof bc)return t._internalPath;if(typeof t=="string")return zg(e,t);throw Ki("Field path arguments must be of type string or ",e,!1,void 0,n)}const O0=new RegExp("[~\\*/\\[\\]]");function zg(e,t,n){if(t.search(O0)>=0)throw Ki(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new bc(...t.split("."))._internalPath}catch{throw Ki(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ki(e,t,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new x(y.INVALID_ARGUMENT,a+e+l)}function M0(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new de(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new F0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(xc("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class F0 extends qg{data(){return super.data()}}function xc(e,t){return typeof t=="string"?zg(e,t):t instanceof bc?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new x(y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vc{}class Dc extends Vc{}function U0(e,t,...n){let r=[];t instanceof Vc&&r.push(t),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Nc).length,a=i.filter(l=>l instanceof kc).length;if(o>1||o>0&&a>0)throw new x(y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class kc extends Dc{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new kc(t,n,r)}_apply(t){const n=this._parse(t);return Qg(t._query,n),new wn(t.firestore,t.converter,Xa(t._query,n))}_parse(t){const n=Lg(t.firestore);return function(i,o,a,l,c,u,h){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new x(y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){jh(h,u);const g=[];for(const D of h)g.push(Bh(l,i,D));p={arrayValue:{values:g}}}else p=Bh(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||jh(h,u),p=k0(a,o,h,u==="in"||u==="not-in");return bt.create(c,u,p)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Nc extends Vc{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Nc(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ee.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)Qg(o,l),o=Xa(o,l)}(t._query,n),new wn(t.firestore,t.converter,Xa(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Oc extends Dc{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Oc(t,n)}_apply(t){const n=function(s,i,o){if(s.startAt!==null)throw new x(y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new x(y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ss(i,o)}(t._query,this._field,this._direction);return new wn(t.firestore,t.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new kr(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function B0(e,t="asc"){const n=t,r=xc("orderBy",e);return Oc._create(r,n)}class Mc extends Dc{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new Mc(t,n,r)}_apply(t){return new wn(t.firestore,t.converter,ji(t._query,this._limit,this._limitType))}}function j0(e){return T0("limit",e),Mc._create("limit",e,"F")}function Bh(e,t,n){if(typeof(n=gn(n))=="string"){if(n==="")throw new x(y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jp(t)&&n.indexOf("/")!==-1)throw new x(y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(gt.fromString(n));if(!M.isDocumentKey(r))throw new x(y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ch(e,new M(r))}if(n instanceof de)return ch(e,n._key);throw new x(y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fo(n)}.`)}function jh(e,t){if(!Array.isArray(e)||e.length===0)throw new x(y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Qg(e,t){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new x(y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new x(y.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class z0{convertValue(t,n="none"){switch(Gn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return St(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Hn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw U()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Dr(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(t){return new Rc(St(t.latitude),St(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=ac(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Is(t));default:return null}}convertTimestamp(t){const n=_n(t);return new Ct(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=gt.fromString(t);ft(hg(r));const s=new ws(r.get(1),r.get(3)),i=new M(r.popFirst(5));return s.isEqual(n)||Oe(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Q0 extends qg{constructor(t,n,r,s,i,o){super(t,n,r,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Ei(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(xc("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ei extends Q0{data(t={}){return super.data(t)}}class H0{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new ui(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Ei(this._firestore,this._userDataWriter,r.key,r,new ui(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new x(y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Ei(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ui(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Ei(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ui(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:G0(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function G0(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return U()}}class K0 extends z0{constructor(t){super(),this.firestore=t}convertBytes(t){return new br(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new de(this.firestore,null,n)}}function W0(e){e=Gi(e,wn);const t=Gi(e.firestore,Sc),n=Ng(t),r=new K0(t);return L0(e._query),I0(n,e._query).then(s=>new H0(t,r,e,s))}function J0(e,t){const n=Gi(e.firestore,Sc),r=b0(e),s=q0(e.converter,t);return Y0(n,[D0(Lg(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,qe.exists(!1))]).then(()=>r)}function Y0(e,t){return function(r,s){const i=new ze;return r.asyncQueue.enqueueAndForget(async()=>a0(await E0(r),s,i)),i.promise}(Ng(e),t)}(function(t,n=!0){(function(s){Vr=s})(tE),mn(new He("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Sc(new UI(r.getProvider("auth-internal")),new qI(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new x(y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ws(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),De(sh,"4.6.0",t),De(sh,"4.6.0","esm2017")})();const X0={apiKey:"AIzaSyA3q1Fpi4LtNn-q-KDZjBW8pIUNzrfH_kU",authDomain:"snake-fe592.firebaseapp.com",projectId:"snake-fe592",storageBucket:"snake-fe592.appspot.com",messagingSenderId:"679851192192",appId:"1:679851192192:web:58e5eb6c583b7dc9ac1b65",measurementId:"G-CWXLX61CHV"},Hg=td(X0),Gg=C0(Hg);Rv(Hg);const ve=Gf("game",{state:()=>({gameSpeed:150,currentSpeed:150,minimumSpeed:50,level:1,snakeLength:3,score:0,player:localStorage.getItem("playerName")||"Johnny",playerHighscore:parseInt(localStorage.getItem("snakeHighscore")||"0"),playground:{xTiles:31,yTiles:31},tileSize:20,snakePosition:[{x:16,y:16},{x:16,y:17},{x:16,y:18}],direction:"UP",nextDirection:null,directionChanges:[],loot:[{name:"Apple",image:"apple",score:10,bodyIncrease:0,snakeSpeed:0},{name:"Banana",image:"banana",score:20,bodyIncrease:1,snakeSpeed:10},{name:"Cherries",image:"cherries",score:30,bodyIncrease:2,snakeSpeed:0},{name:"Grape",image:"grape",score:40,bodyIncrease:1,snakeSpeed:-20},{name:"Lemon",image:"lemon",score:50,bodyIncrease:1,snakeSpeed:-30},{name:"Peach",image:"peach",score:60,bodyIncrease:1,snakeSpeed:10},{name:"Melon",image:"melon",score:70,bodyIncrease:3,snakeSpeed:10},{name:"Pineapple",image:"pineapple",score:80,bodyIncrease:2,snakeSpeed:-10},{name:"Strawberry",image:"strawberry",score:90,bodyIncrease:3,snakeSpeed:0}],currentLootPosition:{x:0,y:0},currentLoot:null,gameStarted:!1,isGameOver:!1,intervalId:void 0,unpredictableMove:null}),actions:{moveSnake(){if(this.isGameOver)return;if(this.unpredictableMove&&this.nextDirection){const n=this.directionChanges.findIndex(r=>r===this.unpredictableMove);this.directionChanges[n].direction=this.nextDirection,this.unpredictableMove=null}this.nextDirection&&this.nextDirection!==this.getOppositeDirection(this.direction)&&(this.direction=this.nextDirection,this.nextDirection=null);const e=this.snakePosition[0],t={x:e.x,y:e.y,direction:this.direction};switch(this.direction){case"UP":t.y-=1;break;case"DOWN":t.y+=1;break;case"LEFT":t.x-=1;break;case"RIGHT":t.x+=1;break}if(t.x<1||t.x>this.playground.xTiles||t.y<1||t.y>this.playground.yTiles){this.gameOver();return}if(this.snakePosition.unshift(t),this.snakePosition.some((n,r)=>r!==0&&n.x===t.x&&n.y===t.y)){const n=this.directionChanges.findIndex(i=>i.x===t.x&&i.y===t.y);n!==-1&&(this.directionChanges[n].direction=this.direction,this.unpredictableMove=this.directionChanges[n]);const r=this.snakePosition.findIndex((i,o)=>o!==0&&i.x===t.x&&i.y===t.y),s=this.snakePosition.length-r;if(this.snakePosition.splice(r,s),this.updateScore(this.score-50*s),this.snakeLength-=s,this.score<0){this.gameOver();return}}if(this.isSnakeOnLoot()){if(this.updateScore(this.score+this.currentLoot.score),this.snakeLength+=this.currentLoot.bodyIncrease,this.currentLoot.snakeSpeed){const n=this.currentLoot.snakeSpeed;this.currentSpeed+=n,this.resetMovementInterval(),setTimeout(()=>{this.currentSpeed-=n,this.resetMovementInterval()},3e3)}this.getRandomLoot()}else this.snakePosition.length>this.snakeLength&&this.snakePosition.pop();this.directionChanges=this.directionChanges.filter(n=>this.snakePosition.some(r=>r.x===n.x&&r.y===n.y))},setDirection(e){const t=this.snakePosition[0];this.directionChanges.push({x:t.x,y:t.y,direction:e}),this.nextDirection=e},getOppositeDirection(e){switch(e){case"UP":return"DOWN";case"DOWN":return"UP";case"LEFT":return"RIGHT";case"RIGHT":return"LEFT"}},startGame(){this.isGameOver||(this.gameStarted=!0,this.resetMovementInterval(),this.getRandomLoot())},resetMovementInterval(){clearInterval(this.intervalId),this.intervalId=window.setInterval(()=>{this.gameStarted?this.moveSnake():clearInterval(this.intervalId)},this.currentSpeed)},updateScore(e){this.score=e;const t=Math.floor(this.score/500)+1;t>this.level&&(this.level=t,this.currentSpeed=Math.max(this.gameSpeed-this.gameSpeed*.1*(this.level-1),this.minimumSpeed),this.resetMovementInterval()),e>this.playerHighscore&&(this.playerHighscore=e,this.isGameOver&&localStorage.setItem("snakeHighscore",e.toString()))},getRandomLoot(){let e,t,n=0;do if(e=Xo(this.playground.xTiles,1),t=Xo(this.playground.yTiles,1),n++,n>=100){console.log("No room for loot");break}while(this.snakePosition.some(r=>r.x===e&&r.y===t));if(n<=100){this.currentLootPosition.x=e,this.currentLootPosition.y=t;const r=Xo(this.loot.length-1,0);this.currentLoot=this.loot[r]}},isSnakeOnLoot(){const e=this.snakePosition[0];return this.currentLootPosition.x===e.x&&this.currentLootPosition.y===e.y},async gameOver(){if(this.isGameOver=!0,localStorage.getItem("firstVisit")===null&&localStorage.setItem("firstVisit","true"),this.score>0&&this.score>=this.playerHighscore||this.score>0&&localStorage.getItem("snakeHighscore")===null){this.playerHighscore=this.score,localStorage.setItem("snakeHighscore",this.playerHighscore.toString());try{const e=await J0(kg(Gg,"scores"),{playerName:this.player,score:this.score,snakeLength:this.snakeLength,timestamp:new Date});console.log("Score written with ID: ",e.id)}catch(e){console.error("Error adding score: ",e)}}},resetGame(){this.gameStarted=!1,this.isGameOver=!1,this.snakePosition=[{x:16,y:16},{x:16,y:17},{x:16,y:18}],this.direction="UP",this.nextDirection=null,this.score=0,this.level=1,this.snakeLength=3,this.currentSpeed=this.gameSpeed,this.currentLoot=null},adjustTileSize(e,t){let r=this.playground.xTiles*this.tileSize+this.tileSize*2,s=this.playground.yTiles*this.tileSize+this.tileSize*8.5;if(e<r||t<s){this.tileSize=10;const i=10;r=this.playground.xTiles*i+i*2,s=this.playground.yTiles*i+i*14,(e<r||t<s)&&(this.tileSize=9);return}this.tileSize=20},setPlayerName(e){this.player=e,localStorage.setItem("playerName",e)}}}),$0=["src"],Z0="head",tS="body",eS=Yt({__name:"Snake",setup(e){const t=ve(),n=je(()=>t.snakePosition);function r(o){return o===0?Z0:tS}const s=o=>new URL(Object.assign({"/public/snake/body.png":b_,"/public/snake/head.png":R_})[`/public/snake/${o}.png`],import.meta.url).href;function i(o){let a=0;const l=t.directionChanges.find(u=>u.x===o.x&&u.y===o.y);switch(l?l.direction:o.direction||t.direction){case"UP":a=0;break;case"RIGHT":a=90;break;case"DOWN":a=180;break;case"LEFT":a=-90;break}return{gridColumnStart:o.x,gridRowStart:o.y,transform:`rotate(${a}deg)`}}return(o,a)=>($(!0),_t(te,null,vl(n.value,(l,c)=>($(),_t("div",{key:`segment-${c}`,class:Qe(["grid relative",c===0?"z-30 place-items-center":"place-items-end"]),style:ee([i(l),c===0?{width:`${N(t).tileSize+N(t).tileSize/2}px`}:{height:`${N(t).tileSize}px`}])},[P("img",{src:s(r(c)),alt:"Snake Segment",style:ee(c===0?{width:`${N(t).tileSize+N(t).tileSize/2}px`}:""),class:Qe(c===0?"":"overflow-hidden")},null,14,$0)],6))),128))}}),nS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAFf0lEQVQ4jZ2UfWxVdxnHP7/f75xzzzm3t/S2pS2lo7QguiGtdhRUFP0HOl9mmCNsuCyZwTiM/rGpzUZkRpNFNnVRF+NMlMRt6IIsSly6uUGYgCublbe21HaUAgXa3tJL72vvvT1v5t5iS+KyxD3/nJPznOf7fJ/n+T6POPPcSxTN9hRXIjO8Ux3H9DVE6WuAQmGbNv2jA3hegbJQ1Wf2/OJHxygji45DiBA61q57Ote2NLWe1HgfE0hc3yPvFjANS39q3zOVK29vbvtwB4ynCAsXkjeABLi+qxX/nQcMvAAsHc/UERkPpERXOhemRqgpj7K2ua2aE4wOR0a02IHbGIpPYWUi3PfLSUaOgLNNYur6AiCGQoxPI6sFfrmFTOYQGkTsMo7193yp79Lpje3fQ7Y1weBUnBOnchztyfHxuvbj6x5b0xMNh2NjN64j/4snaiO43RcxnujCjdr40QjSg4boEl49/ref/qHrQGf3Eyvlk/c3UpjQOdwNr+2GKm393hc7f/Xd+sqGS5cmL9/CUApklc3k/mMs2xUh//QWfN2AeAZq7YDpHB3PDOM7MHwNWmvWHPrJgR1786RP/vgvP0cGgrBdtsAQP0AYGjZ1TL12HLPzIF6FiVsdxtQ8yMORg/D3Lrh6GEb9+t5vbN25f0XT6uGrU9eYcfIopdBEEIBSpSEEno8QCtNYQvz1buo7dTJ77iYfcmtx4DuP/mDpprq1N6bddPVUKp782battNe28PC6z5KbzpQGWyo5CHzMsjDK0Kwg8GuFLh1b1RHvOjFTEwidO9QUzaRu29s3wZUrvh1VV+3YRDg9dLgpvP2O2PLKZTPx+CU8z0MzF0cZe/ssmcGLaNHyuyYFfw77LlJpnmeUqdyrvewq+9Sipk+2p9K7j+Vezr5lWliuQlcFlgi/cfGD/37z6L7Z/Cz161rQpFKEa6oiBx9/ekXrmo9+4ovRWhy3qMNi7RoyokgfF+sjI6OZhirNWB4sQxqaFvjFLRIk3nj7zqNn+nrveuzhy8oOJbVTz+6joWPDsvOWdbqxt59tS1aB5t7Ukiit3+Px0TeSE0M8V9kIkWoI/Dm/pvPi6XOP9Cse6bBC7b2/fflfatVobuds34XtW8KLWluVTUVxi4sBxWHdfFZqBi1mGQ1Su8UXgOdRYYRoXRTl/NkB69yZ/iqxO7ou3pjKVn49uhSUvJndL8loQaM35eq7/7v4JZ/ghfg1BmwjIYsQyrIoKtJx8xyZnea6OwtSLQQVgd4LbD6Ji7QtNCVuEbaQpAOfk84M8cApZf0AFsjglsjiiyIgVMwj1AcClfNQQYApBM3KoNQ9tzDXy//DRPGC+iCCQgF8D0uZbDHryOOzJz9GrHgJ5Pve4Lle+xIKDsVuqk875VURy3bK7dByUZjFUjoq8NEkrJAmOqqkxfc2wbQ3y7ghGHIL3clstkvtWLPhUNN9m089293zzSCVoiUSxRKKJmWjl0CCORZCzmlvnpkAZfBKfIzf+Hk+t2PrPVom/3vZ9q3thCvKx+rSyQfU8qX7DjlpJkr9E/NDecvJctTJLoxOCmKuw5tOCrehbv/ibOKhRfWLr6x/9EGkDBkkR8fjm7967x9rtm7+61Px85xLJUBppZNWZHcwPc2fErG5yotsVYjBVIIn4+9SdX/HK5u23/t88uK1ST0SRj20YRNWRYSGjWuJ/bNv0hgc/3Vl2+2VZy+MtJ4LHAZVQKi6YtOKVc2/G8nnvnYmcYOBbAr3Yx96SYtlvtKwsnFg9QNfnvF9D3emgAyCAGkYzEwlkLo29YXv77xMy8qhw06Mk07e78mmso0b7+xeve3z/zjt5BLvODlenx0naPvIu3f/8NvDUsrrhUQKwzQJfI//ALLKTtprQPIbAAAAAElFTkSuQmCC",rS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAADR0lEQVQ4jW2TTWxUVRiGn++ec+/89AfqtNMWqG2pFAQRMFBloSL+RTA2cSULggu2YCQxcSHRuDFxATFxRbRbFTFGIk2GqEkXJiZa/MGaDrbpaFGmRdqZznTmztx7zzHThkjVL/lyFiffe97zve8rX565B0wAVvCLOTbsO0Hvk6eZ/OAoxdkMXlMfq2WIqOJ57eCmZPHP68W2Nkupqt1zI9PxmMOpju70Wc3/lQhW5F8XDo6ToLRUeLq1uf7UnocSLUvzyxSKRQ698OK7uZkbG6avZF537hwRu3q68fU4joe1ayHFKMLIO51MBKd6HxY6Ui51/9bM8KHuE7se3C/lqnrDCSNLzJPDbeudqVKFqdC0vlrOZijnv0HHO1a5OZYwtKl8Pry2b7e7a+9jTVC0+IGDivX2jI++lU0snc8ef/mk6KTH83/kw2PzN8OBR/enadbjR37+7Hwuqi/gJfuITGjrNWhKyP077vO2bNykoFUgEMKaaTymN2/vH6yXbx0oVzPfy08jW+zHFwt8Mlpg4odBqM1z4aMaqfZ0A4wwsBRKlm0Dmt3DCViKILCQ0lz9vMJMLuK5l1pY/K7GV2Ml9OyNMocPJjh+ZB3ULP5Cis6uOvmbAV0phwNDCSrViJjnwHULrkO4EPHFxWW2DSieGPagYqj6FlGxsra661K6s7b97kHT7/9luZqtMZH12bE1Ru9GTRBatBb8mqWQC9FKKPsGW4d0uybZ50AFjFl1hU51pJ+9lpt85Zdfw7c7U3EyY2Xev7DI1NebUW2KkXMlWpKCI9AQvbxs6dmkeOZoE9SBvIFuRUyvgDbL5bN9SBAMgLu3HtgP17UIybSwZ6cLjmLx9wClhNuubDBuSipivQoaLi4ashMBC3NmtLhkRrS1EY6OTYuJpitVc2znvbEHeh6PdzIbQghtWz0wdxhSCdQNzIUQF4IC0eSPwW/iynutLc6nkjnTj2tB24Z4ljCyJ62x7zwylCRxlwY/WuvuuKK2EDL2bQ0jBrexC0GUCKqxwzVJENv42iVjxZ3KhW8m5qJkFK6Ni9Ihvm98Y81rGCuRpaj0PzH9D8PbGaxU7eXI2CGRNenEWiPKkfFkQg6KlRWhGr3CEPgbozJ51xkDBJoAAAAASUVORK5CYII=",sS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAFs0lEQVQ4jVWVfWyV1R3HP+d5znOfe+9z39p7b99poQXtRKzVloHirFtEzDKcomxiFv5ycWbJAENmshcTEzfM5pibC4vBGMnQEIthovOlElNGkZexIY5RyntbwEJre9vel+f1LLewhv2S88/J+X3P7/N7OUds3Lqe/1k6Xsn+gQOr3/37+zuwyePgowM5EjTQs33jG8sfWbqaQ6cP4QcF1m/dtPnz7t51ZMmRIUmGQTltF2YFQ4ZJrlQ0sGHJMqymNEzbkHfAd8I3Hz134qdDo79/zQu80c9ODKypnzN89/xfQl0FyV2HYOgISen73qyg67m4XgAefHcxdN5SxdhEiepKk73Hrjb+4mebNlHLp8s67h7dt7Nv+zMvwW9X3gQYuP5x/vwJSrbUtswKxsMxCqX8m03fqf7w2e6eXk5eWUgYtj4vSCdMCJXD5Z3R4Ijdc0CyMF1Fb26Arh/Dipblm3/z3IoNUiXCCKVQgSKnOdTWzVFt0fYxM5R6+0rz+EkhwgO7D257OhZR5rylC18+d/74o/2DpebDX8CB4BKDlyiynyO5rPlRx4JbEd1bXkILGZjhCJNGiYtWCUf5/KjrhxTtAjt632L9cxsv8LUG0/nLqZonNj++/e2du9YQAb4EWrMXV3YsaTSkDB5e/Aiy5rKOboWIpKK0BCkS+jT75AVeef9lhq6OfvvVLX96j/b4BiR/mMoXCMtoE0V49OFVrbfNa9MKpYJY0/VE0D/0H05fPo0smQrDBBEVaB5UygSViSwbt29YjOHftXh114UHb79/b5Sw7wceBbtgIlDd/9h5sqaqlvZblmJaFkrqjJUmkZqm4do20vVwoyHqozV8K1MH0u4lz/m/Pf3W3FN7+qAqTrayiqlSHuIILsIrO7fwoXU7kYoSc7VKktV3ImNVGTRNsPf1bQwc+/c7iXR2kRWxrjw4aJpCqZYX25cf++Zjj61t+nr7vwIVkG/KlBtCcVuU9xb9mja9Gc2F+dF6dFmDPPvZQYJAZZUS33Amhu+anLhYnYP5y6jFxzPOTH2xaPDUzQ/kp3LFocNHwzVXTyUZgz+6q+9ND5Rk3/lP7NbYffusiiTSMBB/3fBztv3uhXUeavOTFZ1kNZNC4M70pYYgrBt0j33OcTVJAKTQyVLBNHnOUKQpZA2vff5XTc1LOoJU8xz0W7XwG82utfbOghULpI5ddgsUrgrQhMDSDA4WR2bEVkVuYoGRoc6waNDjdGiV1BlJc09f7+PhiviwiXZSF0NnXp9bFJmuzAJiSmEEUEAhERQDly+9POO+Q70eozNWQ4U0SUqTtBGhPpwipIT851R/1hudmBjpP7NXfF9Exhdq6dS9yQbu0RIUlcNuZ4JaI0x/8St2Fc/yg1grjWaCQSdPVOiU+ya4Pq4CyIQser7q53AwOq5dK9l108XMgUnll6nRERgIpgKfmNJ4KFRBtSaZxp+d/7KvG3joIkSIkJoR1MW1m1zPpqgCWmQYQwj86+i28gkLQURaJIROSc2GMGP+jKxA13S0ACUiwiCumexwxhlTLveZVVQIST5QN4Bdi6eggpl14+6NlJqFXDXoTezuyZ0ngs60EFxxp/AQxHV5rVV0ozy+nHDGadFMVoZSM9AuinKSotIA5WIHNlpYyD0jqvDuAfcyJb8UXPBsdjtjDPsFfOVhCA3bd7jkFuhzp4kKjWrNRF3HDFCMOSVcNKJ6dEg8KZJ4qrzh6ALtLND4/5jlL8WnVST4XroNR3kESs1Ebmkml50JtkweZdk9Dzzb0DL/RemoIpWpWtLzGnynWHpBKVUfKKZVgCj/T4YmKAg1qk/ZnZ+OnHvKKedLQEgI8D30ZCo3x6p9ralt0Qd3rFiOdHCJV2do7LwDd3zqVcoQZZryK17GChSRWIyRoaHj+y99/JSOLGpCs8tlyKliakE0Prhy3U+eseJxwjGL/wI4g3H5YT81wwAAAABJRU5ErkJggg==",iS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAGwElEQVRIiU2VXWwU1xXH//fOvfO1O7vrXa+/wcbgFOIYCJFDQyCmQIKUJpRaqtSmJDSKWlWq1Ic2Cn1o+1YpanlpeYj6wEuF2oeojZK0DaKNIJQQoA7BwZiYL7smNja79u7OzuzO151bzdKmPVczL6Pznznn/M5/yFu/fR1SSvQMDEHTTZz+0/Gfnf3LH380sGHwnW1jXz1c6OkvvHfi2IzXtCmlTMZxBEIUWSmXyRNPjx8fO/DSa3OfXYZpGlAYB43jGJ7XQNfaQWzZsRdEoV1355Bz7NWhHc++gDUbhisrS/MFt1Zti4JmXoo4H4ugEHjIiyhYtzR3AyvLd6GoKiAlyKk/vAGFq5iZOPsLp1La0nBrH9349Ork0MjIQN/64f1O3Xbnpk6dcCqrUBhAFRDPBQRV0NO/eVOlfHfnmsHhGzuf+/arcRCC6boBI5XFzOWzP3n/1Czd98zgtRd++Nqf63Vn36+PvH7s4RFgaPRb35yYVEAQQMYcVr6ORzcGaLj2QxMflJ83rXugVH1VKASMoAECDgLvexQYqlXm/2pmcwiCKLN2HaClCvYntzb/uKb0S0ZdeI2IFIc3vtc1fHt6/tLPP0SMo1Ss3FVlDVQGYBU7B7uhYXT/K8eHti1g3cgotux6Fmfe/NWSCqDR8DN3qo2jnN+EyQWiOISqWIuT0+npZn3PhZGxf10o9g6hGXZARBFY1euHiAR6Nr38yOCOXA6xxOw8kffK3bvraEdOG8Jodz9AVDhuHUKTcJerm67MrY529e6lI4+uoUxndjluu5bQQj65OAun7uON35y88M8Lt7d3dFogIDBTWfhSoi+Tx5H9B6FxFWcmbqBRl7hancSd5hwMZmJhsYrNW/qmXnxl10il3AADlbqe5jKl6WFnPotcxkQcSVBFIAwDAAFc30ckJEQsEEsJyhVQn4JRinzahM54cP+ezR3Hl+Qb+4/eCRGlxx8ey23tXc8vzcxicbGBVVnC5dUr6NALeLJjOxhR4IUhVKrj0+pVXFqexHObnsRL2/fj489ngt9//PcVTeUOu3+vtq7mNWFtNbGhu4hb8yuoEECHCpkcKRH6gCQEnKrQFQ0KoQiiCJauY6gri7lVS61U3G6Nc7B01qirKWZ9Nr8Ev8axXKuAcQVRIMAIRygjTNWnQAhpiSdidlRHezqLxRUb7567g1u1RWSyBhTQOvPc0GqETVRLAUpNHzFhaDMyKIsyCAAhBRb8e5CxRNmtwQsDtKcyCFkIp+Fh9b7Equ3DrjWhcW6Rw+PHfso0oll+26GwhgHCJDjlqIY2lrwlMMIgZAyAYGvvBhQsCwulKqr1JvSkRMFB0/FCXaucEFHsK+MHvnN2957Np6fmbu+9eH3qS8tRGVMrN2GHNjTGEckYUkjEBPj+rufxtce2IbA1pJrtcIiNd27+Dd2DmUsHv/744SiKz7C1/UXoBgdCJZ1wtb7QjULKQt3z0WyGiEmMilcFgcTs0jJIrKBUr6CJBKEYeb0NSqiYZkpD39oCWK6Qhu+FSY9I0qNDg/tw6Ind+Oj6LCanl+ETF+fDC5AyxvSdEpbmI0QkQMawsFSniKIIURRbTc9HvpgCjXzR6g+RAE38JAxRdX00Ax8SMQSS5w9CIGqdQIbwomSAQnCVe5wrZc5YYodggERySQLF1FXMLVVw8tw07MBprVsz+kIP1+zpFjYJPg03QF9/2+/2jD1ypKMrG+bzba2vZYleMkMh4kLT8eG5EYROgZhBV3WwyIHtNVslp3WAUoI4FFhxXLSHpuA8V2KKAoUprRexbD4FXVfRuyb/8pgxnDeo+O7ZGx+Oc0OBF4XIGSZ+8NRBJPb69uQ5zJdK2LK1/5c7e3KnU6Y+3160WvlB0JoDWCptQFEo8oX0pcceX4crk7Pb3v/H7fFch4F5exmbuwbwlY0vglGGU9cn4AYBNJ2fLLRbp4vFDIqdFpLup0wdhACsVnOAOEbfmjza8imEriiYmoYeoxMbUw8hres4P3ULhKJlDqahIgpFz0rJRtP1Ua04IIRiOWO3+syqK/WWMtc4wjBKrL9YqlUw3DmEvb1PoeY5uDVbQywFHMdD6IUIQ2FRheD+cg2Ln68+IEA8oIElS52EJICmq8i2pS52deb7pSGK12szmwIRtnCKIZEpmBMwc14ul7qdThvgjD/Ibd1kQh/I+Q9mvsAinTFw/vR1VCsuuKoceOvNi28bKa01YYUoGP3yhg7DVEsdHW3I562kmv8x9Z9gyY/+v5FsjGEmEy9g4e4qkYLWucJbgol9xZHURRQniCHJ+//cVgD4NzYKWAE9PKUnAAAAAElFTkSuQmCC",oS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAFCUlEQVQ4jY2UW2hcVRSGv73PmXPmnskkaS61l/SmrbVpK6nalqhoRMQqKj5U9EWw+uDtQQTRooIgFVT0RQVFRBTxQUGfvFStiLfa2BitNrVt0pp0ksxkkrmcmXPdMmciXmrEH87LPmv/61/r32uJ0aEXiUhJNhll01MPMf7ZBKwAMoBa+JpYimQYlxaqlPCQzJNZ1r9h971X3/bWhnM243g2eiPUR2G7DoO9q9mvbE7WyzBmQyt/hcQnSwyhrSCraeAIWNIi1udLVvZ47lhdF5oVKlQogqBOJpZmSaabidxPDL7wIEeHFGQBI1S6jCnGV12KeOXOLlSqwtaeNi57dJzD+2DbPQPbNi/vPajdc+e1CBZ0BopyPSAu6+xavZycZvFz3YNIHDJpLdrdTSbiOycmCr1e4JDplMyV6lTWQeCI6uiZ+UiosJFeKTusStPTzBePE3FzdGXaOTJd5sCpeb6dqfPlzAmKI4eu4gc+uOQueOSmDG2rFOdnMqy8b5zC58yHCllQGBJqUXy3RMWapez4dCUlF3bFWZ2WmJ5H58ot1fb+zR8cmj6ufzRUviBr2BgpwUv766g56jpnQQIaAoFSkLc8EILejMnDA1twzZ7cRKWau2Tfm325Q9wyvjGFtVwReOE1FkoGqQlcu4TvVinkj+3Jn/nxacNIjv6RrvF6hECZwiVOZaVccvnTb/1mPvn8h8+8h2DXDVuuuf28pVve1wmVBKjAx3PK0fL86Tr+zLmp2GxS6s7WkC0Q/Ekc4AYztJteS7FaggI5AuhIrxnasHx9XpwceR3XrWLXJijmT90wfPjLdwZ3pjn3Ih1K6uyONI56Wnjiua/Y+0CFgUd333r3ziveiBkpTDOO7thFbLuULOZPrIowe1HfeZJsVoEUYPwLYQiHTWvTcHOF6zuLay8UP3bEsv2WnkhUxfDnD1Epz2z8/ttPRvr6THZe1wpzHtgL/vwbfAWJCGSi/PLpb4wMVdi44/7+dOvq7/SZqdE7Yoa1ffDSVjoaU1HymhekWISN5j/Hh2oV1zXw9ARCGkpoUfTC5PC+zh7Rum57O3gB1BvvUSzYughh41wF4DXiRGi/1CIIzUDqZlrpMgk1D/Jw/KcodlEDI1hc4T9NauSQOlJG/tIlqXAcyUROp1qToC1myCKipY6mG03CsDIl0KQiFlXo2n/V+08EKKWQmo7QIov6+L/xRx0CXUlhhAu2KUUo/EBgWTJcnMT85gb1xdliG+2NCWiJ4PpT2JV8GCP1kDBo5gl0DDNg7UqHiIL6WJRoPAAz+NvohTDBKwTMnaygG/3fLV2TGDGirbOi4bZtTQo/sMCMQFbR02dRcwUHvopSqyy4rZqmkQCSQFuMo5PTvPLaMGbbTc9efOVjtxtGYkwFNtreh/eO6lr8zNSvRy4Wtk4ya5BA0ZFVJFu9cCUREVCHoyMO06d95sYm8dmxv23ZwJNd3Zu+TqSWFXy/1nyPbZ1r3605vPrFQZuxCdHcaRlFyxoHEgqUBFPH9ly++b7AwcNVPj5wGlfbdnD74OMvR8z0Uc+pIjUj3Fpi/MjbBIEXd5x6ujS1f49rff241FLNQW6sNRS+VyCe2jSZ6Nh1Y90q1Dy32tHevfVY+9Jtp5xqPmyJEgFKCPRUS29DqlWYPmSVrdrw1ISGpquiwPeF0BBSo1alvb0nfmZgx/XflGZ/oTI3jhFtxXPLKCERjTFsAPgd/cMyK8WkKk0AAAAASUVORK5CYII=",aS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAACoElEQVQokX2SXUiTURzGf+f1fadr6pZzWn6UJRZlGZaZhV4I0U1XUVBXkVERaB+QGkUF3XRdYUR1YXWVEAVRRF9qmoUJCyeSoyhLAyfb0m26vXN7T7yLLirrufpz+J2H5zz/I/qGeth95WDjuNvbRhmh2k8uuXWglJmMOIZgXimALWrhxYYPorc0oDBI5tmT547Xrdp8SX3oftpQstC2J1YBfp3sJYkk+5QFSM1KXEj8hk6+kp7y9Rk6uUo6FgRCF3xMQq8KZfVpPPJ07Ln4sj2S9srb051Y5F9xYEs1vd/G2T6Rxc7vZThUHacQFGs2cqRBjiA1O6WBQwgc2HnnHKenYIbDNdU8/jhcFB6eqlMohnRFY3I6AhJUoYAANdhJZbAXtEwKAt3kBrpBs1EdfIUS6EwlTrESJqdncGkKLESqf3Y0ZxLSoFUtIM98ajJGk6WQhHme1NmrFVJvREEmf7J/6C9DXRop+IKrBkhAPMRp53oQAvQpmpxrf14LxYma7F+GY5AoTZJnzwQd0sIGRO2QmAXFXLMdZk1U/j7rdrSwmQBc2TZCiQREEeLE9eaGh0N393uDo7UssdAw6mLLgIUZq5Hqcl5J89sovN4Yo73Ex8qIBuT3ed9/vaHuqt3R/sDz3Iaf2qNVq+U961fRnvwGGf8w+6UYFJbn0ZixRl657REt5/d2LN2We0t0ebrIyXLyzP0ku/lqyyBFlBzZtJ5ILIqU80cUQpJltXL5hZv07JIvaxyuisriylDb4Uuo5cvWMvjBzf0390LAKeIc6v88Xj8b1/8TzyDLYjU30K2H5q5dbW0LBaYn8YwOoRqGgXdshC/BMTauq7ozMRtR3/aP1KMRQWD8o0OFYDjzzLEzN/Mczjv+sI/li8vwBXz8AP4pDoAIk/p3AAAAAElFTkSuQmCC",lS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAYAAADnTu3OAAAFv0lEQVRIiaWWe3BUZxnGf9+5bM7ek+zmuoFkaS6EXMrFQjMQQGgDrTAWBGodZJypI9WiY63VjpWObcfbtFN04B+nUx2n4zh2qqNTr0zBPxQF2wLSUGlIAo0Bk7CbzWZ3z+6eq7MJWgpJZrTPnPePc+Y9z/fM8z3vd47gAWkAw2lBkMBlFgWiVAZfWhnr2Pfwxge590PbyOrTmJbJfCg6DhGPB4WCE8G8TmLBDGkCEJnQEw89St/tfeSLOq7rYjk2iiTPS1qCYCdJpqncdhd0xmREwKYxDv3/qEmcONU+XO6XL4Y1/947W1ezZ+0DWLaJZVu3EL2nUCCYhtVtsGttHRk5x+rKep6dPB898r3xKDFqPvPVB9m1fg91oTryRh73v968BweJMttAsIUDyKh9a2r2p/Txto0roa8nxLmhLGcvOWTzpEPGvh9WeCP5aDD8/aAvNDGXwkQuTW9TN4KPwMGPP8bLJ//023d+dPKeDY/Cl3eG8aoymzuaGUyO0LJtDFIQXNfYsSQYejtnmuA4DBppkARYRbiYYv+OvShf2H6A5UvW8OJffn6CRqSCLRb/8Vy63RTw1vTfePdfQBVQAV3RmFvlj5AzdIb0JJ9u6CKmeHE0H0aPl97bVqHE627j8vi7XB0b/eayezqQ3djTz3/r6EHCQB7wArWABkIIbNfhtcQlHr9jJ0+09zHd/zpaaxeVG7ZDZhLJlVVcVWXvpn18ffc3aKiuSbEIiCvDdJZdpNk3wqzrOI7DicRlvtK1hW9vfwRXCEYLU2SLOUhfwyrkUNY0ds809i3rRREK8irrUHe841DI46eszEf/lYuNh1/5zmUM+Ov0GE/1fIInt34OZIlEITOT25Jqx7VxXQclMtiPZRpgOxh6njtbOrl7xUdxC3kqAuX8JF9kJvg5+FJnH09u+SymniZlm8hC4DoOjmnM2FGCYus6jlEgWLUIWyswcvSnX7x2/tQhNRge1JQyK2wUtGdND7bi0P3G6d+/dma3PqmnFCs71Vzbtf7x2u513w3ULJqZkdKl2I6FZZmUL11BeSzOheO/qjx59BLRRpotBzQFasIhZCEzcPr1xboBigTJEfDHUtGeD+9A1bwI4SJJEmLg1RfJJ6+SGb30teRkprdNG2ls87zdnnPDC86sT8owVGwZOJ9dNFQdqz1Vt3z9U55AGKVp405yY8P87MDudb/+w/DWZx7yw/2t+Mf1BQmprsL4xUDrj4+80bppQ522a/NugnVx5B1x7fMTgxd6m9XBuze3T0aWNdUglV7I2VB05y/dpMr10NmkE4/H3ITuLUsNnl0ljnSRTKepfOTherwra2FCB8sFxwXDmTF6TtgueGWIBTDOTfD84VECAVJKuCECoRyyoUBKh8kilJzXVPCrs8RzQRazCyZyyEWZUIOXoN/rSu9rLZPJJAr88tQ4V65kZ7dzPoXzQLr5sSIJfKqMWlIwx7n3vxG6s+GUZPfWlf5fhR8UcxI61+uDKxQupmWTydoYpd31qeBZ+Ct3M5T33Rs2oYiXj/XUY9oOY2+OE/TK+OuDs0f9fBG6UaFVyFKcKmCpFoS9ENWgNYysyRx/K8nfL2eud96Un1KwPRJEfdiqRTGdxypmhPzJtUsrtMro2ZCm1VhDY+UBSypNPqJoUx1QaKr2ogY8syQ3CtRkuGYyfi5BUq+4Mq3UvOQPV56Q99+77ljLpvt+d+b0UN8PXhhoaWmVqF4RBkUQaAyjRr0guaAK8NxQtRoDZ67xzOEkciz+5vL7PnW/lc8dU6JtK/FXL6Yy7L/QebtokURI451cA7oLonirsv8gaYIbvLqsO5WrKPef91XFiC5dhfjnn19FSBLDx1+mzOcnPT7xdP9vXjnojwQWND+XzNK+dcdz5fWxx8zsFEs275n5/1HsYgEhCfyRBsINS9BTxwoeFco88tRChKaHclVV85GWO8iMXsAq5sGFfwM7y1aYtmFfigAAAABJRU5ErkJggg==",cS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAYAAADnTu3OAAAG3UlEQVRIiVWWe2wcVxXGf3fmzuz74TiOa2ftPExwEto0LbRN01QpJChShaiCqjRINCgViKqooCJVChLiDxC0QqBWKAIVhFpQVYiEIDyiPogCiYkDzoNgGofmbcdev+3dtXceO4+LZpY46UhXe3X33O/e73zfOTOi/2I/bYU2jg8e40s/+grAt0jz3XRbYm7v3WsT5fmF4J3BUQ+F2rmpZK5qzet/uHCtMVN2WkjxvTj+jkcWsy00fI99O/ZTTBd58qWnsoyAlXOXZcwUUrOgAYRgaIKcmWLGdTLMAi1kkYC6A/DpH38RpRS6ED9oy3Z8euum3hZ1z00yyRYWXZtAhaABAgKlqDoOO1eVYJVicHJq99SI9wgJ+oBvxIBn+wea0CH3U2Pzvbvy7Nv6EFfGZ6naTnSxDz0Rm562FnruasVu2N1T/XPdJHHiQyNAvP+HB/ycLEf+PVv77MG//vOx1lSKzaUO5i17CS/akzZNzo2Uee3sf1iX7Tr51Wc/fzhhmBNe0GgCfvvrzZy2ZJYdGrx+jtcPv7ni+pT12PW7LbasLSGEtgSohCBlSk6PzMIZuNxx8/Svntv7wy0btt3O4cbShniSS+W2Zc2scWT9e71TK6ZY35HD9QKUuk1aKIXjBXyss8CFT1TJ5Yvr/jTw9qcGLp/1rcbiiTiG7UuUj+Kx45FPtrNjw0eYqNYQAiZrixw+dT1W8omH19BZyBKEcFcxy4kPhvnbsTLo/B2dR5s5vM2ojEZjvDZvXZqYLlZtG1PqzNbtWOHomVmsx+GO71N1XEZqlSpJkmiM3cIRYn9HPGkzTaYmh6HCS6Q5sOStCExfYsGH1l1eJccL+ZZWar7fzOHogUNNwNxyzt14ny2v7IFpIHuHWW6xuMPAROLnEb9/8kU+3rmOeavWPOf4y482bRiGb5ii8FS2fcLOtY+2+F4aKWHRgvNDLkrB5o0m+YzA80EmPKpjher8cC7pa9ZhTeh74xtePNNHqkC0YeXsDMnP7V6RXH1fD0wuNmlVFZUrGkoJNrUnoSghVNCeZGxutNB3cYjCMjo1AXYNZM+DO7l25iiF9pRaboRcn9CovTtNLgVrSiauF7K2V8Zsbd8nVQ+5MepRO28zNxVSbE1gJiTViTrd929H/+U7lwicKa6e/8fTthX0uMpgdEbH0GBVSUY1Tr5Tkm/V0T2F0AVDlxsMXvJYrLpUZxdw6t7wvbueeWP7c4eQQ+++8jUj22nc92D36kzSQk/mEVIjn41LA7sRMDbox8VeapekMoLVJZNiIUR5Gr7lYbmp7kSx+8WL7x10xU/3UPVD8l/Y30txfR5mLWLnBk1J56uKPx+34vb1+PYUrcv0OOFx24rKclmS2hWLN1//L5qiJovtKeU4inrdpTjr0FgMlpxhSjCkYP0aMwYxozwEikZ04UazRZnCxaq7ZFsSGIauZKSeQiF1AQmQVmQLhS5VZHuyaXjgHuO2DwVomiLwRXwYpoaUInZBbBshFJHkjhOiFkJcX2HI5gbLAV2LbiaizkCjEWVDkJAiPtD1IbEQYjuKCCeuAYGGacDQNT/OVXnSRxZ1ZmshR/st/jXkoWkibv/nLzb4y0mL6UqALEomZ3zePmFx4UojoosQAhmbVyh8X+GqqGJUfEz067gBni/iyosYeX4Yr4VhsxyDQOE0ojyqJkw0fv18puK6QWHbIx2sLKUJAp90SuA6igUrxJCQSTe7Q91SMWgmrZFOCuq2QmiC8XGH/pOTUS6rMnpBhaEgnxck23RYaDbUZFqQzGgQChqNMNajWNAjRZaaRCYjIGdQrHtNZoimKNFoeGFco+XJgBtjHp0rJKs79DgVt7pVBBxZaWQiYHTSp7vToJSWeF54WxTPtYXnOqRSEjqTzNdC+k5b3Cx7kQdiQcw08ZCRHQzB6IQfx8xVAuhIkkmb2IsudtUS4o/feeDlwAszK5dPPNFaDLvcMIkXSlry0NVh4NgB47NBbOyO5ZJkWmN0PGC+opCajyHq1BZkuRJu/Z2U+oJMFzoOzI+c4tSx6d7yOF37nimyaXcvjC00TexrDF5q9sPOdgMyGqW1glJnjstHLvOL1+ZYsZyrvQ8NP79+27NIXSZI5bv46MMb319ndnb55rVMZWC0y/UyGDosOiGGiD5tYGJKkq2H+B4kxso0RE95+95dFdzyoF29yfTwAGLm6imMZJZ0+zrKF47S97M937fr1jfNZCr+aogqUupN5f1Ai3tG5MuGY5NMJl7d9uXfvLBy8+PYEx/g1atoKgyQiQzDA7/lxMHP4NuWky22YBhaJWFoFSm1iqaZ8Yjm0Vr0XxQTNFy77ye7udH/VoyBrvM/+JAmW/1UTH4AAAAASUVORK5CYII=",uS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAE40lEQVQ4jU2UaWgdVRiGnzNzZubuN9fE28SmkWymWmNEq90DtWpVFEWrUHABEVFQFARBkIJSsAVR8E8UqiJIfxTUH2otbq0btrTudsnSpkm02debe+/c2Y7M3KT1wJlvzjffnPOe877vEXe/fAcqZjI+N8qJ3uOg2IXkFWAOQbUF6FHU8KOoomcNgj3ASxdzPshxaVOrJB35NuLS5IeTP8UpASY1yKVCb2liPZo0+jHqOvEoF9aEi1sgm/tLHNCOhKPXUant7VfWZrpWZvn9wjgDfUXIwG3XrUIIxZe9/8AsNLcn2NDUyLeDQzvGhiq3EuMIaZ7ZcC6D9mxpG9uKLVCsdDExfW1/utR0X8dqkvkMEcIU3LiqnpubGiFZRSnySe5qa6NYF1uJxRqydG0czPL40euQI339ex9RNyQekEbHalvwUWyeh7WD7Oy/nDdPdzIwafNk4jfQfHpOtXLNWIL3EhM87BzkqZMN7Oxt5Ix0Wwt9uR5b8wry9Jm/n3bQ03v0VnBXcDzxDTQAIxW2nruJrXPDPNnUH53dEwNNyKlW9q/4BOqgbkSju3c93cZEw6v66FO2VAWZTKQCpQJGzSIN3iRrKzVsOT/KvcUGSE5gWy7PjedxhaJs+qQT42wvreDc4CKdpQwkzvOnYSM8hVQiEHvSa+cKKsi+YGXJmSaUdShbYFUgXgZPBzsOSkCiAtKDkgVunGl9in1ighpM5jFCoudlVQ2CSeWRc8OBgJRT1YKvgVAQK0WqcZRPxVWkDQVmAIFiY5CkFAh+USriUAvlExeCY26R9+0pBoIK6HpVV9FDgBBROOwW+MCe5oJyQVPUSpMt1uVsMFLYShFQFUb0Ek4q0TDFsj2Wv7CkZohrGhmlLdmGCGHIflmpi6aSocjDxDojySppVouAmcDlkDtHo7DoNjMR0m6ZjvoSfC4EFU5UCrjICJC2jFChiF0cVn3moJhUAWkRXAKsySraoFoTbjOsMUSIsLqIXD4pLzJkUCUj8KjXDB6zarGWzxH4y11g1HdZJ5NktTgtukWLXsvZwONDp0wsRGmXisJxHLJaSIQOYVQqQlNjJInL2BI8Ra9v87O/yOzywiFiI02rZuFG+0ToT2zePpXJX/b5+OTMVeedUl1CE6R1C9t3+NNdwA48ctFWBXVCZ7VusUoz0TXJmF/hqLfIqcAdmFHBizriMxlLJ/eN/9jHiYWhB3sRHa+nmrkiW4PjlfnYmeNqPUazXkWZlwnyy+cpJRNlh72FIdrRxvIY75bDtNA16q5qYmWu84vNudTY/Im+zsF/x7rshMEOK0fqkkiWyBCMK4/Z4hzT+ezJx7Y/8KuxUPw7cDy0UHrtt23CTCex8pe9MXL4KF99+t1rb3nlrkftNPdnVoAKHfE/pk2Dn6ZneLvyD2sGra9v39T1fPtDd+IXbZTvI71yBSMR5/SBQ/z4wX5SZs1wY+D+6whVRgZt85XKRXmHXMcWytS0rBy8p64jIYbGRk4d/B4rl6V+TRuVQjG8IKrFw8f+wMNj1hntWb/plp4rb+9+8OXdPQcM00TTqk4JW7lcpL4od217+qEPrfpaZocvoGwHe2GxKtXQ+4Hvk6zLofBpbr2e+/e/Se3VLV7ZnUJXqiSVKiz1UiadYmL4vPvN7neYOTuMlUkh47HoDgH4D+cYCS5CNN4aAAAAAElFTkSuQmCC",hS=["src"],fS=Yt({__name:"GameLoot",setup(e){const t=ve(),n=r=>new URL(Object.assign({"/public/loot/apple.png":nS,"/public/loot/banana.png":rS,"/public/loot/cherries.png":sS,"/public/loot/grape.png":iS,"/public/loot/lemon.png":oS,"/public/loot/melon.png":aS,"/public/loot/peach.png":lS,"/public/loot/pineapple.png":cS,"/public/loot/strawberry.png":uS})[`/public/loot/${r}.png`],import.meta.url).href;return(r,s)=>N(t).currentLoot!==null?($(),_t("img",{key:0,src:n(N(t).currentLoot.image),alt:"Loot",style:ee({maxWidth:`${N(t).tileSize}px`,maxHeight:`${N(t).tileSize}px`,gridColumnStart:`${N(t).currentLootPosition.x}`,gridRowStart:`${N(t).currentLootPosition.y}`})},null,12,hS)):en("",!0)}}),dS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAACTCAYAAAB4dbz1AAAACXBIWXMAABs0AAAbNAG7DiRNAAAGVElEQVR4nO2dQWhUVxSG/zeMkzEGlWARm0WEYhHqwkWklbQYNy4qri1diItiu4s7pZvGjZiddSXiQty129JNNpqFuGgWWSiUWiEBg5TQIBLjZDLllhkmmti557Rzuc4f+38QQrhz35z3PnJ577x7zy1CCOiWxqnDd1HgGEoBKICAAJQAFKH9g/ZP++9m26bPvP4dNvVp/b5UufH7RNfBbVFK/7cTZkdCyJAQMiSEDAkhQ0LIKCeGUwcwb7Q/B7AUaRsEsNPoW02MbUuSKqQCYNhoP77thwd3OzWsnTk4BuCO0be2NS9pGhqyyJAQMiSEDAkhQ0LIkBAyUtPvUyjwoZF+f44CS5H0+yAK7DTS74sohRcbU/Sb0/phAAWWm3+HDun8vsknY1tRSO7nkFRGMh6bEg1ZZEgIGRJChoSQISFkSAgZqbe95wHsNtoHACxH2o4CuGz0vQfgrNFupe63LElCyj/Nznbbd+3MQe8jjyrXH3d8l9KkPp7z8ad3aMgiQ0LIkBAyJIQMCSGj/Ndnn4xtnKUeNqaxS+hHEVaMFHg/CqwY6ffZbT8+eBY55QHnUhyof/PBWPy77c6rF4fG3kzJr8f5Ku43z/f1Z2arF/6MxZ2VsnM/P++k17324wBit66x55N1RgF8mXDyKedlxZ0VDVlkSAgZEkKGhJAhIWRICBllZznBIoBbRvtJ53T6jbY5AJeM9qozA/6r5kykSFvzvG4afY8YbXDizkrZuR+fK0/NRJcmN04dHnOm6qzEGrbd/rUppOtlz/Xx4e+s9r4rC9Fjr07sbbZ9bnSPxp0bDVlkSAgZEkKGhJAhIWRICBlF49OPg/E+5CmKsM94H/IUBfb1ohpQfXw4vIq5w/Hwz+NtfB+ygAJDxvuQN+LsfC6t89183Obv6e1fv+h6KYT3H1JPbGcl9kDZczRkkSEhZEgIGRJChoSQ4QmpJLanYM2qTyV11r+FN73JxAvst/LUzPuxxlZVUmCf0T+lGpA5L6ry/bwzMytOO/1upe+PVy8sdYy7dnWXF7c3vclEQxYZEkKGhJAhIWRICBkSQkYz/T5npN8XUYSfjbT2SRR4z0i/30OBR5H0+wEUGDXS7w9RCr8Y370bBZ4Z1YCsWSdXUOALI/1+DwiPIun3AyjCqJF+b1+zaOq/igK1EEnre9OA4Nyve9P6U5fKWlN1PKwpRrXMcXd9zTRkkSEhZEgIGRJChoSQISFkeOn35+0VqTGuOf2/BXA/0tbLakC3nFW2KVWMkq6ZJ2SpPDUTDbxx6nBsK4p17hvvQ5yu+aoB9U38Mdden/KfqV3d5XVZ2n5uJRr3y9sV85ppyCJDQsiQEDIkhAwJIcO7yxpsnBixKvIMOv2Prp0+FJn93rp9tEiqBmSxOrF3PwrsN9LvA0BY7px+d+MefHmj36hEZF8zT8jOf1FVx8K6X/dIrQZkcdZJkaeQdM00ZJEhIWRICBkSQoaEkCEhZHjVgJop6GmjfU/GzYkXnYyslSL3qGaM27tmdeu8vGlA0+WpmegS3/ZyhI+M/inLEW5Vrj/uulqQgzcNKGU5wvT2cyvZlkWLt4yEkCEhZEgIGRJChoSQ4T2H7GmcGLlrvJPwnkOurZ0+FNmcuHU/b/WtWpeqPj78Kq4OyxEGUIRl453EDi/u2uTgUuR9iBd3UkEe7zlk3nnO8JYjpGCViG1yLOHYOePuanrROhqyyJAQMiSEDAkhQ0LIYK4GlJOc1YCS6Fk1oNz0XVmIztxKqQaUGw1ZZEgIGRJChoSQISFkSAgZXvp9R+PEyISRfvfS2NHNtdbOHGwuCThrVAOqohRqxncvWJuCrV4cmjDS70e6jTs3uasBWZtr7U88tkeuuLOiIYsMCSFDQsiQEDIkhAwJIaOcuEGw127NwOh3ngUeOhsjp2xOnBJ3VooQQk++uLUcocCdXLu09U0+SVjJ3js0ZJEhIWRICBkSQoaEkCEhZCTd9ramARU4lmlz4gWUwpC74bBue98atBsI50RDFhkSQoaEkCEhZEgIGalCkjbidaBdMpCT1JP2yiOlVAO6mbEaEC0assiQEDIkhAwJIUNCyJAQMlJve+u9qgb0rpIqpNLDakDvJBqyyJAQMiSEDAkhQ0LIkBAyUm97zwPYbbRbOxh4uxv0bElAzwDwN1ddUpzkauj3AAAAAElFTkSuQmCC",pS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAACIlBMVEVHcEwQGiMJERoAAQYBAQICBQkHCxFdoroJDhIAAAMKExoIERoUJDACAgUMFRoBBQoRHy0BAQURHy0IEhkGDRIQHCUCAwcXGRQLExcMEhYCAwYEBAVoaUoECA8IEBUmJBAxLhsBBQsJEBbLgA4EBgkABQkyLxN+aA0EBQmypxYHCgsdHxYEChEzLRdIRhJGSi4LDxNgPA8DBw5KMBFhXBIaFQhUURZdPRE/OxVjQRVpVhFqYxOsjhZwSBIXFweKghNPMgxQMwt4cRWmnRk6NBFONBUdGRL/9AD6yAD4xwD76AL5xwD55wCriAEaEAV3SQzQgQv4tQPtwAX5mgP5ogH5wgL//6uTkmg2IAb5qAL6mwb9/av5xQL52AL56AHnjgf68VX65QLouwP64AP4sgP57kL47zf55wXYrwbWkQRIPQr96wb4ugOqigc9MwrkuATywgL3zAT53QPnpQX9/KT89XT2xQT52wS0iwdOSA0KCAXOwBH1ngP30wT0mQRRMQkrJwn45wo6KQtoQAz04wjNpA756yj53lXdkwXxlQf3rATAjQP47jaQhgzMhwlcTQpkXQtHNgn8ywL320HQkALZsQTrsAb89Wj1wAXpngX56x/cjghRPwqxbxDm1QruyR/ZsASlcA3hjg7h0xN7chCXegidiA3ftAuSdgiymRDjy0fXrgL450N9Uwzu7qc4OCm4tWLq2A7ouk+QjUQAAgRHcEwdPeGQAAAAtnRSTlMADiDK/Z9CAVr2NRkE8iehB+gKL0AU4WNHU9n7/YM9wny/Tv7GpZz81Py2WX2G4ZJz85jZ5vbJ3brP9vb06f7x8P7t783HfO//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ALwkrV0AAAPWSURBVFjD7Zf7VxJpGMdhDEGG6wByUVFUvKaV3e/X3XPeBihk2bSUJGlJFIsoMBBS0iy7rbpes3vbdXfbS39gcwMGtXpnqtM5e+bzA+c934HPPMPzvOe8IxIJCAgICAh8Q6RSKY/k48jVdomqINFJ7Gp5QaKS2O0mOJ0CM7pc+8xYvgApZiYSI6ZgJaatLtePrOQTqGzba8aTrU1ILkGaNhPJFlu+akNTa3K8Zm+tHOqBldc8XaNXtPmfq7RX097+X5W6XIKWhsamTx4rM32ZUM5PiEh2Phhq3NaG5n/e9gOZqPN/gqFtR+PrBzvtOqiZEckSCeLerKaITGWJRDMrEUmtykRiowhycnQVFeuRwqrXV1SoViXy/9PeU6waWZjkExhtK/tntllXJCabGVaHoXUjzSj7/hq0asS4KmlBNXDC6tL9z1qL2H22Wg4929LA7rOuYdPTvRYrnFD2/k52pyB6A/V4Zc+zWw/VkxMvJfYTsVOKIYXrSCFV4UYltbuKS3JCY4mM2aAnj5XAC4MvdldVKxDjjlCdTCyWbdj9Oh7e1WLWoMY6IjFg5pZdTzgJ+48+HKnFqsvuhQe1KkR7ZbQb4O2DDQZrSSgcUsoNlsF2t4eD8L/5JUKoyQvHunFCaOEtPPHzLw8Ha8WMUFV6b4yscKrBoFcuh5eVctQS4iq8PZY83HSk/nfnq/rKysZkkBDGxvdUVta/opI94zGuQkd/smM57HQ6X2Sm/ul3dAOAT7/MTJFJeCrzchrnLAym7t91kty9cdFHCgG+kE3uL+CAs9AXD0RvDTmHbkXdvbQQeDsXqWSx0wu4Cx0OfyT9m/PGcMpPrCkhAAPpPmdfeqAL4HyEvoiHFHb7WEIPIfQM4AB8XSHgJ3TEY9G+uVgv6WaE3kC0L+r28hU6ji4MR3zUihEC3J120yteQn88Rdbn6E1FcMboHfB+gdDho+u7CFbDT8iwUojjnMem5zrB0keEF0gC8EIzIbxEMh/054V4DnD+8ezsbJQQ6mF04uoN5X9fppg/y/DHzMzMo/Yc50nmJp9sqjJhEMc5bfmpniDF2Uun8rx5e47h8QWq5V2TNw+WIjDnQ0JIP+lST5aJiYlHZ3LE6BmavHkVWuinyTYlTreW1WQSDsKJAEWMnkV/KlLY5UAnxU9wQp2l/K9/T1PM9VLEgZegi4ZcLtKXTz89UIR+XqhBqt5lOij+7GRKKWT4Gn25I2NEoE5gxUUM22uOr0XNZuZ6LeQZViGmwZpda7JVjzHf4HBCZN7I1Gq1RMJ8MqjVbYiIL9K1EV6vBQQEvj8fAJn9qDxmk/WXAAAAAElFTkSuQmCC",gS="/snakeGame/assets/edit-CYRuMFB2.png",mS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAADAFBMVEVHcEwHEScECx45HyYFCx0EDB8FCxwEECUkIDIEDCEVGS0RFyzVl3QIECcHDyM3HBgNFCoECyEMFSsBCSAHECesX1sIECcJESgKEienV1UIEigKECIWGSwKEygHDyQIEihYREcECyH5u4AJESc5MzkGDCMJESSrXVoIEyoLEicJEicLFCoJECdiUkwMEycKEygDDSTBopIjICxIMD5FOz396cksKTITGS2GL02pWlcYGi8HESmJaVAHESecU1ELFClbPDnypWu6gnMYGy+uYV0nJjH6sHPGpJHHqZT0qnH7sHISFSUOFismJTMjJzaPfHYyMzY/HzozKi4bGy+IjY+lVlS4ZlreiF3zoWj2pmvijWHpsoaqXVl7Ukb7r3DFeGPKqZRmUkcZGyq+i3xxZmbrnmy4fHH7s3fFpZKtXViBSk27czdsVkmlaDMuMS3RlGv/zEXssHZoZDZJOzSyoUCubDQFEir86sj510nbn3fprXL73bB0LUju69f079n///8A623/pd+duXb/vHedV1f/uXb9t3YrJTRgO0QNFizvqXHqoW7NmWg6MTgzLTaQb1X4rnMiIjKXV1b5tHRxWEx8SEsXHTHIp5TipWyDaFTrq29pVEhjQDL/q0FbS0XTiWntpW9PND/Ed2PKfWX4sXNFMDyiW1ezY1ylX1mzZl3Cc2CJTVHjmmpCLTt+Y0/HlGUFESovKDe1iGH9w4ghKz+wYlyRVFKzYVpzRkfyrHLUiGE7JjmDTU1uY2Lzr3KyYFxpRkiDdGkqHzabhn1QRkXco3vfpH3g28zekmrgj2JnQUWpcVq+bV5lXF7BfmDNg2i6hXjxwpJLNi+zazVZPzHlpz//10p5TzLIPl733LpfaHL97tKueFz5sXHTnGmualq+jmPMhmGhbVPPiGFWPUKwaFq7cV1RJD98cDlybGn/ykXdu0bOqEP/t0HuxEigYjOoaTXdiDnDeDfghTuAh4zloXZCQEvjrnqztrLKzcX///W+WgrqCAD2ABcACgNHcExPARUVAAABAHRSTlMAixQBDA8HPPQY2vULaSUE2h/rKIP+kjihGq4+lMJIzv8t/ZigNVXc+FCo8THxQ8x5Wrr8/vv0+fl47V3wcSnl6uku81N1L7imUe5L3lz1/MC95YD8FuZ4fR7vErzpYu7U4+L53PHZ04e4dub5+Y/t9PP7avP5s87C+OCl6v7+EMJ2//////////////////////////////////////7///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8Acc6WdwAAA3ZJREFUSMdjYBgFVAOqgiRqYNYJyOMkWjWrIJsgm7BWSREjE4sgvyAbEVrUpLyN9GSLK16YM/oaScuqEqNFKKg0yDy74Op1bYfcJHtitLDycl/60Pvp1dvrV9732WuyEOMZFl6Oj2/eXbv2+uplH2824gJA0ezzXDC4rM9KnA4+LfMrc8DgkjxxWoS1Jq6bCQZHNsgT5RNhlSn9k5ubmzf19/RMSeRlIUZHf1trW9vkTS9vHVzfPEPXlZUoHa1tSzb1/fj1ZXZr6wwzWyYCWsTWtbbO6pk8q68z5Oet2W2tMzZqaBLSMntW6/rZ+2Yd6eyctuXg5s0zNgroEdAiwj1l8uRCJaXvR7ZsCam7fbPHT46fUGphXHquqrrc9Pbx48drb37d1OejQ0gHU/ChjfPyK48ePXbs2NH529qF9AikGBYZrpobFs5mfb1A0Nd3YGqnAIG8ySZmccNid6A4r5//4cOHvxm3TBWQJmAJv3jg80NlwooB/tOnT78wqWXPIX1Ckc9mYL9BSlFczNfQ0DBt5f6p7fIEg4tfzVZfhIEPGHf84WFAHbJyxCRKOWlxawaG6IioMzsmbtAXYTRgZWC2s7TkwadHR4SXmSHS8eSeiRsXLnwyWzeYicFFVF0Svw4GBp44x0ft7Xu271/VPSvHlYmAFmVGIOHmtaavc+r2ltWTzm/eZ2KQRVgLj6fXrvbOHS0Lp025aKpkomEsGhOKJ/olZKJ53NIn7OrtnLhx4mygji6TDUszJZlxRwyjtm5CBo9n6s6e3v57PTOaldY86+s0ssNjh5jD7rPuTgxO8fvaemY1t7YuWPR06bQdsYw4Uw2rjM391QopHh7uyYsXn+9qXbN4UcvSaeseP7SRwVUAcHKt7z4xZctBUAI70LJ4/qrVC9d2npoxYcJ6Lk6cWu4saX5wQGHv3r1npxl3dHTsnjhl3a4lzRNO49Yi0HFuX/OC0/MU1q5dqzAPCPrbmlvvLpi/GqcWVgntqfO7u7u7di5etKirDQQmd3efXLXsFE4tDKyyHSuWb926akHX5Mk7J7cu6epas3L58mUd3FI4yzI2Ce6OSdtatq48s6Br0Yl985evXC46adJCbi0mnFHJzCRh5TxtaUtLy4oVLctWLAMytm20slLGW15y8jFqcHMgAyFrPkI1M6c0OwoQZ2EYIgAAF4VUUSf8Yh8AAAAASUVORK5CYII=",yS="/snakeGame/assets/noise-CimvZ6cp.png",_S="/snakeGame/assets/snake-DRw8Edqm.png",AS="/snakeGame/assets/snakeLogo-DZt-Rg9P.png",ES=["src","alt"],vS=Yt({__name:"BaseButton",props:{text:String,danger:{type:Boolean,default:!1},proceed:{type:Boolean,default:!1},icon:String,styled:{type:Boolean,default:!0}},setup(e){const t=e,n=r=>new URL(Object.assign({"/src/assets/images/arrow.png":dS,"/src/assets/images/crown.png":pS,"/src/assets/images/edit.png":gS,"/src/assets/images/leaderSnake.png":mS,"/src/assets/images/noise.png":yS,"/src/assets/images/snake.png":_S,"/src/assets/images/snakeLogo.png":AS})[`/src/assets/images/${r}.png`],import.meta.url).href;return(r,s)=>($(),_t("button",{class:Qe(["text-sm md:text-lg flex items-center justify-center",{"pixel-btn":t.styled,"pixel-btn--reset":t.danger,"pixel-btn--proceed":t.proceed}])},[t.icon?($(),_t("img",{key:0,class:"md:w-7 w-5 mr-2",src:n(t.icon),alt:t.icon},null,8,ES)):en("",!0),_e(" "+Dt(t.text),1)],2))}}),Gs=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},rn=Gs(vS,[["__scopeId","data-v-d8cde3a1"]]),Mr=Gf("modal",{state:()=>({gameRules:!1,gameMenu:!1,leaderBoard:!1}),actions:{toggleModal(e){this.$state[e]=!this.$state[e]}}}),IS={class:"font-bold text-gradient from-green-600 to-teal-800 mb-4"},wS={class:"mb-5 text-lg md:text-2xl"},TS="Welcome to the slithering grounds, where cunning and twists know no bounds!",SS="Back for more hiss and twist? Let's see if you can top your last tryst!",bS=Yt({__name:"GameInstructions",setup(e){const t=ve(),n=Mr();function r(){return localStorage.getItem("firstVisit")===null?TS:SS}return(s,i)=>N(t).gameStarted?en("",!0):($(),_t("div",{key:0,class:"absolute mac-center z-50 text-xl md:text-3xl bg-white px_border mx-auto text-center",style:ee({width:`${(N(t).playground.xTiles-5)*N(t).tileSize}px`})},[P("h1",IS,Dt(r()),1),P("h2",wS,[_e(" Before you slither and slide, take a peek at the "),P("span",{onClick:i[0]||(i[0]=o=>N(n).toggleModal("gameRules")),class:"underline text-orange-600 font-bold cursor-pointer"},"rules inside!")]),P("div",null,[ut(rn,{class:"w-full px-4 my-2 md:my-4 text-xl md:text-2xl font-bold animate-[pulse_2s_linear_infinite]",text:"Let's play!",onClick:i[1]||(i[1]=o=>N(t).startGame())})])],4))}}),RS=Yt({__name:"GameModal",setup(e){const t=ve();return(n,r)=>($(),_t("div",{class:"absolute mac-center z-[60] text-xl md:text-3xl font-bold md:p-5 bg-white pixel-border animate-easeIn p-2",style:ee({width:`${(N(t).playground.xTiles-3)*N(t).tileSize}px`})},[py(n.$slots,"default",{},void 0,!0)],4))}}),Uo=Gs(RS,[["__scopeId","data-v-f2708472"]]),CS={class:"text-xs md:text-xl"},PS=P("p",{class:"mb-2 text-gradient from-green-600 to-teal-800"}," 1. Starting at a speed of 480,000 px/h, this game's snake moves lightning-fast from the get-go! ",-1),xS=P("p",{class:"mb-2 text-gradient from-orange-500 to-red-800"}," 2. If the snake bites its own body, each segment costs 50 points; dip below 0, and it's game over! ",-1),VS=P("p",{class:"mb-2 text-gradient from-blue-500 to-teal-800"}," 3. Edges aren't teleport portals here; hit them and you'll break your nose! ",-1),DS=P("p",{class:"mb-4"}," 4. Some fruits are tastier and more filling, while others are sour—don't let the snake go hungry! ",-1),kS={class:"flex items-center justify-start"},NS=["src","width","alt"],OS=["aria-level"],MS={class:"font-bold"},FS={class:"font-bold"},LS=Yt({__name:"GameRules",setup(e){const t=ve(),n=Mr();return(r,s)=>($(),Pe(Uo,null,{default:Ps(()=>[P("div",CS,[PS,xS,VS,DS,($(!0),_t(te,null,vl(N(t).loot,(i,o)=>($(),_t("div",{class:"grid grid-cols-4 mb-2 text-center",key:o},[P("div",kS,[P("img",{src:`/src/assets/images/loot/${i.image}.png`,width:N(t).tileSize-5,class:"h-fit mr-2",alt:i.name},null,8,NS),P("h1",{"aria-level":o},Dt(i.name),9,OS)]),P("p",null,"Score: "+Dt(i.score),1),P("p",null,[_e(" Speed: "),P("span",MS,Dt(N(O_)(i.snakeSpeed)),1)]),P("p",null,[_e(" Size: "),P("span",FS,Dt(i.bodyIncrease),1)])]))),128)),ut(rn,{text:"Nothing can stop me now!",proceed:!0,onClick:s[0]||(s[0]=i=>N(n).toggleModal("gameRules")),class:"mt-4 text-xs md:text-xl w-full"})])]),_:1}))}}),US="/snakeGame/assets/snake-DRw8Edqm.png",BS={class:"text-sm md:text-xl my-2 md:my-5 mr-3 md:mr-4 flex w-full items-center"},jS=["for"],zS=["id","placeholder","type"],qS=Yt({__name:"BaseInput",props:{inputType:{type:String,default:"text"},placeholder:{type:String,default:"Enter here..."},labelFor:{type:String,default:"input"},label:{type:String,default:"Nickname:"}},emits:["update:modelValue"],setup(e,{emit:t}){const n=mr(""),r=e,s=t;function i(o){s("update:modelValue",o.target.value)}return(o,a)=>($(),_t("div",BS,[P("label",{class:"font-bold mr-2",for:r.labelFor},Dt(r.label),9,jS),ny(P("input",{id:r.labelFor,placeholder:r.placeholder,class:"pixel-input text-sm :text-lg w-full",type:r.inputType,"onUpdate:modelValue":a[0]||(a[0]=l=>n.value=l),onInput:i},null,40,zS),[[A_,n.value]])]))}}),QS=Gs(qS,[["__scopeId","data-v-858c9f82"]]),HS=P("h1",{class:"text-2xl md:text-3xl mb-3 w-fit mx-auto"},"Snake menu",-1),GS={key:0,class:"flex items-center justify-center"},KS={key:1,class:"flex justify-center items-center my-5 text-xl md:text-2xl"},WS=P("img",{class:"mr-2 w-8 md:w-10",src:US,alt:"snake"},null,-1),JS={class:"font-bold mr-5 text-gradient from-orange-500 to-red-800"},YS={class:"flex-col flex"},XS=Yt({__name:"GameMenu",setup(e){const t=Mr(),n=ve();let r=mr(!1);const s=mr("");function i(){n.setPlayerName(s.value),r.value=!1}return(o,a)=>($(),Pe(Uo,{class:"px-3"},{default:Ps(()=>[P("div",null,[HS,N(n).player===""||N(r)?($(),_t("div",GS,[ut(QS,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=l=>s.value=l)},null,8,["modelValue"]),ut(rn,{text:"Ok",disabled:s.value.length===0,proceed:!0,onClick:i},null,8,["disabled"])])):($(),_t("div",KS,[WS,P("p",JS,Dt(N(n).player),1),ut(rn,{onClick:a[1]||(a[1]=l=>Rt(r)?r.value=!N(r):r=!N(r)),styled:!1,icon:"edit",text:"edit"})])),P("div",YS,[ut(rn,{text:"World leaderboard",class:"my-5",onClick:a[2]||(a[2]=l=>N(t).toggleModal("leaderBoard"))}),ut(rn,{text:"Close menu",danger:!0,onClick:a[3]||(a[3]=l=>N(t).toggleModal("gameMenu"))})])])]),_:1}))}}),zh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAADAFBMVEVHcEwHEScECx45HyYFCx0EDB8FCxwEECUkIDIEDCEVGS0RFyzVl3QIECcHDyM3HBgNFCoECyEMFSsBCSAHECesX1sIECcJESgKEienV1UIEigKECIWGSwKEygHDyQIEihYREcECyH5u4AJESc5MzkGDCMJESSrXVoIEyoLEicJEicLFCoJECdiUkwMEycKEygDDSTBopIjICxIMD5FOz396cksKTITGS2GL02pWlcYGi8HESmJaVAHESecU1ELFClbPDnypWu6gnMYGy+uYV0nJjH6sHPGpJHHqZT0qnH7sHISFSUOFismJTMjJzaPfHYyMzY/HzozKi4bGy+IjY+lVlS4ZlreiF3zoWj2pmvijWHpsoaqXVl7Ukb7r3DFeGPKqZRmUkcZGyq+i3xxZmbrnmy4fHH7s3fFpZKtXViBSk27czdsVkmlaDMuMS3RlGv/zEXssHZoZDZJOzSyoUCubDQFEir86sj510nbn3fprXL73bB0LUju69f079n///8A623/pd+duXb/vHedV1f/uXb9t3YrJTRgO0QNFizvqXHqoW7NmWg6MTgzLTaQb1X4rnMiIjKXV1b5tHRxWEx8SEsXHTHIp5TipWyDaFTrq29pVEhjQDL/q0FbS0XTiWntpW9PND/Ed2PKfWX4sXNFMDyiW1ezY1ylX1mzZl3Cc2CJTVHjmmpCLTt+Y0/HlGUFESovKDe1iGH9w4ghKz+wYlyRVFKzYVpzRkfyrHLUiGE7JjmDTU1uY2Lzr3KyYFxpRkiDdGkqHzabhn1QRkXco3vfpH3g28zekmrgj2JnQUWpcVq+bV5lXF7BfmDNg2i6hXjxwpJLNi+zazVZPzHlpz//10p5TzLIPl733LpfaHL97tKueFz5sXHTnGmualq+jmPMhmGhbVPPiGFWPUKwaFq7cV1RJD98cDlybGn/ykXdu0bOqEP/t0HuxEigYjOoaTXdiDnDeDfghTuAh4zloXZCQEvjrnqztrLKzcX///W+WgrqCAD2ABcACgNHcExPARUVAAABAHRSTlMAixQBDA8HPPQY2vULaSUE2h/rKIP+kjihGq4+lMJIzv8t/ZigNVXc+FCo8THxQ8x5Wrr8/vv0+fl47V3wcSnl6uku81N1L7imUe5L3lz1/MC95YD8FuZ4fR7vErzpYu7U4+L53PHZ04e4dub5+Y/t9PP7avP5s87C+OCl6v7+EMJ2//////////////////////////////////////7///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8Acc6WdwAAA3ZJREFUSMdjYBgFVAOqgiRqYNYJyOMkWjWrIJsgm7BWSREjE4sgvyAbEVrUpLyN9GSLK16YM/oaScuqEqNFKKg0yDy74Op1bYfcJHtitLDycl/60Pvp1dvrV9732WuyEOMZFl6Oj2/eXbv2+uplH2824gJA0ezzXDC4rM9KnA4+LfMrc8DgkjxxWoS1Jq6bCQZHNsgT5RNhlSn9k5ubmzf19/RMSeRlIUZHf1trW9vkTS9vHVzfPEPXlZUoHa1tSzb1/fj1ZXZr6wwzWyYCWsTWtbbO6pk8q68z5Oet2W2tMzZqaBLSMntW6/rZ+2Yd6eyctuXg5s0zNgroEdAiwj1l8uRCJaXvR7ZsCam7fbPHT46fUGphXHquqrrc9Pbx48drb37d1OejQ0gHU/ChjfPyK48ePXbs2NH529qF9AikGBYZrpobFs5mfb1A0Nd3YGqnAIG8ySZmccNid6A4r5//4cOHvxm3TBWQJmAJv3jg80NlwooB/tOnT78wqWXPIX1Ckc9mYL9BSlFczNfQ0DBt5f6p7fIEg4tfzVZfhIEPGHf84WFAHbJyxCRKOWlxawaG6IioMzsmbtAXYTRgZWC2s7TkwadHR4SXmSHS8eSeiRsXLnwyWzeYicFFVF0Svw4GBp44x0ft7Xu271/VPSvHlYmAFmVGIOHmtaavc+r2ltWTzm/eZ2KQRVgLj6fXrvbOHS0Lp025aKpkomEsGhOKJ/olZKJ53NIn7OrtnLhx4mygji6TDUszJZlxRwyjtm5CBo9n6s6e3v57PTOaldY86+s0ssNjh5jD7rPuTgxO8fvaemY1t7YuWPR06bQdsYw4Uw2rjM391QopHh7uyYsXn+9qXbN4UcvSaeseP7SRwVUAcHKt7z4xZctBUAI70LJ4/qrVC9d2npoxYcJ6Lk6cWu4saX5wQGHv3r1npxl3dHTsnjhl3a4lzRNO49Yi0HFuX/OC0/MU1q5dqzAPCPrbmlvvLpi/GqcWVgntqfO7u7u7di5etKirDQQmd3efXLXsFE4tDKyyHSuWb926akHX5Mk7J7cu6epas3L58mUd3FI4yzI2Ce6OSdtatq48s6Br0Yl985evXC46adJCbi0mnFHJzCRh5TxtaUtLy4oVLctWLAMytm20slLGW15y8jFqcHMgAyFrPkI1M6c0OwoQZ2EYIgAAF4VUUSf8Yh8AAAAASUVORK5CYII=",Kg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAACIlBMVEVHcEwQGiMJERoAAQYBAQICBQkHCxFdoroJDhIAAAMKExoIERoUJDACAgUMFRoBBQoRHy0BAQURHy0IEhkGDRIQHCUCAwcXGRQLExcMEhYCAwYEBAVoaUoECA8IEBUmJBAxLhsBBQsJEBbLgA4EBgkABQkyLxN+aA0EBQmypxYHCgsdHxYEChEzLRdIRhJGSi4LDxNgPA8DBw5KMBFhXBIaFQhUURZdPRE/OxVjQRVpVhFqYxOsjhZwSBIXFweKghNPMgxQMwt4cRWmnRk6NBFONBUdGRL/9AD6yAD4xwD76AL5xwD55wCriAEaEAV3SQzQgQv4tQPtwAX5mgP5ogH5wgL//6uTkmg2IAb5qAL6mwb9/av5xQL52AL56AHnjgf68VX65QLouwP64AP4sgP57kL47zf55wXYrwbWkQRIPQr96wb4ugOqigc9MwrkuATywgL3zAT53QPnpQX9/KT89XT2xQT52wS0iwdOSA0KCAXOwBH1ngP30wT0mQRRMQkrJwn45wo6KQtoQAz04wjNpA756yj53lXdkwXxlQf3rATAjQP47jaQhgzMhwlcTQpkXQtHNgn8ywL320HQkALZsQTrsAb89Wj1wAXpngX56x/cjghRPwqxbxDm1QruyR/ZsASlcA3hjg7h0xN7chCXegidiA3ftAuSdgiymRDjy0fXrgL450N9Uwzu7qc4OCm4tWLq2A7ouk+QjUQAAgRHcEwdPeGQAAAAtnRSTlMADiDK/Z9CAVr2NRkE8iehB+gKL0AU4WNHU9n7/YM9wny/Tv7GpZz81Py2WX2G4ZJz85jZ5vbJ3brP9vb06f7x8P7t783HfO//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ALwkrV0AAAPWSURBVFjD7Zf7VxJpGMdhDEGG6wByUVFUvKaV3e/X3XPeBihk2bSUJGlJFIsoMBBS0iy7rbpes3vbdXfbS39gcwMGtXpnqtM5e+bzA+c934HPPMPzvOe8IxIJCAgICAh8Q6RSKY/k48jVdomqINFJ7Gp5QaKS2O0mOJ0CM7pc+8xYvgApZiYSI6ZgJaatLtePrOQTqGzba8aTrU1ILkGaNhPJFlu+akNTa3K8Zm+tHOqBldc8XaNXtPmfq7RX097+X5W6XIKWhsamTx4rM32ZUM5PiEh2Phhq3NaG5n/e9gOZqPN/gqFtR+PrBzvtOqiZEckSCeLerKaITGWJRDMrEUmtykRiowhycnQVFeuRwqrXV1SoViXy/9PeU6waWZjkExhtK/tntllXJCabGVaHoXUjzSj7/hq0asS4KmlBNXDC6tL9z1qL2H22Wg4929LA7rOuYdPTvRYrnFD2/k52pyB6A/V4Zc+zWw/VkxMvJfYTsVOKIYXrSCFV4UYltbuKS3JCY4mM2aAnj5XAC4MvdldVKxDjjlCdTCyWbdj9Oh7e1WLWoMY6IjFg5pZdTzgJ+48+HKnFqsvuhQe1KkR7ZbQb4O2DDQZrSSgcUsoNlsF2t4eD8L/5JUKoyQvHunFCaOEtPPHzLw8Ha8WMUFV6b4yscKrBoFcuh5eVctQS4iq8PZY83HSk/nfnq/rKysZkkBDGxvdUVta/opI94zGuQkd/smM57HQ6X2Sm/ul3dAOAT7/MTJFJeCrzchrnLAym7t91kty9cdFHCgG+kE3uL+CAs9AXD0RvDTmHbkXdvbQQeDsXqWSx0wu4Cx0OfyT9m/PGcMpPrCkhAAPpPmdfeqAL4HyEvoiHFHb7WEIPIfQM4AB8XSHgJ3TEY9G+uVgv6WaE3kC0L+r28hU6ji4MR3zUihEC3J120yteQn88Rdbn6E1FcMboHfB+gdDho+u7CFbDT8iwUojjnMem5zrB0keEF0gC8EIzIbxEMh/054V4DnD+8ezsbJQQ6mF04uoN5X9fppg/y/DHzMzMo/Yc50nmJp9sqjJhEMc5bfmpniDF2Uun8rx5e47h8QWq5V2TNw+WIjDnQ0JIP+lST5aJiYlHZ3LE6BmavHkVWuinyTYlTreW1WQSDsKJAEWMnkV/KlLY5UAnxU9wQp2l/K9/T1PM9VLEgZegi4ZcLtKXTz89UIR+XqhBqt5lOij+7GRKKWT4Gn25I2NEoE5gxUUM22uOr0XNZuZ6LeQZViGmwZpda7JVjzHf4HBCZN7I1Gq1RMJ8MqjVbYiIL9K1EV6vBQQEvj8fAJn9qDxmk/WXAAAAAElFTkSuQmCC",$S={class:"text-sm md:text-xl"},ZS=P("div",{class:"flex items-center justify-center mx-auto mb-5"},[P("img",{src:zh,alt:"leader snake",class:"w-6 md:w-8"}),P("h1",{class:"font-bold text-2xl md:text-3xl underline"},"Top Scores"),P("img",{src:zh,alt:"leader snake",class:"w-6 md:w-8 scale-x-[-1]"})],-1),tb=P("div",{class:"grid grid-cols-3 border-b-2 mb-2 font-normal"},[P("p",{class:"text-start"},"Player name"),P("p",null,"Total score"),P("p",{class:"text-end"},"Snake length")],-1),eb={class:"text-black mr-2"},nb={key:0,class:"w-5 md:w-7",src:Kg,alt:"crown"},rb={class:"text-right"},sb=Yt({__name:"LeaderBoard",setup(e){const t=Mr(),n=mr([]),r=async()=>{const s=kg(Gg,"scores"),i=U0(s,B0("score","desc"),j0(10)),o=await W0(i);n.value=o.docs.map(a=>{const l=a.data();return{playerName:l.playerName,score:l.score,snakeLength:l.snakeLength}})};return no(()=>{r()}),(s,i)=>($(),Pe(Uo,null,{default:Ps(()=>[P("div",$S,[ZS,tb,($(!0),_t(te,null,vl(n.value,(o,a)=>($(),_t("div",{class:"grid grid-cols-3",key:a},[P("p",{class:Qe(["text-left flex items-center flex-nowrap",{"text-amber-500":a===0,"text-slate-400":a===1,"text-orange-500":a===2}])},[P("span",eb,Dt(a+1)+". ",1),a===0?($(),_t("img",nb)):en("",!0),_e(" "+Dt(o.playerName),1)],2),P("p",null,Dt(o.score),1),P("p",rb,Dt(o.snakeLength),1)]))),128)),ut(rn,{class:"mt-4",text:"I can do better",onClick:i[0]||(i[0]=o=>N(t).toggleModal("leaderBoard"))})])]),_:1}))}}),ib="/snakeGame/assets/gameOver-C9nVm0ni.webp",ob={class:"modal-content text-center w-full"},ab=["width","height"],lb=P("h1",{class:"text-3xl md:text-5xl mx-auto text-gradient bg-gradient-to-r from-orange-500 to-red-800 mb-4 w-fit"}," Game Over! ",-1),cb={key:0,class:"mb-4 text-xl md:text-2xl"},ub={key:1,class:"mb-4 text-xl md:text-2xl"},hb={class:"text-gradient bg-gradient-to-r from-green-600 to-teal-800"},fb={class:"text-gradient bg-gradient-to-r from-blue-500 to-teal-800"},db=Yt({__name:"GameOver",setup(e){const t=ve(),n=je(()=>t.score),r=je(()=>t.playerHighscore);function s(){t.resetGame()}return(i,o)=>($(),Pe(Uo,null,{default:Ps(()=>[P("div",ob,[P("img",{src:ib,class:"mx-auto",alt:"Game over",width:N(t).tileSize*7,height:N(t).tileSize*7},null,8,ab),lb,n.value<0?($(),_t("p",cb," Nibbled on tail, oh what a fail, game over, Snake's self-bite tale! ")):($(),_t("p",ub," End of line, you hit the sign, game over, Mr. Slithering Vine! ")),P("p",null,[_e(" Your score: "),P("span",hb,Dt(n.value),1)]),P("p",null,[_e(" Your highscore: "),P("span",fb,Dt(r.value),1)]),ut(rn,{text:"Restart Game",danger:!0,class:"mx-auto mt-5",onClick:s})])]),_:1}))}}),pb=Yt({__name:"GameBoard",setup(e){const t=ve(),n=Mr(),r=je(()=>t.isGameOver);function s(i){const a={ArrowUp:"UP",ArrowDown:"DOWN",ArrowLeft:"LEFT",ArrowRight:"RIGHT"}[i.key];if(a&&a!==t.direction&&t.nextDirection==null){const l={UP:"DOWN",DOWN:"UP",LEFT:"RIGHT",RIGHT:"LEFT"};t.direction!==l[a]&&t.setDirection(a)}}return no(()=>{window.addEventListener("keydown",s)}),El(()=>{window.removeEventListener("keydown",s)}),(i,o)=>($(),_t("section",{id:"board",class:Qe(["grid game-board relative mx-auto mb-5 md:mb-10 z-0 place-items-center bg-orange-100",{"animate-wiggle":r.value}]),style:ee({width:`${N(t).tileSize*N(t).playground.xTiles}px`,height:`${N(t).tileSize*N(t).playground.yTiles}px`,gridTemplateColumns:`repeat(${N(t).playground.xTiles}, ${N(t).tileSize}px)`,gridTemplateRows:`repeat(${N(t).playground.yTiles}, ${N(t).tileSize}px)`})},[ut(eS),ut(fS),ut(bS),N(t).isGameOver?($(),Pe(db,{key:0})):en("",!0),N(n).gameRules?($(),Pe(LS,{key:1})):en("",!0),N(n).gameMenu?($(),Pe(XS,{key:2})):en("",!0),N(n).leaderBoard?($(),Pe(sb,{key:3})):en("",!0)],6))}}),gb="/snakeGame/assets/snakeLogo-DZt-Rg9P.png",mb={},yb={src:gb,alt:"snake logo",class:"w-[60px] lg:w-[100px] 4k:w-[120px] mx-auto retina:w-15 retina:h-15 self-center"};function _b(e,t){return $(),_t("img",yb)}const Ab=Gs(mb,[["render",_b]]),Eb={class:"flex items-center justify-center"},vb=["width"],Ib={class:"md:text-xl"},wb=Yt({__name:"ScoreBoard",setup(e){const t=ve(),n=je(()=>t.tileSize*t.playground.xTiles),r=je(()=>t.tileSize+8),s=["text-red-900","text-blue-700","text-green-800","text-purple-700"],i=je(()=>s[t.level%s.length-1]);return(o,a)=>($(),_t("div",{class:"grid grid-cols-[1fr_1fr_auto] mb-3 text-md md:text-2xl mx-auto",style:ee({width:`${n.value}px`})},[P("p",null,[_e(" Score: "),P("b",null,Dt(N(t).score),1)]),P("p",{class:Qe(["font-bold",i.value])},"Level "+Dt(N(t).level),3),P("div",Eb,[P("img",{src:Kg,alt:"crown",width:r.value},null,8,vb),P("p",Ib,[_e(" Your Highscore: "),P("b",null,Dt(N(t).playerHighscore),1)])])],4))}}),Tb={class:"mx-auto text-center mb-2 md:text-xl text-xs w-11/12 md:w-full"},Sb=P("a",{class:"underline text-blue-600",target:"_blank",href:"https://github.com/SpekCezStolicku/"},"SpekCezStolicku",-1),bb=Yt({__name:"GameFooter",setup(e){const t=new Date().getFullYear();return(n,r)=>($(),_t("p",Tb,[_e(" Built with enthusiasm 🔥 and glazed with a little bit of magic ✨! ©"+Dt(N(t))+" - ",1),Sb]))}}),hi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAACTCAYAAAB4dbz1AAAACXBIWXMAABs0AAAbNAG7DiRNAAAGVElEQVR4nO2dQWhUVxSG/zeMkzEGlWARm0WEYhHqwkWklbQYNy4qri1diItiu4s7pZvGjZiddSXiQty129JNNpqFuGgWWSiUWiEBg5TQIBLjZDLllhkmmti557Rzuc4f+38QQrhz35z3PnJ577x7zy1CCOiWxqnDd1HgGEoBKICAAJQAFKH9g/ZP++9m26bPvP4dNvVp/b5UufH7RNfBbVFK/7cTZkdCyJAQMiSEDAkhQ0LIKCeGUwcwb7Q/B7AUaRsEsNPoW02MbUuSKqQCYNhoP77thwd3OzWsnTk4BuCO0be2NS9pGhqyyJAQMiSEDAkhQ0LIkBAyUtPvUyjwoZF+f44CS5H0+yAK7DTS74sohRcbU/Sb0/phAAWWm3+HDun8vsknY1tRSO7nkFRGMh6bEg1ZZEgIGRJChoSQISFkSAgZqbe95wHsNtoHACxH2o4CuGz0vQfgrNFupe63LElCyj/Nznbbd+3MQe8jjyrXH3d8l9KkPp7z8ad3aMgiQ0LIkBAyJIQMCSGj/Ndnn4xtnKUeNqaxS+hHEVaMFHg/CqwY6ffZbT8+eBY55QHnUhyof/PBWPy77c6rF4fG3kzJr8f5Ku43z/f1Z2arF/6MxZ2VsnM/P++k17324wBit66x55N1RgF8mXDyKedlxZ0VDVlkSAgZEkKGhJAhIWRICBllZznBIoBbRvtJ53T6jbY5AJeM9qozA/6r5kykSFvzvG4afY8YbXDizkrZuR+fK0/NRJcmN04dHnOm6qzEGrbd/rUppOtlz/Xx4e+s9r4rC9Fjr07sbbZ9bnSPxp0bDVlkSAgZEkKGhJAhIWRICBlF49OPg/E+5CmKsM94H/IUBfb1ohpQfXw4vIq5w/Hwz+NtfB+ygAJDxvuQN+LsfC6t89183Obv6e1fv+h6KYT3H1JPbGcl9kDZczRkkSEhZEgIGRJChoSQ4QmpJLanYM2qTyV11r+FN73JxAvst/LUzPuxxlZVUmCf0T+lGpA5L6ry/bwzMytOO/1upe+PVy8sdYy7dnWXF7c3vclEQxYZEkKGhJAhIWRICBkSQkYz/T5npN8XUYSfjbT2SRR4z0i/30OBR5H0+wEUGDXS7w9RCr8Y370bBZ4Z1YCsWSdXUOALI/1+DwiPIun3AyjCqJF+b1+zaOq/igK1EEnre9OA4Nyve9P6U5fKWlN1PKwpRrXMcXd9zTRkkSEhZEgIGRJChoSQISFkeOn35+0VqTGuOf2/BXA/0tbLakC3nFW2KVWMkq6ZJ2SpPDUTDbxx6nBsK4p17hvvQ5yu+aoB9U38Mdden/KfqV3d5XVZ2n5uJRr3y9sV85ppyCJDQsiQEDIkhAwJIcO7yxpsnBixKvIMOv2Prp0+FJn93rp9tEiqBmSxOrF3PwrsN9LvA0BY7px+d+MefHmj36hEZF8zT8jOf1FVx8K6X/dIrQZkcdZJkaeQdM00ZJEhIWRICBkSQoaEkCEhZHjVgJop6GmjfU/GzYkXnYyslSL3qGaM27tmdeu8vGlA0+WpmegS3/ZyhI+M/inLEW5Vrj/uulqQgzcNKGU5wvT2cyvZlkWLt4yEkCEhZEgIGRJChoSQ4T2H7GmcGLlrvJPwnkOurZ0+FNmcuHU/b/WtWpeqPj78Kq4OyxEGUIRl453EDi/u2uTgUuR9iBd3UkEe7zlk3nnO8JYjpGCViG1yLOHYOePuanrROhqyyJAQMiSEDAkhQ0LIYK4GlJOc1YCS6Fk1oNz0XVmIztxKqQaUGw1ZZEgIGRJChoSQISFkSAgZXvp9R+PEyISRfvfS2NHNtdbOHGwuCThrVAOqohRqxncvWJuCrV4cmjDS70e6jTs3uasBWZtr7U88tkeuuLOiIYsMCSFDQsiQEDIkhAwJIaOcuEGw127NwOh3ngUeOhsjp2xOnBJ3VooQQk++uLUcocCdXLu09U0+SVjJ3js0ZJEhIWRICBkSQoaEkCEhZCTd9ramARU4lmlz4gWUwpC74bBue98atBsI50RDFhkSQoaEkCEhZEgIGalCkjbidaBdMpCT1JP2yiOlVAO6mbEaEC0assiQEDIkhAwJIUNCyJAQMlJve+u9qgb0rpIqpNLDakDvJBqyyJAQMiSEDAkhQ0LIkBAyUm97zwPYbbRbOxh4uxv0bElAzwDwN1ddUpzkauj3AAAAAElFTkSuQmCC",Rb={class:"grid grid-cols-3 grid-rows-3 p-4 my-3 md:my-5 w-fit mx-auto bg-slate-200 rounded-full md:mx-10 mx-5"},Cb=["width"],Pb=["width"],xb=["width"],Vb=["width"],Db=P("div",{class:"bg-black flex justify-center col-start-2 row-start-2"},[P("div",{class:"w-full h-full border-2 md:border-4 border-orange-500 rounded-full"})],-1),kb=Yt({__name:"GameController",setup(e){const t=ve();function n(r){if(t.gameStarted&&r!==t.direction&&t.nextDirection==null){const s={UP:"DOWN",DOWN:"UP",LEFT:"RIGHT",RIGHT:"LEFT"};t.direction!==s[r]&&t.setDirection(r)}}return(r,s)=>($(),_t("div",Rb,[P("div",{class:"col-start-2 row-start-1 mx-auto flex justify-center bg-black border-orange-500 border-2 md:border-4 border-b-0 md:border-b-0",style:ee({width:`${N(t).tileSize*3.5}px`,height:`${N(t).tileSize*3.5}px`}),onClick:s[0]||(s[0]=i=>n("UP"))},[P("img",{class:"-rotate-90 cursor-pointer select-none m-auto",src:hi,width:N(t).tileSize*2,alt:"arrowUp"},null,8,Cb)],4),P("div",{class:"col-start-1 row-start-2 mx-auto flex justify-center bg-black border-orange-500 border-2 md:border-4 border-r-0 md:border-r-0",style:ee({width:`${N(t).tileSize*3.5}px`,height:`${N(t).tileSize*3.5}px`}),onClick:s[1]||(s[1]=i=>n("LEFT"))},[P("img",{class:"rotate-180 cursor-pointer select-none m-auto",src:hi,width:N(t).tileSize*2,alt:"arrowLeft"},null,8,Pb)],4),P("div",{class:"col-start-2 row-start-3 mx-auto flex justify-center bg-black border-orange-500 border-2 md:border-4 border-t-0 md:border-t-0",style:ee({width:`${N(t).tileSize*3.5}px`,height:`${N(t).tileSize*3.5}px`}),onClick:s[2]||(s[2]=i=>n("DOWN"))},[P("img",{class:"rotate-90 cursor-pointer select-none m-auto",src:hi,width:N(t).tileSize*2,alt:"arrowDown"},null,8,xb)],4),P("div",{class:"col-start-3 row-start-2 mx-auto flex justify-center bg-black border-orange-500 border-2 md:border-4 border-l-0 md:border-l-0",style:ee({width:`${N(t).tileSize*3.5}px`,height:`${N(t).tileSize*3.5}px`}),onClick:s[3]||(s[3]=i=>n("RIGHT"))},[P("img",{class:"cursor-pointer select-none m-auto",src:hi,width:N(t).tileSize*2,alt:"arrowRight"},null,8,Vb)],4),Db]))}}),Nb=Yt({__name:"MenuButton",setup(e){const t=Mr();return(n,r)=>($(),_t("button",{class:"text-sm md:text-lg font-bold text-orange-400 bg-black self-start 4k:self-start lg:self-center m-5 lg:m-10 lg:ml-24 4k:m-0 rounded-full",onClick:r[0]||(r[0]=s=>N(t).toggleModal("gameMenu"))}," Menu "))}}),Ob=Gs(Nb,[["__scopeId","data-v-248f76c0"]]),Mb={class:"select-none flex flex-col justify-between"},Fb={class:"md:flex block items-center 2xl:block justify-evenly mx-auto w-full"},Lb={class:"flex flex-col mt-2 flex-wrap 4k:flex-col w-fit lg:flex-row items-center game-board p-2 md:p-5 4k:p-8 bg-repeat bg-amber-300 bg-[url('/src/assets/images/noise.png')]"},Ub={class:"flex lg:flex-col-reverse flex-row 4k:flex-row justify-evenly items-center"},Bb=Yt({__name:"App",setup(e){return no(()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){const n=document.createElement("style");document.head.appendChild(n),n.sheet&&n.sheet.insertRule(".mac-center { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }",n.sheet.cssRules.length)}}),(t,n)=>($(),_t("main",Mb,[P("div",Fb,[ut(Ab),P("div",Lb,[P("div",null,[ut(wb),ut(pb)]),P("div",Ub,[ut(kb),ut(Ob)])])]),ut(bb)]))}}),Wg=w_(Bb),jb=P_();Wg.use(jb);const zb=ve();function Jg(){zb.adjustTileSize(window.innerWidth,window.innerHeight)}Jg();window.addEventListener("resize",Jg);Wg.mount("#app");
